<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Server LuaCsForBarotrauma: HumanAIController.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Server LuaCsForBarotrauma
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_human_a_i_controller_8cs_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HumanAIController.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="namespace_barotrauma_1_1_extensions.html">Extensions</a>;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="namespace_barotrauma_1_1_items.html">Items</a>.<a class="code" href="namespace_barotrauma_1_1_items_1_1_components.html">Components</a>;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="namespace_barotrauma_1_1_networking.html">Networking</a>;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> Microsoft.Xna.Framework;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> System.Linq;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_barotrauma.html">Barotrauma</a></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;{</div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html">   11</a></span>&#160;    <span class="keyword">partial class </span><a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> : <a class="code" href="class_barotrauma_1_1_a_i_controller.html">AIController</a></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    {</div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a1dc627482c6e23815010d9f551d1f005">   13</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a1dc627482c6e23815010d9f551d1f005">DebugAI</a>;</div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a71a505cabd09264e3ca300670aa6f5f4">   14</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a71a505cabd09264e3ca300670aa6f5f4">DisableCrewAI</a>;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html">AIObjectiveManager</a> objectiveManager;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        </div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a9c8b9a5e372b6aeea66f58e3464700fb">   18</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a9c8b9a5e372b6aeea66f58e3464700fb">SortTimer</a> { <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> crouchRaycastTimer;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> reactTimer;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> unreachableClearTimer;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> shouldCrouch;</div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a790df212a93a840069eb3586c7095b17">   26</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a790df212a93a840069eb3586c7095b17">AutoFaceMovement</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> reactionTime = 0.3f;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> crouchRaycastInterval = 1;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> sortObjectiveInterval = 1;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> clearUnreachableInterval = 30;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> flipTimer;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">float</span> FlipInterval = 0.5f;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a0a87c9639c62d01fd271595d3fd86e8a">   36</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a0a87c9639c62d01fd271595d3fd86e8a">HULL_SAFETY_THRESHOLD</a> = 40;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a45553edc36380e344d8ef39de8059e5d">   37</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a45553edc36380e344d8ef39de8059e5d">HULL_LOW_OXYGEN_PERCENTAGE</a> = 30;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> readonly <span class="keywordtype">float</span> characterWaitOnSwitch = 5;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a4af45a98307526b1c94a5bd0b045aa3d">   41</a></span>&#160;        <span class="keyword">public</span> readonly HashSet&lt;Hull&gt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a4af45a98307526b1c94a5bd0b045aa3d">UnreachableHulls</a> = <span class="keyword">new</span> HashSet&lt;Hull&gt;();</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a9b96cc3bca4ee7a43db80c0d3b922c8d">   42</a></span>&#160;        <span class="keyword">public</span> readonly HashSet&lt;Hull&gt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a9b96cc3bca4ee7a43db80c0d3b922c8d">UnsafeHulls</a> = <span class="keyword">new</span> HashSet&lt;Hull&gt;();</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a71bf6b439bb0983676e403e50aa16582">   43</a></span>&#160;        <span class="keyword">public</span> readonly List&lt;Item&gt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a71bf6b439bb0983676e403e50aa16582">IgnoredItems</a> = <span class="keyword">new</span> List&lt;Item&gt;();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keyword">private</span> readonly HashSet&lt;Hull&gt; dirtyHullSafetyCalculations = <span class="keyword">new</span> HashSet&lt;Hull&gt;();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> respondToAttackTimer;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">float</span> RespondToAttackInterval = 1.0f;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> wasConscious;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> freezeAI;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">float</span> maxSteeringBuffer = 5000;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">float</span> minSteeringBuffer = 500;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">float</span> steeringBufferIncreaseSpeed = 100;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> steeringBuffer;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">float</span> obstacleRaycastIntervalShort = 1, obstacleRaycastIntervalLong = 5;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> obstacleRaycastTimer;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> isBlocked;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">float</span> enemyCheckInterval = 0.2f;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">float</span> enemySpotDistanceOutside = 800;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">float</span> enemySpotDistanceInside = 1000;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> enemyCheckTimer;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">float</span> reportProblemsInterval = 1.0f;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> reportProblemsTimer;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a19a842e9b26f3900ec9c6991e533dbbc">   75</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a19a842e9b26f3900ec9c6991e533dbbc">Hearing</a> { <span class="keyword">get</span>; <span class="keyword">set</span>; } = 1.0f;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#ae0f1090677d29bc143bbce658d7ed15f">   80</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ae0f1090677d29bc143bbce658d7ed15f">ReportRange</a> { <span class="keyword">get</span>; <span class="keyword">set</span>; } = <span class="keywordtype">float</span>.PositiveInfinity;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a327357928c710e8baeddb1df92e1c10c">   85</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a327357928c710e8baeddb1df92e1c10c">FindWeaponsRange</a> { <span class="keyword">get</span>; <span class="keyword">set</span>; } = <span class="keywordtype">float</span>.PositiveInfinity;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> _aimSpeed = 1;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a847429b1b20c34ffacf1e95200364d8e">   88</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a847429b1b20c34ffacf1e95200364d8e">AimSpeed</a></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _aimSpeed; }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keyword">set</span> { _aimSpeed = Math.Max(value, 0.01f); }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> _aimAccuracy = 1;</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a20809a298c2e35eb3d25d99ae9b05e4e">   95</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a20809a298c2e35eb3d25d99ae9b05e4e">AimAccuracy</a></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> _aimAccuracy; }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keyword">set</span> { _aimAccuracy = Math.Clamp(value, 0f, 1f); }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keyword">private</span> readonly Dictionary&lt;Character, AttackResult&gt; previousAttackResults = <span class="keyword">new</span> Dictionary&lt;Character, AttackResult&gt;();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keyword">private</span> readonly Dictionary&lt;Character, float&gt; previousHealAmounts = <span class="keyword">new</span> Dictionary&lt;Character, float&gt;();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keyword">private</span> readonly <a class="code" href="class_barotrauma_1_1_steering_manager.html">SteeringManager</a> outsideSteering, insideSteering;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a7619a576de7820c1ef70e870d978fcbd">  112</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a7619a576de7820c1ef70e870d978fcbd">UseOutsideWaypoints</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">  114</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html">IndoorsSteeringManager</a> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a> =&gt; insideSteering as <a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html">IndoorsSteeringManager</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a1ab7cb8eb141a5ee2bf82b9271b58d9b">  115</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_barotrauma_1_1_humanoid_anim_controller.html">HumanoidAnimController</a> <a class="code" href="class_barotrauma_1_1_anim_controller.html">AnimController</a> =&gt; <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a> as <a class="code" href="class_barotrauma_1_1_humanoid_anim_controller.html">HumanoidAnimController</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">  117</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html">AIObjectiveManager</a> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a> =&gt; objectiveManager;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a25c6f7909db9be23cd5dc66a9cc801f9">  119</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a25c6f7909db9be23cd5dc66a9cc801f9">CurrentHullSafety</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; } = 100;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keyword">private</span> readonly Dictionary&lt;Character, float&gt; structureDamageAccumulator = <span class="keyword">new</span> Dictionary&lt;Character, float&gt;();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keyword">private</span> readonly Dictionary&lt;Hull, HullSafety&gt; knownHulls = <span class="keyword">new</span> Dictionary&lt;Hull, HullSafety&gt;();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keyword">private</span> <span class="keyword">class </span>HullSafety</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> safety;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">float</span> timer;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">bool</span> IsStale =&gt; timer &lt;= 0;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keyword">public</span> HullSafety(<span class="keywordtype">float</span> safety)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ad694466240ac6fba2c227785bd96763d">Reset</a>(safety);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ad694466240ac6fba2c227785bd96763d">Reset</a>(<span class="keywordtype">float</span> safety)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                this.safety = safety;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                <span class="comment">// How long before the hull safety is considered stale</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                timer = 0.5f;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a6b60ec3a3e96b542002d576692c0ee15">Update</a>(<span class="keywordtype">float</span> deltaTime)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                timer = Math.Max(timer - deltaTime, 0);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <span class="keywordflow">return</span> IsStale;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#ab3cc74f2aa9698b548e0ea6bf94308c9">  152</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a> <a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#ae7c93a9780779ac98bfcf3db3b9f0689">  154</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ae7c93a9780779ac98bfcf3db3b9f0689">InitMentalStateManager</a>()</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a> == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a> = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ab3cc74f2aa9698b548e0ea6bf94308c9">MentalStateManager</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a>.<a class="code" href="class_barotrauma_1_1_mental_state_manager.html#ad17ba54eec099664a2bb6de06b64513c">Active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#aef208273059f23b7e03a7bf77c89854d">  163</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aef208273059f23b7e03a7bf77c89854d">IsMentallyUnstable</a> =&gt; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a> is</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                CurrentMentalType: </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                    <a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a>.<a class="code" href="class_barotrauma_1_1_mental_state_manager.html#a119d6bf6fec6bbc40b715791e722d877">MentalType</a>.Afraid or </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                    <a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a>.<a class="code" href="class_barotrauma_1_1_mental_state_manager.html#a119d6bf6fec6bbc40b715791e722d877">MentalType</a>.Desperate or</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                    <a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a>.<a class="code" href="class_barotrauma_1_1_mental_state_manager.html#a119d6bf6fec6bbc40b715791e722d877">MentalType</a>.Berserk</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            };</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#aeed0dd457fc91a72bc684ba3f6bd36ae">  172</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_barotrauma_1_1_ship_command_manager.html">ShipCommandManager</a> <a class="code" href="class_barotrauma_1_1_ship_command_manager.html">ShipCommandManager</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a60ed9fef8e741daac560538aced80caf">  174</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a60ed9fef8e741daac560538aced80caf">InitShipCommandManager</a>()</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_ship_command_manager.html">ShipCommandManager</a> == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <a class="code" href="class_barotrauma_1_1_ship_command_manager.html">ShipCommandManager</a> = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aeed0dd457fc91a72bc684ba3f6bd36ae">ShipCommandManager</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <a class="code" href="class_barotrauma_1_1_ship_command_manager.html">ShipCommandManager</a>.<a class="code" href="class_barotrauma_1_1_ship_command_manager.html#a12709b16c37897a381e939485080e160">Active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a97e11e03ca7d572d8da7eeff26462979">  183</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a97e11e03ca7d572d8da7eeff26462979">HumanAIController</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> c) : base(c)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            insideSteering = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html">IndoorsSteeringManager</a>(<span class="keyword">this</span>, <span class="keyword">true</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            outsideSteering = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_a_i_controller.html#ab1497018265d6ab1c492726b983f13fb">SteeringManager</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            objectiveManager = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html">AIObjectiveManager</a>(c);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            reactTimer = GetReactionTime();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a9c8b9a5e372b6aeea66f58e3464700fb">SortTimer</a> = Rand.Range(0f, sortObjectiveInterval);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            reportProblemsTimer = Rand.Range(0f, reportProblemsInterval);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a6b60ec3a3e96b542002d576692c0ee15">  193</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a6b60ec3a3e96b542002d576692c0ee15">Update</a>(<span class="keywordtype">float</span> deltaTime)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a71a505cabd09264e3ca300670aa6f5f4">DisableCrewAI</a> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#ae40bdfaee2d22e0e2f3bf44bf006964e">Removed</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordtype">bool</span> isIncapacitated = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a487d54c21be19303d5428430484c0c08">IsIncapacitated</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">if</span> (freezeAI &amp;&amp; !isIncapacitated)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                freezeAI = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">if</span> (isIncapacitated) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            wasConscious = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            respondToAttackTimer -= deltaTime;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">if</span> (respondToAttackTimer &lt;= 0.0f)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                <span class="keywordflow">foreach</span> (var previousAttackResult <span class="keywordflow">in</span> previousAttackResults)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                    RespondToAttack(previousAttackResult.Key, previousAttackResult.Value);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                    <span class="keywordflow">if</span> (previousHealAmounts.ContainsKey(previousAttackResult.Key))</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        <span class="comment">//gradually forget past heals</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                        previousHealAmounts[previousAttackResult.Key] = Math.Min(previousHealAmounts[previousAttackResult.Key] - 5.0f, 100.0f);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                        <span class="keywordflow">if</span> (previousHealAmounts[previousAttackResult.Key] &lt;= 0.0f)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                        {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                            previousHealAmounts.Remove(previousAttackResult.Key);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                previousAttackResults.Clear();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                respondToAttackTimer = RespondToAttackInterval;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            base.Update(deltaTime);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordflow">foreach</span> (var values <span class="keywordflow">in</span> knownHulls)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                HullSafety hullSafety = values.Value;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                hullSafety.Update(deltaTime);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordflow">if</span> (unreachableClearTimer &gt; 0)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                unreachableClearTimer -= deltaTime;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                unreachableClearTimer = clearUnreachableInterval;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a4af45a98307526b1c94a5bd0b045aa3d">UnreachableHulls</a>.Clear();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a71bf6b439bb0983676e403e50aa16582">IgnoredItems</a>.Clear();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="comment">// Note: returns false when useTargetSub is &#39;true&#39; and the target is outside (targetSub is &#39;null&#39;)</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordtype">bool</span> IsCloseEnoughToTarget(<span class="keywordtype">float</span> threshold, <span class="keywordtype">bool</span> targetSub = <span class="keyword">true</span>)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <a class="code" href="class_barotrauma_1_1_entity.html">Entity</a> target = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a8e81a7915987774ed8d652524b4a0f2d">SelectedAiTarget</a>?.<a class="code" href="class_barotrauma_1_1_a_i_target.html#a7ba9aa9ca23c144dc3533e38b3b1b43a">Entity</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="keywordflow">if</span> (target == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <span class="keywordflow">if</span> (targetSub)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    <span class="keywordflow">if</span> (target.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> is <a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a> sub)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                    {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                        target = sub;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                        threshold += Math.Max(sub.Borders.Size.X, sub.Borders.Size.Y) / 2;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                    {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="keywordflow">return</span> Vector2.DistanceSquared(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a>, target.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a>) &lt; MathUtils.Pow2(threshold);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordtype">bool</span> isOutside = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> == <span class="keyword">null</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span> (isOutside)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                obstacleRaycastTimer -= deltaTime;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="keywordflow">if</span> (obstacleRaycastTimer &lt;= 0)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    <span class="keywordtype">bool</span> hasValidPath = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#ada20b1876bf5b93356a85b55f5bae855">HasValidPath</a>();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                    isBlocked = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a7619a576de7820c1ef70e870d978fcbd">UseOutsideWaypoints</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    obstacleRaycastTimer = obstacleRaycastIntervalLong;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                    <a class="code" href="interface_barotrauma_1_1_i_spatial_entity.html">ISpatialEntity</a> spatialTarget = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a8e81a7915987774ed8d652524b4a0f2d">SelectedAiTarget</a>?.<a class="code" href="class_barotrauma_1_1_a_i_target.html#a7ba9aa9ca23c144dc3533e38b3b1b43a">Entity</a> ?? <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.GetLastActiveObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_go_to.html">AIObjectiveGoTo</a>&gt;()?.<a class="code" href="namespace_barotrauma.html#a280bd0510ca4cc29072e5379b37ae82dac41a31890959544c6523af684561abe5">Target</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    <span class="keywordflow">if</span> (spatialTarget != <span class="keyword">null</span> &amp;&amp; (spatialTarget.<a class="code" href="interface_barotrauma_1_1_i_spatial_entity.html#a69d75b8e5b319329a384d784de74dcb8">Submarine</a> == <span class="keyword">null</span> || !IsCloseEnoughToTarget(2000, targetSub: <span class="keyword">false</span>)))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                    {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                        <span class="comment">// If the target is behind a level wall, switch to the pathing to get around the obstacles.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                        IEnumerable&lt;FarseerPhysics.Dynamics.Body&gt; ignoredBodies = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                        Vector2 rayEnd = spatialTarget.<a class="code" href="interface_barotrauma_1_1_i_spatial_entity.html#a693513319db6e2fbf2c8c6f5a0321a66">SimPosition</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                        <a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a> targetSub = spatialTarget.<a class="code" href="interface_barotrauma_1_1_i_spatial_entity.html#a69d75b8e5b319329a384d784de74dcb8">Submarine</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                        <span class="keywordflow">if</span> (targetSub != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                        {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                            rayEnd += targetSub.<a class="code" href="class_barotrauma_1_1_submarine.html#ab17558cd52d477cc90e79eec566c4df8">SimPosition</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                            ignoredBodies = targetSub.<a class="code" href="class_barotrauma_1_1_submarine.html#acc871c559a26cec98a490ef7d9b2de6e">PhysicsBody</a>.<a class="code" href="class_barotrauma_1_1_physics_body.html#a903993a96687dbed0470519d36532804">FarseerBody</a>.ToEnumerable();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                        }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                        var obstacle = <a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#af0021304c59f91a731965107f9a86837">PickBody</a>(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2a43041edb7b1be62ed25a9cd1ac4db8">SimPosition</a>, rayEnd, ignoredBodies, collisionCategory: Physics.CollisionLevel | Physics.CollisionWall);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                        isBlocked = obstacle != <span class="keyword">null</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                        <span class="comment">// Don&#39;t use outside waypoints when blocked by a sub, because we should use the waypoints linked to the sub instead.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                        <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a7619a576de7820c1ef70e870d978fcbd">UseOutsideWaypoints</a> = isBlocked &amp;&amp; (obstacle.UserData is not <a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a> sub || sub.<a class="code" href="class_barotrauma_1_1_submarine.html#ae9fcc64a1607cde7d8a6267f2cb5f36a">Info</a>.<a class="code" href="class_barotrauma_1_1_submarine_info.html#a54e8f6fa2c36228025302a9745fda0c9">IsRuin</a>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                        <span class="keywordtype">bool</span> resetPath = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a7619a576de7820c1ef70e870d978fcbd">UseOutsideWaypoints</a>)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                        {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                            <span class="keywordtype">bool</span> isUsingInsideWaypoints = hasValidPath &amp;&amp; <a class="code" href="class_barotrauma_1_1_a_i_controller.html#ada20b1876bf5b93356a85b55f5bae855">HasValidPath</a>(nodePredicate: n =&gt; n.Submarine != <span class="keyword">null</span> || n.Ruin != <span class="keyword">null</span>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                            <span class="keywordflow">if</span> (isUsingInsideWaypoints)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                            {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                resetPath = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                            }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                        {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                            <span class="keywordtype">bool</span> isUsingOutsideWaypoints = hasValidPath &amp;&amp; <a class="code" href="class_barotrauma_1_1_a_i_controller.html#ada20b1876bf5b93356a85b55f5bae855">HasValidPath</a>(nodePredicate: n =&gt; n.Submarine == <span class="keyword">null</span> &amp;&amp; n.Ruin == <span class="keyword">null</span>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                            <span class="keywordflow">if</span> (isUsingOutsideWaypoints)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                            {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                resetPath = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                            }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                        }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                        <span class="keywordflow">if</span> (resetPath)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                        {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                            <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#ae74063b11d4b2611da7b0afeb2eddd61">ResetPath</a>();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                        }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hasValidPath)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                        obstacleRaycastTimer = obstacleRaycastIntervalShort;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                        <span class="comment">// Swimming outside and using the path finder -&gt; check that the path is not blocked with anything (the path finder doesn&#39;t know about other subs).</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a4cea8a12911102661d8b43630298b528">MainSub</a> != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                        {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                            <span class="keywordflow">foreach</span> (var connectedSub <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a4cea8a12911102661d8b43630298b528">MainSub</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a5e89de71b527daea5d9399a96ad2e1ea">GetConnectedSubs</a>())</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                            {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                <span class="keywordflow">if</span> (connectedSub == <a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a4cea8a12911102661d8b43630298b528">MainSub</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                Vector2 rayStart = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2a43041edb7b1be62ed25a9cd1ac4db8">SimPosition</a> - connectedSub.SimPosition;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                Vector2 dir = <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#ad57557a70977f4db56cf0aedfb920014">CurrentPath</a>.<a class="code" href="class_barotrauma_1_1_steering_path.html#a9fda1adc1715c8179a8ee6c6f93d01e7">CurrentNode</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a> - <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a56934cf172e7506d6299c0d6c6e6bc3f">WorldPosition</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                                Vector2 rayEnd = rayStart + dir.ClampLength(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a6000f08b5552f46b4db28d53e48d671e">Collider</a>.<a class="code" href="class_barotrauma_1_1_physics_body.html#a8416b230635164418eca1ab198ccf59a">GetLocalFront</a>().Length() * 5);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a56b6a4520428f6bbf537b4c81241e796">CheckVisibility</a>(rayStart, rayEnd, ignoreSubs: <span class="keyword">true</span>) != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                    <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#ad57557a70977f4db56cf0aedfb920014">CurrentPath</a>.<a class="code" href="class_barotrauma_1_1_steering_path.html#adef471cee1fa31581193552336c70acf">Unreachable</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                                }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                            }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                        }                        </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a7619a576de7820c1ef70e870d978fcbd">UseOutsideWaypoints</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                isBlocked = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="keywordflow">if</span> (isOutside || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a57ac902c41166b491d8ea350ada1c21e">IsOnPlayerTeam</a> &amp;&amp; !<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a3e4c9e2c0f46913359ec3d8abdf87676">IsEscorted</a> &amp;&amp; !<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ac7af1cb4553dc5ae5befbe6bb49d5c06">IsOnFriendlyTeam</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">TeamID</a>))</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="comment">// Spot enemies while staying outside or inside an enemy ship.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="comment">// does not apply for escorted characters, such as prisoners or terrorists who have their own behavior</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                enemyCheckTimer -= deltaTime;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                <span class="keywordflow">if</span> (enemyCheckTimer &lt; 0)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    CheckEnemies();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    enemyCheckTimer = enemyCheckInterval * Rand.Range(0.75f, 1.25f);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keywordtype">bool</span> useInsideSteering = !isOutside || isBlocked || <a class="code" href="class_barotrauma_1_1_a_i_controller.html#ada20b1876bf5b93356a85b55f5bae855">HasValidPath</a>() || IsCloseEnoughToTarget(steeringBuffer);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">if</span> (useInsideSteering)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#ac6f7d11d8a57121525307b21a0123e1e">steeringManager</a> != insideSteering)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                    insideSteering.Reset();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#ae74063b11d4b2611da7b0afeb2eddd61">ResetPath</a>();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    <a class="code" href="class_barotrauma_1_1_a_i_controller.html#ac6f7d11d8a57121525307b21a0123e1e">steeringManager</a> = insideSteering;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="keywordflow">if</span> (IsCloseEnoughToTarget(maxSteeringBuffer))</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                    steeringBuffer += steeringBufferIncreaseSpeed * deltaTime;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    steeringBuffer = minSteeringBuffer;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#ac6f7d11d8a57121525307b21a0123e1e">steeringManager</a> != outsideSteering)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    outsideSteering.<a class="code" href="class_barotrauma_1_1_steering_manager.html#a505c734fb26e15edc5c16be2e1a440be">Reset</a>();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <a class="code" href="class_barotrauma_1_1_a_i_controller.html#ac6f7d11d8a57121525307b21a0123e1e">steeringManager</a> = outsideSteering;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                steeringBuffer = minSteeringBuffer;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            steeringBuffer = Math.Clamp(steeringBuffer, minSteeringBuffer, maxSteeringBuffer);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <a class="code" href="class_barotrauma_1_1_anim_controller.html">AnimController</a>.Crouching = shouldCrouch;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            CheckCrouching(deltaTime);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a47a5a8c641b203a4f8b7d71525f8e9fa">ClearInputs</a>();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a9c8b9a5e372b6aeea66f58e3464700fb">SortTimer</a> &gt; 0.0f)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a9c8b9a5e372b6aeea66f58e3464700fb">SortTimer</a> -= deltaTime;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                objectiveManager.SortObjectives();</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a9c8b9a5e372b6aeea66f58e3464700fb">SortTimer</a> = sortObjectiveInterval;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            objectiveManager.UpdateObjectives(deltaTime);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            UpdateDragged(deltaTime);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">if</span> (reportProblemsTimer &gt; 0)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                reportProblemsTimer -= deltaTime;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">if</span> (reactTimer &gt; 0.0f)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                reactTimer -= deltaTime;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                <span class="keywordflow">if</span> (findItemState != FindItemState.None)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                    <span class="comment">// Update every frame only when seeking items</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    UnequipUnnecessaryItems();</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a3557696cab74b3bbcfb53e1fdefdbf04">UpdateTeam</a>();</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a> != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a57ac902c41166b491d8ea350ada1c21e">IsOnPlayerTeam</a>)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                        <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> h <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_a_i_controller.html#aac15666eec86e614ed84785009163e71">VisibleHulls</a>)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                        {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                            <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a85694a43a2b62afc5a2f523391ecea16">PropagateHullSafety</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, h);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                            dirtyHullSafetyCalculations.Remove(h);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                        }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                    {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                        <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> h <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_a_i_controller.html#aac15666eec86e614ed84785009163e71">VisibleHulls</a>)</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                        {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                            RefreshHullSafety(h);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                            dirtyHullSafetyCalculations.Remove(h);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> h <span class="keywordflow">in</span> dirtyHullSafetyCalculations)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                        RefreshHullSafety(h);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                dirtyHullSafetyCalculations.Clear();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                <span class="keywordflow">if</span> (reportProblemsTimer &lt;= 0.0f)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> != <span class="keyword">null</span> &amp;&amp; (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">TeamID</a> == <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">TeamID</a> == <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a3723f7ee8e9d3ec3ff3981e5b7124f6a">OriginalTeamID</a> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a3e4c9e2c0f46913359ec3d8abdf87676">IsEscorted</a>) &amp;&amp; !<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#ae9fcc64a1607cde7d8a6267f2cb5f36a">Info</a>.<a class="code" href="class_barotrauma_1_1_submarine_info.html#acd102b30b8c1a230be4401f91e2c712f">IsWreck</a>)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                        <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a380f751ddbdeab78a76fef55ee436c63">ReportProblems</a>();</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                    {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                        <span class="comment">// Allows bots to heal targets autonomously while swimming outside of the sub.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_rescue_all.html">AIObjectiveRescueAll</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_rescue_all.html#ae34da4c707a0fda52091d7c99efb179a">IsValidTarget</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>, out _))</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                        {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                            AddTargets&lt;AIObjectiveRescueAll, Character&gt;(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                        }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                    reportProblemsTimer = reportProblemsInterval;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                SpeakAboutIssues();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                UnequipUnnecessaryItems();</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                reactTimer = GetReactionTime();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keywordflow">if</span> (objectiveManager.CurrentObjective == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            objectiveManager.DoCurrentObjective(deltaTime);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            var currentObjective = objectiveManager.CurrentObjective;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordtype">bool</span> run = !currentObjective.ForceWalk &amp;&amp; (currentObjective.ForceRun || objectiveManager.GetCurrentPriority() &gt; <a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html">AIObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a2ffe9e460d6be5abe88ec87d70e1d1d7">RunPriority</a>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">if</span> (currentObjective is <a class="code" href="class_barotrauma_1_1_a_i_objective_go_to.html">AIObjectiveGoTo</a> goTo)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                <span class="keywordflow">if</span> (run &amp;&amp; goTo == objectiveManager.ForcedOrder &amp;&amp; goTo.IsWaitOrder &amp;&amp; !<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a57ac902c41166b491d8ea350ada1c21e">IsOnPlayerTeam</a>)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                    <span class="comment">// NPCs with a wait order don&#39;t run.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                    run = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (goTo.Target != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a> == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                    {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                        run = Vector2.DistanceSquared(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a>, goTo.Target.WorldPosition) &gt; 300 * 300;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                    }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                    {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                        <span class="keywordtype">float</span> yDiff = goTo.Target.WorldPosition.Y - <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a>.Y;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        <span class="keywordflow">if</span> (Math.Abs(yDiff) &gt; 100)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                        {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                            run = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                        }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                        {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                            <span class="keywordtype">float</span> xDiff = goTo.Target.WorldPosition.X - <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a>.X;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                            run = Math.Abs(xDiff) &gt; 500;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                        }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="comment">//if someone is grabbing the bot and the bot isn&#39;t trying to run anywhere, let them keep dragging and &quot;control&quot; the bot</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a396668f9552bd28e8e352dcf1e2a9b9c">SelectedBy</a> == <span class="keyword">null</span> || run)</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                <a class="code" href="class_barotrauma_1_1_a_i_controller.html#ac6f7d11d8a57121525307b21a0123e1e">steeringManager</a>.<a class="code" href="class_barotrauma_1_1_steering_manager.html#ab8a028abf3763373bf2e265d4695a4f5">Update</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_anim_controller.html#a28f940c7e5baebf5eaa241cf9676297a">GetCurrentSpeed</a>(run &amp;&amp; <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a7f18f8c396a94ff724e31762c0708c21">CanRun</a>));</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="keywordtype">bool</span> ignorePlatforms = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>.Y &lt; -0.5f &amp;&amp; (-<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>.Y &gt; Math.Abs(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>.X));</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#ac6f7d11d8a57121525307b21a0123e1e">steeringManager</a> == insideSteering)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                var currPath = <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#ad57557a70977f4db56cf0aedfb920014">CurrentPath</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                <span class="keywordflow">if</span> (currPath != <span class="keyword">null</span> &amp;&amp; currPath.CurrentNode != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                    <span class="keywordflow">if</span> (currPath.CurrentNode.SimPosition.Y &lt; <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a63aaf8c7d4b1704790b6dfbdc25bcf6b">GetColliderBottom</a>().Y)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                    {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                        <span class="comment">// Don&#39;t allow to jump from too high.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                        <span class="keywordtype">float</span> allowedJumpHeight = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a1028fd1202927859e3f87212a776fc90">ImpactTolerance</a> / 2;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                        <span class="keywordtype">float</span> height = Math.Abs(currPath.CurrentNode.SimPosition.Y - <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a3c1ce407b57264140a4e88b479406d84">SimPosition</a>.Y);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                        ignorePlatforms = height &lt; allowedJumpHeight;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                    }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a5c43952c0062f171a45f539179e603d0">IsClimbing</a> &amp;&amp; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#a503526fa24d6a40ad3267d4d685b1428">IsNextLadderSameAsCurrent</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a> = <span class="keyword">new</span> Vector2(0.0f, Math.Sign(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>.Y));</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#aa8fbcedb9e22015a1cd454adaba20e77">IgnorePlatforms</a> = ignorePlatforms;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            Vector2 targetMovement = <a class="code" href="class_barotrauma_1_1_anim_controller.html">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a8a2db92b5713ce4515bc7ba21169ea1c">InWater</a>)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                targetMovement = <span class="keyword">new</span> Vector2(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>.X, MathHelper.Clamp(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>.Y, -1.0f, 1.0f));</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a> = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#adeb939b672c3317ac5dc6796fe05405c">ApplyMovementLimits</a>(targetMovement, <a class="code" href="class_barotrauma_1_1_anim_controller.html">AnimController</a>.<a class="code" href="class_barotrauma_1_1_anim_controller.html#a28f940c7e5baebf5eaa241cf9676297a">GetCurrentSpeed</a>(run));</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            flipTimer -= deltaTime;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">if</span> (flipTimer &lt;= 0.0f)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                <a class="code" href="namespace_barotrauma.html#a1535396b8a6ea16210c86c93214bd2b3">Direction</a> newDir = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#af272c6e59a0768620fabe69f017900a6">TargetDir</a>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#aabbf81a6a3a2226e6605ba08d78125fb">IsKeyDown</a>(<a class="code" href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87">InputType</a>.Aim))</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                {</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    var cursorDiffX = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a61b35829a6186d3896e046c4b4751124">CursorPosition</a>.X - <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad8867df774f4aaa8d29e972af88670be">Position</a>.X;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                    <span class="keywordflow">if</span> (cursorDiffX &gt; 10.0f)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                    {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                        newDir = <a class="code" href="namespace_barotrauma.html#a1535396b8a6ea16210c86c93214bd2b3">Direction</a>.Right;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cursorDiffX &lt; -10.0f)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                    {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                        newDir = <a class="code" href="namespace_barotrauma.html#a1535396b8a6ea16210c86c93214bd2b3">Direction</a>.Left;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                    }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#afc8633a3f7fba62786cddb92700b9980">SelectedItem</a> != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                    {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                        <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#afc8633a3f7fba62786cddb92700b9980">SelectedItem</a>.<a class="code" href="class_barotrauma_1_1_item.html#a6cd68ba1f017dc7399ec9a24fe0350c5">SecondaryUse</a>(deltaTime, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                    }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a790df212a93a840069eb3586c7095b17">AutoFaceMovement</a> &amp;&amp; Math.Abs(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>.X) &gt; 0.1f &amp;&amp; !<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a8a2db92b5713ce4515bc7ba21169ea1c">InWater</a>)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    newDir = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>.X &gt; 0.0f ? <a class="code" href="namespace_barotrauma.html#a1535396b8a6ea16210c86c93214bd2b3">Direction</a>.Right : <a class="code" href="namespace_barotrauma.html#a1535396b8a6ea16210c86c93214bd2b3">Direction</a>.Left;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                <span class="keywordflow">if</span> (newDir != <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#af272c6e59a0768620fabe69f017900a6">TargetDir</a>)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#af272c6e59a0768620fabe69f017900a6">TargetDir</a> = newDir;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                    flipTimer = FlipInterval;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a790df212a93a840069eb3586c7095b17">AutoFaceMovement</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <a class="code" href="class_barotrauma_1_1_mental_state_manager.html">MentalStateManager</a>?.<a class="code" href="class_barotrauma_1_1_mental_state_manager.html#af97cd94250c3a434b9e12d5d6ce40559">Update</a>(deltaTime);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <a class="code" href="class_barotrauma_1_1_ship_command_manager.html">ShipCommandManager</a>?.<a class="code" href="class_barotrauma_1_1_ship_command_manager.html#a38f8ef70ed780e99bcec1c58c103a24c">Update</a>(deltaTime);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> CheckEnemies()</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="comment">//already in combat, no need to check</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            <span class="keywordflow">if</span> (objectiveManager.IsCurrentObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>&gt;()) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="keywordtype">float</span> closestDistance = 0;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a> closestEnemy = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a> c <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="keywordflow">if</span> (c.Submarine != <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordflow">if</span> (c.Removed || c.IsDead || c.IsIncapacitated) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8a4c9efa6e9ae591ffab42ee0c47cdbe">IsFriendly</a>(c)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                Vector2 toTarget = c.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a> - <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a56934cf172e7506d6299c0d6c6e6bc3f">WorldPosition</a>;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                <span class="keywordtype">float</span> dist = toTarget.LengthSquared();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                <span class="keywordtype">float</span> maxDistance = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> == <span class="keyword">null</span> ? enemySpotDistanceOutside : enemySpotDistanceInside;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                <span class="keywordflow">if</span> (dist &gt; maxDistance * maxDistance) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <span class="keywordflow">if</span> (EnemyAIController.IsLatchedToSomeoneElse(c, <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                var head = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a7fb59f06051c62ceb09ac96edb1e0884">GetLimb</a>(<a class="code" href="namespace_barotrauma.html#a0e200852d75ece36161f3bb6b84b46df">LimbType</a>.Head);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                <span class="keywordflow">if</span> (head == <span class="keyword">null</span>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                <span class="keywordtype">float</span> rotation = head.<a class="code" href="class_barotrauma_1_1_limb.html#a85bd84fc2b5fc1f52213b0162be36bbe">body</a>.<a class="code" href="class_barotrauma_1_1_physics_body.html#aba2ac13a9259c7f81dd86d18e49f8b71">TransformedRotation</a>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                Vector2 forward = VectorExtensions.Forward(rotation);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                <span class="keywordtype">float</span> angle = MathHelper.ToDegrees(VectorExtensions.Angle(toTarget, forward));</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="keywordflow">if</span> (angle &gt; 70) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#afef8adb9919fe4da9411e576b6a672ea">CanSeeTarget</a>(c)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="keywordflow">if</span> (dist &lt; closestDistance || closestEnemy == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    closestEnemy = c;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                    closestDistance = dist;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">if</span> (closestEnemy != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a98fa54a887cbca4c9bd7cd233a0cabbf">AddCombatObjective</a>(AIObjectiveCombat.CombatMode.Defensive, closestEnemy);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            }            </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> UnequipUnnecessaryItems()</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a7a5574a10199c6f34e68c1ebab98f983">LockHands</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">CurrentObjective</a> == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a> == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordtype">bool</span> shouldActOnSuffocation = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ac7b520354c259f5ad40fd410f41976c1">IsLowInOxygen</a> &amp;&amp; !<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#ab92582f873ec7b6b76a57fe3e5a667ea">HeadInWater</a> &amp;&amp; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a1c680489cad97f64a80b4bbf6f6d7ed7">HasDivingSuit</a>(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>, requireOxygenTank: <span class="keyword">false</span>) &amp;&amp; !<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a402ef33488d9181e85f1b5024a798bd0">HasItem</a>(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>, Tags.OxygenSource, out _, conditionPercentage: 1);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <span class="keywordtype">bool</span> isCarrying = <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.HasActiveObjective&lt;AIObjectiveContainItem&gt;() || <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.HasActiveObjective&lt;AIObjectiveDecontainItem&gt;();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordtype">bool</span> NeedsDivingGearOnPath(AIObjectiveGoTo gotoObjective)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <span class="keywordtype">bool</span> insideSteering = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#ab1497018265d6ab1c492726b983f13fb">SteeringManager</a> == <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a> &amp;&amp; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#ad57557a70977f4db56cf0aedfb920014">CurrentPath</a> != <span class="keyword">null</span> &amp;&amp; !<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#a1f665eefa911b9f82d3247221fbc284a">IsPathDirty</a>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                Hull targetHull = gotoObjective.GetTargetHull();</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <span class="keywordflow">return</span> (gotoObjective.Target != <span class="keyword">null</span> &amp;&amp; targetHull == <span class="keyword">null</span> &amp;&amp; !<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a563ea85b5ace801ca26c318781587b11">IsImmuneToPressure</a>) ||</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                    <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a65ffc3dcd064312902c16bdac6d6decb">NeedsDivingGear</a>(targetHull, out _) ||</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    (insideSteering &amp;&amp; ((<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#ad57557a70977f4db56cf0aedfb920014">CurrentPath</a>.<a class="code" href="class_barotrauma_1_1_steering_path.html#a2adcad94a5e194e40176ddb685f1706b">HasOutdoorsNodes</a> &amp;&amp; !<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a563ea85b5ace801ca26c318781587b11">IsImmuneToPressure</a>) || <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">PathSteering</a>.<a class="code" href="class_barotrauma_1_1_indoors_steering_manager.html#ad57557a70977f4db56cf0aedfb920014">CurrentPath</a>.<a class="code" href="class_barotrauma_1_1_steering_path.html#ac13fcccb0bd12ebad6dc918f2eeeb4c2">Nodes</a>.Any(n =&gt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a65ffc3dcd064312902c16bdac6d6decb">NeedsDivingGear</a>(n.CurrentHull, out _))));</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">if</span> (isCarrying)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="keywordflow">if</span> (findItemState != FindItemState.OtherItem)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    var decontain = <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.GetActiveObjectives&lt;AIObjectiveDecontainItem&gt;().LastOrDefault();</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    <span class="keywordflow">if</span> (decontain != <span class="keyword">null</span> &amp;&amp; decontain.TargetItem != <span class="keyword">null</span> &amp;&amp; decontain.TargetItem.HasTag(Tags.HeavyDivingGear) &amp;&amp;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                        <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a23d00f8d7200f686019380c555a2ad21">GetActiveObjective</a>() is AIObjectiveGoTo gotoObjective &amp;&amp; NeedsDivingGearOnPath(gotoObjective))</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                    {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                        <span class="comment">// Don&#39;t try to put the diving suit in a locker if the suit would be needed in any hull in the path to the locker.</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                        gotoObjective.Abandon = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                <span class="keywordflow">if</span> (!shouldActOnSuffocation)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="comment">// Diving gear</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="keywordflow">if</span> (shouldActOnSuffocation || findItemState != FindItemState.OtherItem)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                <span class="keywordtype">bool</span> needsGear = <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a65ffc3dcd064312902c16bdac6d6decb">NeedsDivingGear</a>(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a>, out _);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="keywordflow">if</span> (!needsGear || shouldActOnSuffocation)</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                    <span class="keywordtype">bool</span> isCurrentObjectiveFindSafety = <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.IsCurrentObjective&lt;AIObjectiveFindSafety&gt;();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                    <span class="keywordtype">bool</span> shouldKeepTheGearOn =</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                        isCurrentObjectiveFindSafety ||</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                        <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a8a2db92b5713ce4515bc7ba21169ea1c">InWater</a> ||</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                        <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#ab92582f873ec7b6b76a57fe3e5a667ea">HeadInWater</a> ||</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                        <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a5c43952c0062f171a45f539179e603d0">IsClimbing</a> ||</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                        <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> == <span class="keyword">null</span> ||</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#ae9fcc64a1607cde7d8a6267f2cb5f36a">Info</a>.<a class="code" href="class_barotrauma_1_1_submarine_info.html#ae9f97d09336d1f0c1f9f2f6c47c5fd0d">HasTag</a>(<a class="code" href="namespace_barotrauma.html#af9e8b4c488b5c9a2ed4b9e967afd748f">SubmarineTag</a>.Shuttle) ||</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                        (!<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ac7af1cb4553dc5ae5befbe6bb49d5c06">IsOnFriendlyTeam</a>(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>, <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">TeamID</a>) &amp;&amp; !<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a3e4c9e2c0f46913359ec3d8abdf87676">IsEscorted</a>) ||</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                        <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a92b60b8c97caa74d754c830c3c2a37e3">CurrentOrders</a>.Any(o =&gt; o.Objective.KeepDivingGearOnAlsoWhenInactive) ||</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                        <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">CurrentObjective</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective.html#a3da977a11e2f89695e40cbaafb0a189c">GetSubObjectivesRecursive</a>(<span class="keyword">true</span>).Any(o =&gt; o.KeepDivingGearOn) ||</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                        <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a>.<a class="code" href="class_barotrauma_1_1_hull.html#a00d96807dfafb249a0b07442736c623f">OxygenPercentage</a> &lt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a45553edc36380e344d8ef39de8059e5d">HULL_LOW_OXYGEN_PERCENTAGE</a> + 10 ||</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                        <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a>.<a class="code" href="class_barotrauma_1_1_hull.html#a8aa02af3ff7b788f85a0db3579a46d6d">IsWetRoom</a>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                    <span class="keywordtype">bool</span> IsOrderedToWait() =&gt; <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a57ac902c41166b491d8ea350ada1c21e">IsOnPlayerTeam</a> &amp;&amp; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a90c9703815d4f56c7782a6984f5aed95">CurrentOrder</a> is AIObjectiveGoTo { IsWaitOrder: <span class="keyword">true</span> };</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                    <span class="keywordtype">bool</span> removeDivingSuit = !shouldKeepTheGearOn &amp;&amp; !IsOrderedToWait();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    <span class="keywordflow">if</span> (shouldActOnSuffocation &amp;&amp; <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a>.<a class="code" href="class_barotrauma_1_1_hull.html#af79fe91887d15e2456ab582ff19ea8fa">Oxygen</a> &gt; 0 &amp;&amp; (!isCurrentObjectiveFindSafety || <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a761ad63374223546205c67439918ad3e">OxygenAvailable</a> &lt; 1))</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                        shouldKeepTheGearOn = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                        <span class="comment">// Remove the suit before we pass out</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                        removeDivingSuit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                    <span class="keywordtype">bool</span> takeMaskOff = !shouldKeepTheGearOn;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    <span class="keywordflow">if</span> (!shouldKeepTheGearOn &amp;&amp; !shouldActOnSuffocation)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.IsCurrentObjective&lt;AIObjectiveIdle&gt;())</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                            removeDivingSuit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                            takeMaskOff = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                        }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                        {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                            <span class="keywordtype">bool</span> removeSuit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                            <span class="keywordtype">bool</span> removeMask = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                            <span class="keywordflow">foreach</span> (var objective <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">CurrentObjective</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective.html#a3da977a11e2f89695e40cbaafb0a189c">GetSubObjectivesRecursive</a>(includingSelf: <span class="keyword">true</span>))</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                            {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                <span class="keywordflow">if</span> (objective is AIObjectiveGoTo gotoObjective)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                                    <span class="keywordflow">if</span> (NeedsDivingGearOnPath(gotoObjective))</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                                    {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                                        removeDivingSuit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                                        takeMaskOff = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                                    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gotoObjective.Mimic)</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                                    {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                                        <span class="keywordtype">bool</span> targetHasDivingGear = <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a45fcb630b776bef6dd34e7da1d57b638">HasDivingGear</a>(gotoObjective.Target as <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>, requireOxygenTank: <span class="keyword">false</span>);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                                        <span class="keywordflow">if</span> (!removeSuit)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                                        {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                                            removeDivingSuit = !targetHasDivingGear;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                                            <span class="keywordflow">if</span> (removeDivingSuit)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                                            {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                                                removeSuit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                                            }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                                        }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                                        <span class="keywordflow">if</span> (!removeMask)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                        {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                            takeMaskOff = !targetHasDivingGear;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                            <span class="keywordflow">if</span> (takeMaskOff)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                            {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                                removeMask = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                                            }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                                        }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                            }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                        }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                    }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                    <span class="keywordflow">if</span> (removeDivingSuit)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                    {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                        var divingSuit = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a68c11884e610e45404c675125439517f">Inventory</a>.<a class="code" href="class_barotrauma_1_1_character_inventory.html#abdd8e1436def42aa6f360777580489ce">FindEquippedItemByTag</a>(Tags.HeavyDivingGear);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                        <span class="keywordflow">if</span> (divingSuit != <span class="keyword">null</span> &amp;&amp; !divingSuit.HasTag(Tags.DivingGearWearableIndoors) &amp;&amp; divingSuit.IsInteractable(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>))</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                        {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                            <span class="keywordflow">if</span> (shouldActOnSuffocation || <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>?.<a class="code" href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">TeamID</a> != <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> || <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a40b8085c7aff5c00712d0b43eda1cb51">GetCurrentPriority</a>() &gt;= AIObjectiveManager.RunPriority)</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                            {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                                divingSuit.<a class="code" href="class_barotrauma_1_1_item.html#a0974e4e4e433da549bae4e2eb500ee9e">Drop</a>(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ad0c7a74bae179d0e73ae18fc14aff2a2">HandleRelocation</a>(divingSuit);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                            }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (findItemState == FindItemState.None || findItemState == FindItemState.DivingSuit)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                            {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                                findItemState = FindItemState.DivingSuit;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aacaf643e5223e15dc7d9f521a1dfdcef">FindSuitableContainer</a>(divingSuit, out <a class="code" href="class_item.html">Item</a> targetContainer))</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                                {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                                    findItemState = FindItemState.None;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                                    itemIndex = 0;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                                    <span class="keywordflow">if</span> (targetContainer != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                                    {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                                        var decontainObjective = <span class="keyword">new</span> AIObjectiveDecontainItem(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>, divingSuit, <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>, targetContainer: targetContainer.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_container.html">ItemContainer</a>&gt;())</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                        {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                                            DropIfFails = <span class="keyword">false</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                        };</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                                        decontainObjective.Abandoned += () =&gt;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                                        {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                            <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                                            <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a71bf6b439bb0983676e403e50aa16582">IgnoredItems</a>.Add(targetContainer);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                                        };</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                                        decontainObjective.Completed += () =&gt; <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                                        <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">CurrentObjective</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective.html#a485508851cd4465e5b0e64a0ac0fac15">AddSubObjective</a>(decontainObjective, addFirst: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                                    }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                                    {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                                        divingSuit.Drop(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                                        <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ad0c7a74bae179d0e73ae18fc14aff2a2">HandleRelocation</a>(divingSuit);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                                        <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                                    }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                                }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                            }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                        }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                    }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                    <span class="keywordflow">if</span> (takeMaskOff)</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                    {                  </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                        var mask = <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a68c11884e610e45404c675125439517f">Inventory</a>.<a class="code" href="class_barotrauma_1_1_character_inventory.html#abdd8e1436def42aa6f360777580489ce">FindEquippedItemByTag</a>(Tags.LightDivingGear);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                        <span class="keywordflow">if</span> (mask != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                        {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                            <span class="keywordflow">if</span> (!mask.AllowedSlots.Contains(<a class="code" href="namespace_barotrauma.html#a4ae31bb5c40e588eec5d81af9e1d1025">InvSlotType</a>.Any) || !<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a68c11884e610e45404c675125439517f">Inventory</a>.<a class="code" href="class_barotrauma_1_1_character_inventory.html#a1f708f31c5358b49a2dc2ac355a42e4a">TryPutItem</a>(mask, <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>, <span class="keyword">new</span> List&lt;InvSlotType&gt;() { InvSlotType.Any }))</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                            {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>?.<a class="code" href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">TeamID</a> != <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> || <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a40b8085c7aff5c00712d0b43eda1cb51">GetCurrentPriority</a>() &gt;= AIObjectiveManager.RunPriority)</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                                {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                                    mask.<a class="code" href="class_barotrauma_1_1_item.html#a0974e4e4e433da549bae4e2eb500ee9e">Drop</a>(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                                    <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ad0c7a74bae179d0e73ae18fc14aff2a2">HandleRelocation</a>(mask);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                    <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                                }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (findItemState == FindItemState.None || findItemState == FindItemState.DivingMask)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                                {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                                    findItemState = FindItemState.DivingMask;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aacaf643e5223e15dc7d9f521a1dfdcef">FindSuitableContainer</a>(mask, out <a class="code" href="class_item.html">Item</a> targetContainer))</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                                    {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                                        findItemState = FindItemState.None;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                                        itemIndex = 0;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                                        <span class="keywordflow">if</span> (targetContainer != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                                        {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                                            var decontainObjective = <span class="keyword">new</span> AIObjectiveDecontainItem(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>, mask, <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>, targetContainer: targetContainer.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_container.html">ItemContainer</a>&gt;());</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                            decontainObjective.Abandoned += () =&gt;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                                            {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                                                <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a71bf6b439bb0983676e403e50aa16582">IgnoredItems</a>.Add(targetContainer);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                            };</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                                            decontainObjective.Completed += () =&gt; <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                                            <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">CurrentObjective</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective.html#a485508851cd4465e5b0e64a0ac0fac15">AddSubObjective</a>(decontainObjective, addFirst: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                                        }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                                        {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                                            mask.Drop(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                                            <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ad0c7a74bae179d0e73ae18fc14aff2a2">HandleRelocation</a>(mask);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                                            <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                                        }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                                    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                                }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                            }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                            {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                                <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                            }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                        }                        </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                    }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <span class="comment">// Other items</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="keywordflow">if</span> (isCarrying) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">CurrentObjective</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective.html#add193be9cd4497265717cd00132af9f9">AllowAutomaticItemUnequipping</a> || !<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a23d00f8d7200f686019380c555a2ad21">GetActiveObjective</a>().<a class="code" href="class_barotrauma_1_1_a_i_objective.html#add193be9cd4497265717cd00132af9f9">AllowAutomaticItemUnequipping</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>?.<a class="code" href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">TeamID</a> == <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> &amp;&amp; findItemState is FindItemState.None or FindItemState.OtherItem)</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                <span class="comment">// Only unequip other items inside a friendly sub.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                <span class="keywordflow">foreach</span> (<a class="code" href="class_item.html">Item</a> item <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#af11bffd137434f5927fb87b5ce5f1838">HeldItems</a>)</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                    <span class="keywordflow">if</span> (item == <span class="keyword">null</span> || !item.IsInteractable(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a020a0846e63b5de70de85cd01338a1cf">TryPutItemInAnySlot</a>(item)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad096212a175de1fd67592de520ae21b1">TryPutItemInBag</a>(item)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                    <span class="keywordflow">if</span> (item.HasTag(Tags.Weapon))</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                    {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                        <span class="comment">// Don&#39;t decontain weapons, because it could be that we are holding a weapon that cannot be placed on back (if we have a toolbelt) nor in the any slot, such as an HMG.</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                        <span class="comment">// Could check that we only ignore weapons when we&#39;ve had an order to find a weapon, but it could also be that we picked the weapon for self-defence, on ad-hoc basis.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                        <span class="comment">// And I don&#39;t think it would make sense to decontain those weapons either.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                    }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                    findItemState = FindItemState.OtherItem;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aacaf643e5223e15dc7d9f521a1dfdcef">FindSuitableContainer</a>(item, out <a class="code" href="class_item.html">Item</a> targetContainer))</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                    {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                        findItemState = FindItemState.None;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                        itemIndex = 0;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                        <span class="keywordflow">if</span> (targetContainer != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                        {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                            var decontainObjective = <span class="keyword">new</span> AIObjectiveDecontainItem(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>, item, <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>, targetContainer: targetContainer.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_container.html">ItemContainer</a>&gt;());</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                            decontainObjective.Abandoned += () =&gt;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                            {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                                <a class="code" href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">ReequipUnequipped</a>();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a71bf6b439bb0983676e403e50aa16582">IgnoredItems</a>.Add(targetContainer);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                            };</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                            <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">CurrentObjective</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective.html#a485508851cd4465e5b0e64a0ac0fac15">AddSubObjective</a>(decontainObjective, addFirst: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                        }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                        {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                            item.Drop(<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                            <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ad0c7a74bae179d0e73ae18fc14aff2a2">HandleRelocation</a>(item);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                        }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                    }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keyword">private</span> readonly HashSet&lt;Item&gt; itemsToRelocate = <span class="keyword">new</span> HashSet&lt;Item&gt;();</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#ad0c7a74bae179d0e73ae18fc14aff2a2">  850</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ad0c7a74bae179d0e73ae18fc14aff2a2">HandleRelocation</a>(<a class="code" href="class_barotrauma_1_1_item.html">Item</a> item)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_item.html#a7a3a8187074e14dd36c6c193528cca4c">SpawnedInCurrentOutpost</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> == <span class="keyword">null</span> || <a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a4cea8a12911102661d8b43630298b528">MainSub</a> == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            <span class="comment">// Only affects bots in the player team</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a57ac902c41166b491d8ea350ada1c21e">IsOnPlayerTeam</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <span class="comment">// Don&#39;t relocate if the item is on a sub of the same team</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">TeamID</a> == <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            <span class="keywordflow">if</span> (itemsToRelocate.Contains(item)) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            itemsToRelocate.Add(item);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a041697ba7af693867f92db324facc88a">ConnectedDockingPorts</a>.TryGetValue(<a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a4cea8a12911102661d8b43630298b528">MainSub</a>, out <a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_docking_port.html">DockingPort</a> myPort))</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                myPort.OnUnDocked += Relocate;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            var campaign = <a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">GameSession</a>.<a class="code" href="class_barotrauma_1_1_game_session.html#a8c3132ea67d099e8593cb7882c2e712b">Campaign</a>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <span class="keywordflow">if</span> (campaign != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                <span class="comment">// In the campaign mode, undocking happens after leaving the outpost, so we can&#39;t use that.</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                campaign.<a class="code" href="class_barotrauma_1_1_campaign_mode.html#a1fe14717ca4198055511641b9b67e46f">BeforeLevelLoading</a> += Relocate;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                campaign.OnSaveAndQuit += Relocate;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                campaign.ItemsRelocatedToMainSub = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            HintManager.OnItemMarkedForRelocation();</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <span class="keywordtype">void</span> Relocate()</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                <span class="keywordflow">if</span> (item == <span class="keyword">null</span> || item.<a class="code" href="class_barotrauma_1_1_entity.html#ae40bdfaee2d22e0e2f3bf44bf006964e">Removed</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                <span class="keywordflow">if</span> (!itemsToRelocate.Contains(item)) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                var mainSub = <a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a4cea8a12911102661d8b43630298b528">MainSub</a>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                <span class="keywordflow">if</span> (mainSub == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                <a class="code" href="class_barotrauma_1_1_entity.html">Entity</a> owner = item.<a class="code" href="class_barotrauma_1_1_item.html#af1eecd9e315fb74061eff019637226af">GetRootInventoryOwner</a>();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                <span class="keywordflow">if</span> (owner != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                    <span class="keywordflow">if</span> (owner is <a class="code" href="class_barotrauma_1_1_character.html">Character</a> c)</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                    {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                        <span class="keywordflow">if</span> (c.TeamID == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.Team1 || c.TeamID == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.Team2)</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                        {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                            <span class="comment">// Taken by a player/bot (if npc or monster would take the item, we&#39;d probably still want it to spawn back to the main sub.</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                        }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                    }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (owner.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> == mainSub)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                    {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                        <span class="comment">// Placed inside an inventory that&#39;s already in the main sub.</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                    }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                <span class="comment">// Laying on the ground inside the main sub.</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> == mainSub)</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                <span class="keywordflow">if</span> (owner != <span class="keyword">null</span> &amp;&amp; owner != item)</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    item.<a class="code" href="class_barotrauma_1_1_item.html#a0974e4e4e433da549bae4e2eb500ee9e">Drop</a>(<span class="keyword">null</span>);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                item.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> = mainSub;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                <a class="code" href="class_barotrauma_1_1_item.html">Item</a> newContainer = mainSub.FindContainerFor(item, onlyPrimary: <span class="keyword">false</span>);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                <span class="keywordflow">if</span> (newContainer == <span class="keyword">null</span> || !newContainer.<a class="code" href="class_barotrauma_1_1_item.html#a0ad6a95eae5e7020973b9c6ed1a10e01">OwnInventory</a>.<a class="code" href="class_barotrauma_1_1_item_inventory.html#a03187469e4717755b080ce2a8624cad9">TryPutItem</a>(item, user: <span class="keyword">null</span>))</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    <a class="code" href="class_barotrauma_1_1_way_point.html">WayPoint</a> wp = <a class="code" href="class_barotrauma_1_1_way_point.html">WayPoint</a>.<a class="code" href="class_barotrauma_1_1_way_point.html#a70dda7b2c14b5ddae09a8bf52e14cc61">GetRandom</a>(<a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Cargo, <span class="keyword">null</span>, mainSub) ?? <a class="code" href="class_barotrauma_1_1_way_point.html">WayPoint</a>.<a class="code" href="class_barotrauma_1_1_way_point.html#a70dda7b2c14b5ddae09a8bf52e14cc61">GetRandom</a>(<a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">SpawnType</a>.Path, <span class="keyword">null</span>, mainSub);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                    <span class="keywordflow">if</span> (wp != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                        item.<a class="code" href="class_barotrauma_1_1_item.html#a49699af85870244611e577ee5ecaaea9">SetTransform</a>(wp.<a class="code" href="class_barotrauma_1_1_map_entity.html#af5976c06cfb77b17cd2e21321b846bf5">SimPosition</a>, 0.0f, findNewHull: <span class="keyword">false</span>, setPrevTransform: <span class="keyword">false</span>);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                    }</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                    {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                        DebugConsole.AddWarning($<span class="stringliteral">&quot;Failed to relocate item {item.Prefab.Identifier} ({item.ID}), because no cargo spawn point could be found!&quot;</span>);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                    }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                itemsToRelocate.Remove(item);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                DebugConsole.Log($<span class="stringliteral">&quot;Relocated item {item.Prefab.Identifier} ({item.ID}) back to the main sub.&quot;</span>);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="keyword">private</span> <span class="keyword">enum</span> FindItemState</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <a class="code" href="namespace_barotrauma.html#aef76a325b5e9f39651c25ed7eff8f372a6adf97f83acf6453d4a6a4b1070f3754">None</a>,</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            DivingSuit,</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            DivingMask,</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            OtherItem</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keyword">private</span> FindItemState findItemState;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> itemIndex;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00936"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#aacaf643e5223e15dc7d9f521a1dfdcef">  936</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aacaf643e5223e15dc7d9f521a1dfdcef">FindSuitableContainer</a>(<a class="code" href="class_barotrauma_1_1_item.html">Item</a> containableItem, out <a class="code" href="class_barotrauma_1_1_item.html">Item</a> suitableContainer) =&gt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aacaf643e5223e15dc7d9f521a1dfdcef">FindSuitableContainer</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, containableItem, <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a71bf6b439bb0983676e403e50aa16582">IgnoredItems</a>, ref itemIndex, out suitableContainer);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a5a58c6ae24d47ab1790489f1e4164e4a">  938</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a5a58c6ae24d47ab1790489f1e4164e4a">FindSuitableContainer</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, <a class="code" href="class_barotrauma_1_1_item.html">Item</a> containableItem, List&lt;Item&gt; ignoredItems, ref <span class="keywordtype">int</span> itemIndex, out <a class="code" href="class_barotrauma_1_1_item.html">Item</a> suitableContainer)</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            suitableContainer = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <span class="keywordflow">if</span> (character.<a class="code" href="class_barotrauma_1_1_character.html#ab230957fa4e993452bac76072f46d7f4">FindItem</a>(ref itemIndex, out <a class="code" href="class_barotrauma_1_1_item.html">Item</a> targetContainer, ignoredItems: ignoredItems, positionalReference: containableItem, customPriorityFunction: i =&gt;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                if (!i.HasAccess(character)) { return 0; }</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                var container = i.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_container.html">ItemContainer</a>&gt;();</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                if (container == <span class="keyword">null</span>) { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                <span class="keywordflow">if</span> (!container.Inventory.CanBePut(containableItem)) { return 0; }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                var rootContainer = container.<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_component.html#a01a0f6be5502a91a956080502cd65f46">Item</a>.<a class="code" href="class_barotrauma_1_1_item.html#aeb79548f68eece867df33771dbc21d3a">RootContainer</a> ?? container.<a class="code" href="class_barotrauma_1_1_item.html#aca9ef98dee6df2d1817c24f2caeb01ed">Item</a>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                if (rootContainer.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_fabricator.html">Fabricator</a>&gt;() != <span class="keyword">null</span> || rootContainer.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_deconstructor.html">Deconstructor</a>&gt;() != <span class="keyword">null</span>) { return 0; }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                if (container.ShouldBeContained(containableItem, out <span class="keywordtype">bool</span> isRestrictionsDefined))</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                    if (isRestrictionsDefined)</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                    {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                        return 10;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                    }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                    {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                        if (containableItem.IsContainerPreferred(container, out bool isPreferencesDefined, out bool isSecondary))</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                        {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                            return isPreferencesDefined ? isSecondary ? 2 : 5 : 1;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                        }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                        {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                            if (isPreferencesDefined)</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                            {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                                <span class="comment">// Use any valid locker as a fall back container.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                                return container.Item.HasTag(Tags.FallbackLocker) ? 0.5f : 0;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                            }</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                        }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                    }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            }))</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                <span class="keywordflow">if</span> (targetContainer != <span class="keyword">null</span> &amp;&amp;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                    character.AIController is HumanAIController humanAI &amp;&amp; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                    humanAI.PathSteering.PathFinder.FindPath(character.SimPosition, targetContainer.SimPosition, character.Submarine, errorMsgStr: $<span class="stringliteral">&quot;FindSuitableContainer ({character.DisplayName})&quot;</span>, nodeFilter: node =&gt; node.Waypoint.CurrentHull != <span class="keyword">null</span>).Unreachable)</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                    ignoredItems.Add(targetContainer);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                    itemIndex = 0;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                    suitableContainer = targetContainer;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> draggedTimer;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> refuseDraggingTimer;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">float</span> RefuseDraggingThresholdHigh = 10.0f;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">float</span> RefuseDraggingThresholdLow = 0.5f;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keyword">private</span> <span class="keyword">const</span> <span class="keywordtype">float</span> RefuseDraggingDuration = 30.0f;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> UpdateDragged(<span class="keywordtype">float</span> deltaTime)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.HumanPrefab is { AllowDraggingIndefinitely: true }) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsEscorted) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.LockHands) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="comment">//don&#39;t allow player characters who aren&#39;t in the same team to drag us for more than x seconds</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.SelectedBy == <span class="keyword">null</span> || </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                !<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.SelectedBy.IsPlayer || </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.SelectedBy.TeamID == <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.TeamID) </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                refuseDraggingTimer -= deltaTime;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                <span class="keywordflow">return</span>; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            draggedTimer += deltaTime;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            <span class="keywordflow">if</span> (draggedTimer &gt; RefuseDraggingThresholdHigh || </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                (refuseDraggingTimer &gt; 0.0f &amp;&amp; draggedTimer &gt; RefuseDraggingThresholdLow))</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                draggedTimer = 0.0f;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                refuseDraggingTimer = RefuseDraggingDuration;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.SelectedBy.DeselectCharacter(); </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Speak(TextManager.Get(<span class="stringliteral">&quot;dialogrefusedragging&quot;</span>).Value, delay: 0.5f, identifier: <span class="stringliteral">&quot;refusedragging&quot;</span>.ToIdentifier(), minDurationBetweenSimilar: 5.0f);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a380f751ddbdeab78a76fef55ee436c63"> 1033</a></span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a380f751ddbdeab78a76fef55ee436c63">ReportProblems</a>()</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <a class="code" href="class_barotrauma_1_1_order.html">Order</a> newOrder = <span class="keyword">null</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> targetHull = <span class="keyword">null</span>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <span class="comment">// for now, escorted characters use the report system to get targets but do not speak. escort-character specific dialogue could be implemented</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            <span class="keywordtype">bool</span> speak = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ab49bd629ad01839bb47b5c027cb2b2d1">SpeechImpediment</a> &lt; 100 &amp;&amp; !<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a3e4c9e2c0f46913359ec3d8abdf87676">IsEscorted</a>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a> != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                <span class="keywordtype">bool</span> isFighting = ObjectiveManager.HasActiveObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>&gt;();</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                <span class="keywordtype">bool</span> isFleeing = ObjectiveManager.HasActiveObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_find_safety.html">AIObjectiveFindSafety</a>&gt;();</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <span class="keywordflow">foreach</span> (var hull <span class="keywordflow">in</span> VisibleHulls)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                    <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> target <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                    {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                        <span class="keywordflow">if</span> (target.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a> != hull || !target.<a class="code" href="class_barotrauma_1_1_character.html#add485e2d123826c39b50b026760e9729">Enabled</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_fight_intruders.html">AIObjectiveFightIntruders</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_fight_intruders.html#a1eec88063836a31a2d7081fd14e29482">IsValidTarget</a>(target, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>, <span class="keyword">false</span>))</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                        {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                            <span class="keywordflow">if</span> (!target.<a class="code" href="class_barotrauma_1_1_character.html#acadf1fb3fcb249b42306430436c28ae9">IsHandcuffed</a> &amp;&amp; AddTargets&lt;AIObjectiveFightIntruders, Character&gt;(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, target) &amp;&amp; newOrder == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                            {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                                var orderPrefab = <a class="code" href="class_barotrauma_1_1_order_prefab.html">OrderPrefab</a>.<a class="code" href="class_barotrauma_1_1_order_prefab.html#a786aabbf73f4f610e7d7d7e9ab62f79e">Prefabs</a>[<span class="stringliteral">&quot;reportintruders&quot;</span>];</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                                newOrder = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_order.html">Order</a>(orderPrefab, hull, <span class="keyword">null</span>, orderGiver: <a class="code" href="class_barotrauma_1_1_character.html">Character</a>);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                                targetHull = hull;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                                <span class="keywordflow">if</span> (target.<a class="code" href="class_barotrauma_1_1_character.html#a3e4c9e2c0f46913359ec3d8abdf87676">IsEscorted</a>)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                                {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                                    <span class="keywordflow">if</span> (!<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ac7aef7e70b2ae21f5cbd93089e19fadd">IsPrisoner</a> &amp;&amp; target.<a class="code" href="class_barotrauma_1_1_character.html#ac7aef7e70b2ae21f5cbd93089e19fadd">IsPrisoner</a>)</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                                    {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                                        <a class="code" href="class_barotrauma_1_1_localized_string.html">LocalizedString</a> msg = TextManager.GetWithVariables(<span class="stringliteral">&quot;orderdialog.prisonerescaped&quot;</span>, (<span class="stringliteral">&quot;[roomname]&quot;</span>, targetHull.<a class="code" href="class_barotrauma_1_1_hull.html#a19850254a0fb70f9a05ff794d839f3a5">DisplayName</a>, <a class="code" href="namespace_barotrauma.html#a2e5767ecf95f96c05f8ce00aac50dd53">FormatCapitals</a>.No));</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                                        <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a19df1c40269490e19f9a66358959d8ba">Speak</a>(msg.<a class="code" href="class_barotrauma_1_1_localized_string.html#a1d49a0b0daba172e0f369a9d23cae293">Value</a>, <a class="code" href="namespace_barotrauma_1_1_networking.html#add3372db2e3cffdc066c7a035266a7b2">ChatMessageType</a>.Order);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                                        speak = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                                    }</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!IsMentallyUnstable &amp;&amp; target.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a>.<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a45f2e3e9b9e5f1dad2eecedd77c4afcc">IsMentallyUnstable</a>)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                                    {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                                        <a class="code" href="class_barotrauma_1_1_localized_string.html">LocalizedString</a> msg = TextManager.GetWithVariables(<span class="stringliteral">&quot;orderdialog.mentalcase&quot;</span>, (<span class="stringliteral">&quot;[roomname]&quot;</span>, targetHull.<a class="code" href="class_barotrauma_1_1_hull.html#a19850254a0fb70f9a05ff794d839f3a5">DisplayName</a>, <a class="code" href="namespace_barotrauma.html#a2e5767ecf95f96c05f8ce00aac50dd53">FormatCapitals</a>.No));</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                                        <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a19df1c40269490e19f9a66358959d8ba">Speak</a>(msg.<a class="code" href="class_barotrauma_1_1_localized_string.html#a1d49a0b0daba172e0f369a9d23cae293">Value</a>, <a class="code" href="namespace_barotrauma_1_1_networking.html#add3372db2e3cffdc066c7a035266a7b2">ChatMessageType</a>.Order);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                                        speak = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                                    }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                                }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                            }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                        }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                    }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_extinguish_fires.html">AIObjectiveExtinguishFires</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_extinguish_fires.html#a1eebf2446f589bd3e7f546db229071e4">IsValidTarget</a>(hull, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>))</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                    {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                        <span class="keywordflow">if</span> (AddTargets&lt;AIObjectiveExtinguishFires, Hull&gt;(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, hull) &amp;&amp; newOrder == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                        {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                            var orderPrefab = <a class="code" href="class_barotrauma_1_1_order_prefab.html">OrderPrefab</a>.<a class="code" href="class_barotrauma_1_1_order_prefab.html#a786aabbf73f4f610e7d7d7e9ab62f79e">Prefabs</a>[<span class="stringliteral">&quot;reportfire&quot;</span>];</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                            newOrder = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_order.html">Order</a>(orderPrefab, hull, <span class="keyword">null</span>, orderGiver: <a class="code" href="class_barotrauma_1_1_character.html">Character</a>);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                            targetHull = hull;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                        }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                    }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                    <span class="keywordflow">if</span> (IsBallastFloraNoticeable(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, hull) &amp;&amp; newOrder == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                    {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                        var orderPrefab = <a class="code" href="class_barotrauma_1_1_order_prefab.html">OrderPrefab</a>.<a class="code" href="class_barotrauma_1_1_order_prefab.html#a786aabbf73f4f610e7d7d7e9ab62f79e">Prefabs</a>[<span class="stringliteral">&quot;reportballastflora&quot;</span>];</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                        newOrder = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_order.html">Order</a>(orderPrefab, hull, <span class="keyword">null</span>, orderGiver: <a class="code" href="class_barotrauma_1_1_character.html">Character</a>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                        targetHull = hull;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                    <span class="keywordflow">if</span> (!isFighting)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                        <span class="keywordflow">foreach</span> (var gap <span class="keywordflow">in</span> hull.ConnectedGaps)</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                        {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_fix_leaks.html">AIObjectiveFixLeaks</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_fix_leaks.html#ac75490422a60c746eaafdc9d37a6757a">IsValidTarget</a>(gap, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>))</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                            {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                                <span class="keywordflow">if</span> (AddTargets&lt;AIObjectiveFixLeaks, Gap&gt;(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, gap) &amp;&amp; newOrder == <span class="keyword">null</span> &amp;&amp; !gap.IsRoomToRoom)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                                    var orderPrefab = <a class="code" href="class_barotrauma_1_1_order_prefab.html">OrderPrefab</a>.<a class="code" href="class_barotrauma_1_1_order_prefab.html#a786aabbf73f4f610e7d7d7e9ab62f79e">Prefabs</a>[<span class="stringliteral">&quot;reportbreach&quot;</span>];</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                                    newOrder = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_order.html">Order</a>(orderPrefab, hull, <span class="keyword">null</span>, orderGiver: <a class="code" href="class_barotrauma_1_1_character.html">Character</a>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                                    targetHull = hull;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                                }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                            }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                        }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                        <span class="keywordflow">if</span> (!isFleeing)</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                        {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                            <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> target <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                            {</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                                <span class="keywordflow">if</span> (target.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a> != hull) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_rescue_all.html">AIObjectiveRescueAll</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_rescue_all.html#ae34da4c707a0fda52091d7c99efb179a">IsValidTarget</a>(target, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>, out _))</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                                {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                                    <span class="keywordflow">if</span> (AddTargets&lt;AIObjectiveRescueAll, Character&gt;(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, target) &amp;&amp; newOrder == <span class="keyword">null</span> &amp;&amp; (!<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a45cdc7d0adb6bb86549feab66417e59f">IsMedic</a> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a> == target) &amp;&amp; !ObjectiveManager.HasActiveObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_rescue.html">AIObjectiveRescue</a>&gt;())</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                                    {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                                        var orderPrefab = <a class="code" href="class_barotrauma_1_1_order_prefab.html">OrderPrefab</a>.<a class="code" href="class_barotrauma_1_1_order_prefab.html#a786aabbf73f4f610e7d7d7e9ab62f79e">Prefabs</a>[<span class="stringliteral">&quot;requestfirstaid&quot;</span>];</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                                        newOrder = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_order.html">Order</a>(orderPrefab, hull, <span class="keyword">null</span>, orderGiver: <a class="code" href="class_barotrauma_1_1_character.html">Character</a>);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                                        targetHull = hull;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                                    }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                                }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                            }                            </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                            <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_item.html">Item</a> item <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_item.html">Item</a>.<a class="code" href="class_barotrauma_1_1_item.html#a95b787ce0509a3cd991a3fc5cc6eca17">RepairableItems</a>)</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                            {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                                <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_item.html#a3af1b8ac75aa29cd1cfe1845b946b847">CurrentHull</a> != hull) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_repair_items.html">AIObjectiveRepairItems</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_repair_items.html#a6b2173b79cf4b05214c985a60aaed0f9">IsValidTarget</a>(item, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>))</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                                {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                                    <span class="keywordflow">if</span> (!item.<a class="code" href="class_barotrauma_1_1_item.html#a42c7b082301409385365c7bbf8852721">Repairables</a>.Any(r =&gt; r.IsBelowRepairIconThreshold)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                                    <span class="keywordflow">if</span> (AddTargets&lt;AIObjectiveRepairItems, Item&gt;(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, item) &amp;&amp; newOrder == <span class="keyword">null</span> &amp;&amp; !ObjectiveManager.HasActiveObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_repair_item.html">AIObjectiveRepairItem</a>&gt;())</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                                    {</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                                        var orderPrefab = <a class="code" href="class_barotrauma_1_1_order_prefab.html">OrderPrefab</a>.<a class="code" href="class_barotrauma_1_1_order_prefab.html#a786aabbf73f4f610e7d7d7e9ab62f79e">Prefabs</a>[<span class="stringliteral">&quot;reportbrokendevices&quot;</span>];</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                                        newOrder = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_order.html">Order</a>(orderPrefab, hull, item.<a class="code" href="class_barotrauma_1_1_item.html#a42c7b082301409385365c7bbf8852721">Repairables</a>?.FirstOrDefault(), orderGiver: <a class="code" href="class_barotrauma_1_1_character.html">Character</a>);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                                        targetHull = hull;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                                    }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                                }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                            }</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                        }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                    }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            }</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <span class="keywordflow">if</span> (newOrder != <span class="keyword">null</span> &amp;&amp; speak)</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.FriendlyNPC)</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                    <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a19df1c40269490e19f9a66358959d8ba">Speak</a>(newOrder.<a class="code" href="class_barotrauma_1_1_order.html#a1aa89e24c621eaac2118fcacfba21b59">GetChatMessage</a>(<span class="stringliteral">&quot;&quot;</span>, targetHull?.<a class="code" href="class_barotrauma_1_1_hull.html#a19850254a0fb70f9a05ff794d839f3a5">DisplayName</a>?.<a class="code" href="class_barotrauma_1_1_localized_string.html#a1d49a0b0daba172e0f369a9d23cae293">Value</a> ?? <span class="stringliteral">&quot;&quot;</span>, givingOrderToSelf: <span class="keyword">false</span>), <a class="code" href="namespace_barotrauma_1_1_networking.html#add3372db2e3cffdc066c7a035266a7b2">ChatMessageType</a>.Default,</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                        identifier: $<span class="stringliteral">&quot;{newOrder.Prefab.Identifier}{targetHull?.RoomName ?? &quot;</span><span class="keyword">null</span><span class="stringliteral">&quot;}&quot;</span>.ToIdentifier(),</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                        minDurationBetweenSimilar: 60.0f);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                }</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a57ac902c41166b491d8ea350ada1c21e">IsOnPlayerTeam</a> &amp;&amp; <a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">GameSession</a>?.<a class="code" href="class_barotrauma_1_1_game_session.html#ae904be5ebcdede3d01c6b95a0f5d9250">CrewManager</a> != <span class="keyword">null</span> &amp;&amp; <a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">GameSession</a>.<a class="code" href="class_barotrauma_1_1_game_session.html#ae904be5ebcdede3d01c6b95a0f5d9250">CrewManager</a>.<a class="code" href="class_barotrauma_1_1_crew_manager.html#a810c9eb12253d9281fceb4c355051e60">AddOrder</a>(newOrder, newOrder.<a class="code" href="class_barotrauma_1_1_order.html#a47c753484ae184f85d0f741267c363b9">FadeOutTime</a>))</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                    <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a19df1c40269490e19f9a66358959d8ba">Speak</a>(newOrder.<a class="code" href="class_barotrauma_1_1_order.html#a1aa89e24c621eaac2118fcacfba21b59">GetChatMessage</a>(<span class="stringliteral">&quot;&quot;</span>, targetHull?.<a class="code" href="class_barotrauma_1_1_hull.html#a19850254a0fb70f9a05ff794d839f3a5">DisplayName</a>?.<a class="code" href="class_barotrauma_1_1_localized_string.html#a1d49a0b0daba172e0f369a9d23cae293">Value</a> ?? <span class="stringliteral">&quot;&quot;</span>, givingOrderToSelf: <span class="keyword">false</span>), <a class="code" href="namespace_barotrauma_1_1_networking.html#add3372db2e3cffdc066c7a035266a7b2">ChatMessageType</a>.Order);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="preprocessor">#if SERVER</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                    <a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#a7e0ad5e70cd26d542a6f6004f54d4d48">Server</a>.<a class="code" href="class_barotrauma_1_1_networking_1_1_game_server.html#a21530a39b7bb72e2855afb61d41ff9c5">SendOrderChatMessage</a>(<span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_networking_1_1_order_chat_message.html">OrderChatMessage</a>(newOrder</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                        .WithManualPriority(<a class="code" href="class_barotrauma_1_1_character_info.html">CharacterInfo</a>.<a class="code" href="class_barotrauma_1_1_character_info.html#a54d5c6e9ae57f25dd162e823bc26bdd4">HighestManualOrderPriority</a>)</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                        .<a class="code" href="class_barotrauma_1_1_order.html#a82c49476e032da234e238c17614484ca">WithTargetEntity</a>(targetHull)</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                        .<a class="code" href="class_barotrauma_1_1_order.html#afd9fcb4c025809bbb8ad1c5b67b55ffe">WithOrderGiver</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>), <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">null</span>, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>));</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#aacded103df9a9932315afd077bac82b8"> 1157</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aacded103df9a9932315afd077bac82b8">IsBallastFloraNoticeable</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, <a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> hull)</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            <span class="keywordflow">foreach</span> (var ballastFlora <span class="keywordflow">in</span> MapCreatures.Behavior.BallastFloraBehavior.EntityList)</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                <span class="keywordflow">if</span> (ballastFlora.Parent?.Submarine != character.Submarine) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                <span class="keywordflow">if</span> (!ballastFlora.HasBrokenThrough) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                <span class="comment">// Don&#39;t react to the first two branches, because they are usually in the very edges of the room.</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                <span class="keywordflow">if</span> (ballastFlora.Branches.Count(b =&gt; !b.Removed &amp;&amp; b.Health &gt; 0 &amp;&amp; b.CurrentHull == hull) &gt; 2)</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#ac28409294a53f30fc0d9dece975a6ad6"> 1172</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ac28409294a53f30fc0d9dece975a6ad6">ReportProblem</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> reporter, <a class="code" href="class_barotrauma_1_1_order.html">Order</a> order, <a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> targetHull = <span class="keyword">null</span>)</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            <span class="keywordflow">if</span> (reporter == <span class="keyword">null</span> || order == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            var visibleHulls = targetHull is <span class="keyword">null</span> ? <span class="keyword">new</span> List&lt;Hull&gt;(reporter.<a class="code" href="class_barotrauma_1_1_character.html#ae82edf3be0ca56e91594222df9f395cc">GetVisibleHulls</a>()) : <span class="keyword">new</span> List&lt;Hull&gt; { targetHull };</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;            <span class="keywordflow">foreach</span> (var hull <span class="keywordflow">in</span> visibleHulls)</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                PropagateHullSafety(reporter, hull);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                RefreshTargets(reporter, order, hull);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> SpeakAboutIssues()</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a57ac902c41166b491d8ea350ada1c21e">IsOnPlayerTeam</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <span class="keywordflow">if</span> (Character.SpeechImpediment &gt;= 100) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            <span class="keywordtype">float</span> minDelay = 0.5f, maxDelay = 2f;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Oxygen &lt; CharacterHealth.InsufficientOxygenThreshold)</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                <span class="keywordtype">string</span> msgId = <span class="stringliteral">&quot;DialogLowOxygen&quot;</span>;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Speak(TextManager.Get(msgId).Value, delay: Rand.Range(minDelay, maxDelay), identifier: msgId.ToIdentifier(), minDurationBetweenSimilar: 30.0f);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Bleeding &gt; AfflictionPrefab.Bleeding.TreatmentThreshold &amp;&amp; !<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsMedic)</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            {</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                <span class="keywordtype">string</span> msgId = <span class="stringliteral">&quot;DialogBleeding&quot;</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Speak(TextManager.Get(msgId).Value, delay: Rand.Range(minDelay, maxDelay), identifier: msgId.ToIdentifier(), minDurationBetweenSimilar: 30.0f);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CurrentHull == <span class="keyword">null</span> || <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CurrentHull.LethalPressure &gt; 0) &amp;&amp; !<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsProtectedFromPressure)</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.PressureProtection &gt; 0)</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                    <span class="keywordtype">string</span> msgId = <span class="stringliteral">&quot;DialogInsufficientPressureProtection&quot;</span>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Speak(TextManager.Get(msgId).Value, delay: Rand.Range(minDelay, maxDelay), identifier: msgId.ToIdentifier(), minDurationBetweenSimilar: 30.0f);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                }</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CurrentHull?.DisplayName != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                    <span class="keywordtype">string</span> msgId = <span class="stringliteral">&quot;DialogPressure&quot;</span>;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Speak(TextManager.GetWithVariable(msgId, <span class="stringliteral">&quot;[roomname]&quot;</span>, <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CurrentHull.DisplayName, <a class="code" href="namespace_barotrauma.html#a2e5767ecf95f96c05f8ce00aac50dd53">FormatCapitals</a>.Yes).Value, delay: Rand.Range(minDelay, maxDelay), identifier: msgId.ToIdentifier(), minDurationBetweenSimilar: 30.0f);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a6464547fe0ec74212f6d4e4dc47987df"> 1213</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a6464547fe0ec74212f6d4e4dc47987df">OnHealed</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> healer, <span class="keywordtype">float</span> healAmount)</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            <span class="keywordflow">if</span> (healer == <span class="keyword">null</span> || healAmount &lt;= 0.0f) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            <span class="keywordflow">if</span> (previousHealAmounts.ContainsKey(healer))</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                previousHealAmounts[healer] += healAmount;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                previousHealAmounts.Add(healer, healAmount);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        }</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a67c13416af7f6a66d8478b48af9c1996"> 1226</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a67c13416af7f6a66d8478b48af9c1996">OnAttacked</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> attacker, <a class="code" href="struct_barotrauma_1_1_attack_result.html">AttackResult</a> attackResult)</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="comment">// The attack incapacitated/killed the character: respond immediately to trigger nearby characters because the update loop no longer runs</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <span class="keywordflow">if</span> (wasConscious &amp;&amp; (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a487d54c21be19303d5428430484c0c08">IsIncapacitated</a> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ac1491dd52cac3c2472d645399740f835">Stun</a> &gt; 0.0f))</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                RespondToAttack(attacker, attackResult);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                wasConscious = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a26a02dfc53db3a5013e4ad35ed723761">IsDead</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            <span class="keywordflow">if</span> (attacker == <span class="keyword">null</span> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a8cb4d866ecd26b0e53ba34c334e5c6fb">IsPlayer</a>)</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            {</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                <span class="comment">// The player characters need to &quot;respond&quot; to the attack always, because the update loop doesn&#39;t run for them.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                <span class="comment">// Otherwise other NPCs totally ignore when player characters are attacked.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                RespondToAttack(attacker, attackResult);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            }</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <span class="keywordflow">if</span> (previousAttackResults.ContainsKey(attacker))</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                <span class="keywordflow">if</span> (attackResult.<a class="code" href="struct_barotrauma_1_1_attack_result.html#a9b01fdce673c1026fa3a6e1102031bdb">Afflictions</a> != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                    <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_affliction.html">Affliction</a> newAffliction <span class="keywordflow">in</span> attackResult.<a class="code" href="struct_barotrauma_1_1_attack_result.html#a9b01fdce673c1026fa3a6e1102031bdb">Afflictions</a>)</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                    {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                        var matchingAffliction = previousAttackResults[attacker].Afflictions.Find(a =&gt; a.Prefab == newAffliction.<a class="code" href="class_barotrauma_1_1_affliction.html#ad6b79239edf62a94d9047b86937588eb">Prefab</a> &amp;&amp; a.Source == newAffliction.<a class="code" href="class_barotrauma_1_1_affliction.html#aca086b51e4a33b72c5bd683f3c27af84">Source</a>);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                        <span class="keywordflow">if</span> (matchingAffliction == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                        {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                            previousAttackResults[attacker].Afflictions.Add(newAffliction);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                        }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                        {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                            matchingAffliction.Strength += newAffliction.<a class="code" href="class_barotrauma_1_1_affliction.html#a7e4bf2483798bb0dab9858c2488a7603">Strength</a>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                        }</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                    }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                previousAttackResults[attacker] = <span class="keyword">new</span> <a class="code" href="struct_barotrauma_1_1_attack_result.html">AttackResult</a>(previousAttackResults[attacker].Afflictions, previousAttackResults[attacker].HitLimb);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            }</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                previousAttackResults.Add(attacker, attackResult);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> RespondToAttack(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> attacker, <a class="code" href="struct_barotrauma_1_1_attack_result.html">AttackResult</a> attackResult)</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            <span class="keywordtype">float</span> healAmount = 0.0f;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            <span class="keywordflow">if</span> (attacker != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                previousHealAmounts.TryGetValue(attacker, out healAmount);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            <span class="comment">// excluding poisons etc</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            <span class="keywordtype">float</span> realDamage = attackResult.<a class="code" href="struct_barotrauma_1_1_attack_result.html#a16f39a4eedae3d43050801e4d3c0e277">Damage</a> - healAmount;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            <span class="comment">// including poisons etc</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <span class="keywordtype">float</span> totalDamage = realDamage;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="keywordflow">if</span> (attackResult.<a class="code" href="struct_barotrauma_1_1_attack_result.html#a9b01fdce673c1026fa3a6e1102031bdb">Afflictions</a> != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                <span class="keywordflow">foreach</span> (Affliction affliction <span class="keywordflow">in</span> attackResult.<a class="code" href="struct_barotrauma_1_1_attack_result.html#a9b01fdce673c1026fa3a6e1102031bdb">Afflictions</a>)</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                {</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                    totalDamage -= affliction.Prefab.KarmaChangeOnApplied * affliction.Strength;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            }</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="keywordflow">if</span> (totalDamage &lt;= 0.01f) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsBot)</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                <span class="keywordflow">if</span> (!freezeAI &amp;&amp; !<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsDead &amp;&amp; <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsIncapacitated)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                    <span class="comment">// Removes the combat objective and resets all objectives.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                    objectiveManager.CreateAutonomousObjectives();</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                    objectiveManager.SortObjectives();</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    freezeAI = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            <span class="keywordflow">if</span> (attacker == <span class="keyword">null</span> || attacker.<a class="code" href="class_barotrauma_1_1_character.html#a30694e56c154f2b41c785018b68b7266">IsUnconscious</a> || attacker.<a class="code" href="class_barotrauma_1_1_entity.html#ae40bdfaee2d22e0e2f3bf44bf006964e">Removed</a>)</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                <span class="comment">// Don&#39;t react to the damage if there&#39;s no attacker.</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                <span class="comment">// We might consider launching the retreat combat objective in some cases, so that the bot does not just stand somewhere getting damaged and dying.</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                <span class="comment">// But fires and enemies should already be handled by the FindSafetyObjective.</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                <span class="comment">// Ignore damage from falling etc that we shouldn&#39;t react to.</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                <span class="comment">//if (Character.LastDamageSource == null) { return; }</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                <span class="comment">//AddCombatObjective(AIObjectiveCombat.CombatMode.Retreat, Rand.Range(0.5f, 1f, Rand.RandSync.Unsynced));</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            }</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            <span class="keywordtype">bool</span> sameTeam =</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                attacker.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.TeamID ||</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                <span class="comment">// consider escorted characters to be in the same team (otherwise accidental damage or side-effects from healing trigger them too easily)</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                (attacker.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.Team1 &amp;&amp; <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsEscorted);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="keywordflow">if</span> (realDamage &lt;= 0 &amp;&amp; (attacker.<a class="code" href="class_barotrauma_1_1_character.html#a0fd9d623e6928a96ce6f006e35c93cc4">IsBot</a> || sameTeam))</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                <span class="comment">// Don&#39;t react to damage that is entirely based on karma penalties (medics, poisons etc), unless applier is player</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            <span class="keywordflow">if</span> (attacker.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> == <span class="keyword">null</span> &amp;&amp; <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Submarine != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                <span class="comment">// Don&#39;t react to attackers that are outside of the sub (e.g. AoE attacks)</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="keywordtype">bool</span> isAttackerInfected = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;            <span class="keywordtype">bool</span> isAttackerFightingEnemy = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            <span class="keywordtype">float</span> minorDamageThreshold = 5;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            <span class="keywordtype">float</span> majorDamageThreshold = 20;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            <span class="keywordflow">if</span> (sameTeam &amp;&amp; !attacker.<a class="code" href="class_barotrauma_1_1_character.html#aaec2cf54fa685ea7b02f0915e9341dd2">IsInstigator</a>)</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                minorDamageThreshold = 10;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                majorDamageThreshold = 40;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            <span class="keywordtype">bool</span> eitherIsMentallyUnstable = IsMentallyUnstable || attacker.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> is { IsMentallyUnstable: <span class="keyword">true</span> };</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;            <span class="keywordflow">if</span> (IsFriendly(attacker))</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            {</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                <span class="keywordflow">if</span> (attacker.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_anim_controller.html#a9aa56d4a495ec2cc1dd7938c598d5d91">Anim</a> == <a class="code" href="namespace_barotrauma.html">Barotrauma</a>.<a class="code" href="class_barotrauma_1_1_anim_controller.html">AnimController</a>.<a class="code" href="class_barotrauma_1_1_anim_controller.html#acfc43e94b828505854f92ff70d43555b">Animation</a>.CPR &amp;&amp; attacker.<a class="code" href="class_barotrauma_1_1_character.html#a23d72228ad07e32c85a61b866afa6e9c">SelectedCharacter</a> == Character)</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                    <span class="comment">// Don&#39;t attack characters that damage you while doing cpr, because let&#39;s assume that they are helping you.</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                    <span class="comment">// Should not cancel any existing ai objectives (so that if the character attacked you and then helped, we still would want to retaliate).</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                }</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                <span class="keywordtype">float</span> cumulativeDamage = realDamage + <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.GetDamageDoneByAttacker(attacker);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                <span class="keywordtype">bool</span> isAccidental = attacker.<a class="code" href="class_barotrauma_1_1_character.html#a0fd9d623e6928a96ce6f006e35c93cc4">IsBot</a> &amp;&amp; !eitherIsMentallyUnstable &amp;&amp; attacker.<a class="code" href="class_barotrauma_1_1_character.html#af1becc98ef30de0b3d2e2369402b2e37">CombatAction</a> == <span class="keyword">null</span>;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                <span class="keywordflow">if</span> (isAccidental)</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                {</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                    <span class="keywordflow">if</span> (attacker.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> != <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.TeamID || (!<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsSecurity &amp;&amp; cumulativeDamage &gt; minorDamageThreshold))</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                    {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                        AddCombatObjective(AIObjectiveCombat.CombatMode.Retreat, attacker);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                    }</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;                {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                    isAttackerInfected = attacker.<a class="code" href="class_barotrauma_1_1_character.html#a1f73838e3be52986df173800be90967c">CharacterHealth</a>.<a class="code" href="class_barotrauma_1_1_character_health.html#ae9c319eb7d1fdcfeb6d51cf0549dc35c">GetAfflictionStrengthByType</a>(AfflictionPrefab.AlienInfectedType) &gt; 0;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                    <span class="comment">// Inform other NPCs</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;                    <span class="keywordflow">if</span> (isAttackerInfected || cumulativeDamage &gt; minorDamageThreshold || totalDamage &gt; minorDamageThreshold)</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                    {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                        <span class="keywordflow">if</span> (GameMain.IsMultiplayer || !attacker.<a class="code" href="class_barotrauma_1_1_character.html#a8cb4d866ecd26b0e53ba34c334e5c6fb">IsPlayer</a> || <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.TeamID != attacker.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>)</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                        {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                            InformOtherNPCs(cumulativeDamage);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                        }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                    }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsBot)</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                    {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                        var combatMode = DetermineCombatMode(Character, cumulativeDamage);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                        <span class="keywordflow">if</span> (attacker.<a class="code" href="class_barotrauma_1_1_character.html#a8cb4d866ecd26b0e53ba34c334e5c6fb">IsPlayer</a> &amp;&amp; !<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsInstigator &amp;&amp; !ObjectiveManager.IsCurrentObjective&lt;AIObjectiveCombat&gt;())</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                        {</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;                            <span class="keywordflow">switch</span> (combatMode)</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                            {</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                                <span class="keywordflow">case</span> AIObjectiveCombat.CombatMode.Defensive:</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                                <span class="keywordflow">case</span> AIObjectiveCombat.CombatMode.Retreat:</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                                    <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsSecurity)</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                                    {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                                        <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Speak(TextManager.Get(<span class="stringliteral">&quot;dialogattackedbyfriendlysecurityresponse&quot;</span>).Value, <span class="keyword">null</span>, 0.5f, <span class="stringliteral">&quot;attackedbyfriendlysecurityresponse&quot;</span>.ToIdentifier(), minDurationBetweenSimilar: 10.0f);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                                    }</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                                    {</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                                        <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Speak(TextManager.Get(<span class="stringliteral">&quot;DialogAttackedByFriendly&quot;</span>).Value, <span class="keyword">null</span>, 0.5f, <span class="stringliteral">&quot;attackedbyfriendly&quot;</span>.ToIdentifier(), minDurationBetweenSimilar: 10.0f);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                                    }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                                <span class="keywordflow">case</span> AIObjectiveCombat.CombatMode.Offensive:</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                                <span class="keywordflow">case</span> AIObjectiveCombat.CombatMode.Arrest:</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Speak(TextManager.Get(<span class="stringliteral">&quot;dialogattackedbyfriendlysecurityarrest&quot;</span>).Value, <span class="keyword">null</span>, 0.5f, <span class="stringliteral">&quot;attackedbyfriendlysecurityarrest&quot;</span>.ToIdentifier(), minDurationBetweenSimilar: 10.0f);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                                <span class="keywordflow">case</span> AIObjectiveCombat.CombatMode.None:</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                                    <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsSecurity &amp;&amp; realDamage &gt; 1)</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                                    {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                                        <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Speak(TextManager.Get(<span class="stringliteral">&quot;dialogattackedbyfriendlysecurityresponse&quot;</span>).Value, <span class="keyword">null</span>, 0.5f, <span class="stringliteral">&quot;attackedbyfriendlysecurityresponse&quot;</span>.ToIdentifier(), minDurationBetweenSimilar: 10.0f);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                                    }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                            }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                        }</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                        <span class="comment">// If the attacker is using a low damage and high frequency weapon like a repair tool, we shouldn&#39;t use any delay.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                        AddCombatObjective(combatMode, attacker, delay: realDamage &gt; 1 ? GetReactionTime() : 0);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                    }</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                    <span class="keywordflow">if</span> (!isAttackerFightingEnemy)</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                    {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                        (GameMain.GameSession?.GameMode as CampaignMode)?.OutpostNPCAttacked(Character, attacker, attackResult);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                    }</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            }</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Submarine != <span class="keyword">null</span> &amp;&amp; <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Submarine.GetConnectedSubs().Contains(attacker.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>))</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                    <span class="comment">// Non-friendly</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                    InformOtherNPCs();</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                }</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsBot)</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                    AddCombatObjective(DetermineCombatMode(Character), attacker);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;            }</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;            <span class="keywordtype">void</span> InformOtherNPCs(<span class="keywordtype">float</span> cumulativeDamage = 0)</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;            {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                <span class="keywordflow">foreach</span> (Character otherCharacter <span class="keywordflow">in</span> <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList)</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                {</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                    <span class="keywordflow">if</span> (otherCharacter == Character || otherCharacter.IsUnconscious || otherCharacter.Removed) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                    <span class="keywordflow">if</span> (otherCharacter.Submarine != <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.Submarine) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                    <span class="keywordflow">if</span> (otherCharacter.Submarine != attacker.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                    <span class="keywordflow">if</span> (otherCharacter.Info?.Job == <span class="keyword">null</span> || otherCharacter.IsInstigator) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                    <span class="keywordflow">if</span> (otherCharacter.IsPlayer) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                    <span class="keywordflow">if</span> (otherCharacter.AIController is not HumanAIController otherHumanAI) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                    <span class="keywordflow">if</span> (!otherHumanAI.IsFriendly(Character)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                    <span class="keywordflow">if</span> (attacker.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> is EnemyAIController enemyAI &amp;&amp; otherHumanAI.IsFriendly(attacker))</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                    {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                        <span class="comment">// Don&#39;t react to friendly enemy AI attacking other characters. E.g. husks attacking someone when whe are a cultist.</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                    }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                    <span class="keywordtype">bool</span> isWitnessing = </div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                        otherHumanAI.VisibleHulls.Contains(<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CurrentHull) || </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                        otherHumanAI.VisibleHulls.Contains(attacker.<a class="code" href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">CurrentHull</a>) ||</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                        otherCharacter.CanSeeTarget(attacker, seeThroughWindows: <span class="keyword">true</span>);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                    <span class="keywordflow">if</span> (!isWitnessing) </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                    { </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                        <span class="comment">//if the other character did not witness the attack, and the character is not within report range (or capable of reporting)</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                        <span class="comment">//don&#39;t react to the attack</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsDead || <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsUnconscious || otherCharacter.TeamID != <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.TeamID || !CheckReportRange(Character, otherCharacter, ReportRange))</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                        {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                        } </div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                    }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                    var combatMode = DetermineCombatMode(otherCharacter, cumulativeDamage, isWitnessing);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                    <span class="keywordtype">float</span> delay = isWitnessing ? GetReactionTime() : Rand.Range(2.0f, 5.0f, Rand.RandSync.Unsynced);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                    otherHumanAI.AddCombatObjective(combatMode, attacker, delay);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            }</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            AIObjectiveCombat.CombatMode DetermineCombatMode(Character c, <span class="keywordtype">float</span> cumulativeDamage = 0, <span class="keywordtype">bool</span> isWitnessing = <span class="keyword">false</span>)</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                <span class="keywordflow">if</span> (c.AIController is not HumanAIController humanAI) { <span class="keywordflow">return</span> AIObjectiveCombat.CombatMode.None; }</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                <span class="keywordflow">if</span> (!IsFriendly(attacker))</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                    <span class="keywordflow">if</span> (c.Submarine == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                    {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                        <span class="comment">// Outside</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                        <span class="keywordflow">return</span> attacker.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> == <span class="keyword">null</span> ? AIObjectiveCombat.CombatMode.Defensive : AIObjectiveCombat.CombatMode.Retreat;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                    }</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                    <span class="keywordflow">if</span> (!c.Submarine.GetConnectedSubs().Contains(attacker.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>))</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                    {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                        <span class="comment">// Attacked from an unconnected submarine (pirate/pvp)</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                        <span class="keywordflow">return</span> </div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                            humanAI.ObjectiveManager.CurrentOrder is AIObjectiveOperateItem operateOrder &amp;&amp; operateOrder.GetTarget() is <a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_controller.html">Controller</a> ? </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                                AIObjectiveCombat.CombatMode.None : AIObjectiveCombat.CombatMode.Retreat;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                    }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                    <span class="keywordflow">if</span> (c.IsKiller)</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                    {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                        <span class="keywordflow">return</span> AIObjectiveCombat.CombatMode.Offensive;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                    }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                    <span class="keywordflow">return</span> humanAI.ObjectiveManager.HasObjectiveOrOrder&lt;AIObjectiveFightIntruders&gt;() ? AIObjectiveCombat.CombatMode.Offensive : AIObjectiveCombat.CombatMode.Defensive;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                }</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                    <span class="keywordflow">if</span> (isAttackerInfected)</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                    {</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                        cumulativeDamage = 100;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                    }</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                    <span class="keywordflow">if</span> (attacker.<a class="code" href="class_barotrauma_1_1_character.html#a8cb4d866ecd26b0e53ba34c334e5c6fb">IsPlayer</a> &amp;&amp; c.TeamID == attacker.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>)</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                    {</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                        <span class="keywordflow">if</span> (GameMain.IsSingleplayer || c.TeamID != attacker.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>)</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                        {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                            <span class="comment">// Bots in the player team never act aggressively in single player when attacked by the player</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                            <span class="comment">// In multiplayer, they react only to players attacking them or other crew members</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> == c &amp;&amp; cumulativeDamage &gt; minorDamageThreshold ? AIObjectiveCombat.CombatMode.Retreat : AIObjectiveCombat.CombatMode.None;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                        }</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                    }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                    <span class="keywordflow">if</span> (c.Submarine == <span class="keyword">null</span> || !c.Submarine.GetConnectedSubs().Contains(attacker.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>))</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                    {</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                        <span class="comment">// Outside or attacked from an unconnected submarine -&gt; don&#39;t react.</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                        <span class="keywordflow">return</span> AIObjectiveCombat.CombatMode.None;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                    }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                    <span class="comment">// If there are any enemies around, just ignore the friendly fire</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.Any(ch =&gt; ch.Submarine == c.Submarine &amp;&amp; !ch.Removed &amp;&amp; !ch.IsIncapacitated &amp;&amp; !IsFriendly(ch) &amp;&amp; VisibleHulls.Contains(ch.CurrentHull)))</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                    {</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                        isAttackerFightingEnemy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                        <span class="keywordflow">return</span> AIObjectiveCombat.CombatMode.None;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                    }</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                    <span class="keywordflow">if</span> (c.IsKiller)</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                    {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                        <span class="keywordflow">return</span> AIObjectiveCombat.CombatMode.Offensive;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                    }</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                    <span class="keywordflow">if</span> (isWitnessing &amp;&amp; c.CombatAction != <span class="keyword">null</span> &amp;&amp; !c.IsSecurity)</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                    {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                        <span class="keywordflow">return</span> c.CombatAction.WitnessReaction;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                    }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                    <span class="keywordflow">if</span> (!attacker.<a class="code" href="class_barotrauma_1_1_character.html#aaec2cf54fa685ea7b02f0915e9341dd2">IsInstigator</a> &amp;&amp; c.IsOnFriendlyTeam(attacker) &amp;&amp; FindInstigator() is Character instigator)</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                    {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                        <span class="comment">// The guards don&#39;t react to player&#39;s aggressions when there&#39;s an instigator around</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                        isAttackerFightingEnemy = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                        <span class="keywordflow">return</span> c.IsSecurity ? AIObjectiveCombat.CombatMode.None : instigator.CombatAction?.WitnessReaction ?? AIObjectiveCombat.CombatMode.Retreat;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                    }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                    <span class="keywordflow">if</span> (attacker.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.FriendlyNPC &amp;&amp; !eitherIsMentallyUnstable)</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                    {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                        <span class="keywordflow">if</span> (c.IsSecurity)</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                        {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                            <span class="keywordflow">return</span> attacker.<a class="code" href="class_barotrauma_1_1_character.html#af1becc98ef30de0b3d2e2369402b2e37">CombatAction</a>?.<a class="code" href="class_barotrauma_1_1_combat_action.html#a6d0c33e1d54f62504480210fa5ac6c3c">GuardReaction</a> ?? AIObjectiveCombat.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a>.Offensive;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                        }</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                        {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                            <span class="keywordflow">return</span> attacker.<a class="code" href="class_barotrauma_1_1_character.html#af1becc98ef30de0b3d2e2369402b2e37">CombatAction</a>?.<a class="code" href="class_barotrauma_1_1_combat_action.html#a0be113328a93fcf17eed713efe1ba8bd">WitnessReaction</a> ?? AIObjectiveCombat.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a>.Retreat;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                        }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                    }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                    {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                        <span class="keywordflow">if</span> (humanAI.ObjectiveManager.GetLastActiveObjective&lt;AIObjectiveCombat&gt;() is AIObjectiveCombat currentCombatObjective &amp;&amp; currentCombatObjective.Enemy == attacker)</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                        {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                            <span class="comment">// Already targeting the attacker -&gt; treat as a more serious threat.</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                            cumulativeDamage *= 2;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                            currentCombatObjective.AllowHoldFire = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                            c.IsCriminal = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                        }</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                        <span class="keywordflow">if</span> (c.IsCriminal)</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                        {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                            <span class="comment">// Always react if the attacker has been misbehaving earlier.</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                            cumulativeDamage = Math.Max(cumulativeDamage, minorDamageThreshold);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                        }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                        <span class="keywordflow">if</span> (cumulativeDamage &gt; majorDamageThreshold)</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                        {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                            c.IsCriminal = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                            <span class="keywordflow">if</span> (c.IsSecurity)</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                            {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                                <span class="keywordflow">return</span> AIObjectiveCombat.CombatMode.Offensive;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                            }</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                            {</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                                <span class="keywordflow">return</span> c == <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> ? AIObjectiveCombat.CombatMode.Defensive : AIObjectiveCombat.CombatMode.Retreat;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                            }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                        }</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cumulativeDamage &gt; minorDamageThreshold)</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                        {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                            <span class="keywordflow">return</span> c.IsSecurity ? AIObjectiveCombat.CombatMode.Arrest : AIObjectiveCombat.CombatMode.Retreat;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                        }</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                        {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                            <span class="keywordflow">return</span> AIObjectiveCombat.CombatMode.None;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                        }</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                    }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160; </div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                    <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> FindInstigator()</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                    {</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.IsInstigator)</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                        {</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                        }</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                        <span class="keywordflow">if</span> (attacker.<a class="code" href="class_barotrauma_1_1_character.html#aaec2cf54fa685ea7b02f0915e9341dd2">IsInstigator</a>)</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                        {</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                            <span class="keywordflow">return</span> attacker;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                        }</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                        <span class="keywordflow">if</span> (c.IsInstigator)</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                        {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                            <span class="keywordflow">return</span> c;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                        }</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                        <span class="keywordflow">if</span> (c.AIController is HumanAIController humanAi)</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                        {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList.FirstOrDefault(ch =&gt; ch.Submarine == c.Submarine &amp;&amp; !ch.Removed &amp;&amp; !ch.IsIncapacitated &amp;&amp; ch.IsInstigator &amp;&amp; humanAi.VisibleHulls.Contains(ch.CurrentHull));</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                        }</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                    }</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            }</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        }</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a98fa54a887cbca4c9bd7cd233a0cabbf"> 1582</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a98fa54a887cbca4c9bd7cd233a0cabbf">AddCombatObjective</a>(<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a> mode, <a class="code" href="class_barotrauma_1_1_character.html">Character</a> target, <span class="keywordtype">float</span> delay = 0, Func&lt;AIObjective, bool&gt; abortCondition = <span class="keyword">null</span>, Action onAbort = <span class="keyword">null</span>, Action onCompleted = <span class="keyword">null</span>, <span class="keywordtype">bool</span> allowHoldFire = <span class="keyword">false</span>, <span class="keywordtype">bool</span> speakWarnings = <span class="keyword">false</span>)</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        {</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            <span class="keywordflow">if</span> (mode == <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a>.None) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a26a02dfc53db3a5013e4ad35ed723761">IsDead</a> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a487d54c21be19303d5428430484c0c08">IsIncapacitated</a> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#ae40bdfaee2d22e0e2f3bf44bf006964e">Removed</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a0fd9d623e6928a96ce6f006e35c93cc4">IsBot</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;            <span class="keywordflow">if</span> (ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a4d7ff8e097e5ec619d1cce72c8ee781c">Objectives</a>.FirstOrDefault(o =&gt; o is <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>) is <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a> combatObjective)</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;            {</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                <span class="comment">// Don&#39;t replace offensive mode with something else</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                <span class="keywordflow">if</span> (combatObjective.Mode == <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a>.Offensive &amp;&amp; mode != <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a>.Offensive) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                <span class="keywordflow">if</span> (combatObjective.Mode != mode || combatObjective.Enemy != target || (combatObjective.Enemy == <span class="keyword">null</span> &amp;&amp; target == <span class="keyword">null</span>))</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                    <span class="comment">// Replace the old objective with the new.</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                    ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a4d7ff8e097e5ec619d1cce72c8ee781c">Objectives</a>.Remove(combatObjective);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                    ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a53da8fca96a45ec370dc0f09cd0db2ad">AddObjective</a>(CreateCombatObjective());</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                }</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;            }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;            {</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                <span class="keywordflow">if</span> (delay &gt; 0)</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                {</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                    ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a53da8fca96a45ec370dc0f09cd0db2ad">AddObjective</a>(CreateCombatObjective(), delay);</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                }</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                    ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a53da8fca96a45ec370dc0f09cd0db2ad">AddObjective</a>(CreateCombatObjective());</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            }</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160; </div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a> CreateCombatObjective()</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            {</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                var objective = <span class="keyword">new</span> <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, target, mode, objectiveManager)</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                {</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                    HoldPosition = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a84ba931e913c568405c043ca7dc69b6f">Info</a>?.<a class="code" href="class_barotrauma_1_1_character_info.html#ad9f0e95ed323cdd313b71fc15963d354">Job</a>?.<a class="code" href="class_barotrauma_1_1_job.html#af4cb0732f2e3b7f6c9832f70415ba14d">Prefab</a>.<a class="code" href="class_barotrauma_1_1_prefab.html#af02707f77b17e23dd22af51e35c45c81">Identifier</a> == <span class="stringliteral">&quot;watchman&quot;</span>,</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                    AbortCondition = abortCondition,</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                    AllowHoldFire = allowHoldFire,</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                    SpeakWarnings = speakWarnings</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                };</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                <span class="keywordflow">if</span> (onAbort != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                    objective.Abandoned += onAbort;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                <span class="keywordflow">if</span> (onCompleted != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                    objective.Completed += onCompleted;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                <span class="keywordflow">return</span> objective;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;            }</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        }</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a485c9bb6f8a10d51d40979491464a9e0"> 1631</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a485c9bb6f8a10d51d40979491464a9e0">SetOrder</a>(<a class="code" href="class_barotrauma_1_1_order.html">Order</a> order, <span class="keywordtype">bool</span> speak = <span class="keyword">true</span>)</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        {</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            objectiveManager.SetOrder(order, speak);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            HintManager.OnSetOrder(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, order);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a8a1da1b8e4fe6884f392ebe25353ad15"> 1639</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_barotrauma_1_1_a_i_objective.html">AIObjective</a> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8a1da1b8e4fe6884f392ebe25353ad15">SetForcedOrder</a>(<a class="code" href="class_barotrauma_1_1_order.html">Order</a> order)</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        {</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;            var objective = ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a3bfa3b71e175473364cf5968c3ee3587">CreateObjective</a>(order);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a51747a7565424f4941118a07d87f3aa1">SetForcedOrder</a>(objective);</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;            <span class="keywordflow">return</span> objective;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        }</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a58b965647c0dc128ec65890d892a3e54"> 1646</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a58b965647c0dc128ec65890d892a3e54">ClearForcedOrder</a>()</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        {</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;            ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a5be413b3ea0655c5edf2368c61ecc12c">ClearForcedOrder</a>();</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160; </div>
<div class="line"><a name="l01651"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#ab9ea048248123333a3708c64236035f9"> 1651</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ab9ea048248123333a3708c64236035f9">SelectTarget</a>(<a class="code" href="class_barotrauma_1_1_a_i_target.html">AITarget</a> target)</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;            SelectedAiTarget = target;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;        }</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160; </div>
<div class="line"><a name="l01656"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#ad694466240ac6fba2c227785bd96763d"> 1656</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ad694466240ac6fba2c227785bd96763d">Reset</a>()</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        {</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;            base.Reset();</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            objectiveManager.SortObjectives();</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;            SortTimer = sortObjectiveInterval;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;            <span class="keywordtype">float</span> waitDuration = characterWaitOnSwitch;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            <span class="keywordflow">if</span> (ObjectiveManager.IsCurrentObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_idle.html">AIObjectiveIdle</a>&gt;())</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;            {</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                waitDuration *= 2;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            }</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#afacfd3279fa1e7898f50c3f81373acdd">WaitTimer</a> = waitDuration;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#aef653f4dc4d4a6b88773e5262de95130"> 1669</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aef653f4dc4d4a6b88773e5262de95130">Escape</a>(<span class="keywordtype">float</span> deltaTime) =&gt; UpdateEscape(deltaTime, canAttackDoors: <span class="keyword">false</span>);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160; </div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> CheckCrouching(<span class="keywordtype">float</span> deltaTime)</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            crouchRaycastTimer -= deltaTime;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            <span class="keywordflow">if</span> (crouchRaycastTimer &gt; 0.0f) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160; </div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            crouchRaycastTimer = crouchRaycastInterval;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;            <span class="comment">//start the raycast in front of the character in the direction it&#39;s heading to</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;            Vector2 startPos = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a3c1ce407b57264140a4e88b479406d84">SimPosition</a>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            startPos.X += MathHelper.Clamp(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">TargetMovement</a>.X, -1.0f, 1.0f);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160; </div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            <span class="comment">//do a raycast upwards to find any walls</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a0642bf708cd9c0ee981e6e0928e91734">TryGetCollider</a>(0, out <a class="code" href="class_barotrauma_1_1_physics_body.html">PhysicsBody</a> mainCollider))</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;            {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                mainCollider = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">AnimController</a>.<a class="code" href="class_barotrauma_1_1_ragdoll.html#a6000f08b5552f46b4db28d53e48d671e">Collider</a>;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;            }</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;            <span class="keywordtype">float</span> margin = 0.1f;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;            <span class="keywordflow">if</span> (shouldCrouch)</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;            {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                margin *= 2;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            }</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;            <span class="keywordtype">float</span> minCeilingDist = mainCollider.<a class="code" href="class_barotrauma_1_1_physics_body.html#a432b44f501d1529777510575950b56c4">Height</a> / 2 + mainCollider.Radius + margin;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160; </div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            shouldCrouch = <a class="code" href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9a0d234e5bcf75c768eb0db6bf96e3c22d">Submarine</a>.PickBody(startPos, startPos + Vector2.UnitY * minCeilingDist, <span class="keyword">null</span>, Physics.CollisionWall, customPredicate: (fixture) =&gt; { return fixture.Body.UserData is not Submarine; }) != <span class="keyword">null</span>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a2b25c946885632f2effa8b5a91935f90"> 1697</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a2b25c946885632f2effa8b5a91935f90">AllowCampaignInteraction</a>()</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> == <span class="keyword">null</span> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#ae40bdfaee2d22e0e2f3bf44bf006964e">Removed</a> || <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a487d54c21be19303d5428430484c0c08">IsIncapacitated</a>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160; </div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            <span class="keywordflow">switch</span> (ObjectiveManager.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">CurrentObjective</a>)</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            {</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a> _:</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="class_barotrauma_1_1_a_i_objective_find_safety.html">AIObjectiveFindSafety</a> _:</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="class_barotrauma_1_1_a_i_objective_extinguish_fires.html">AIObjectiveExtinguishFires</a> _:</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="class_barotrauma_1_1_a_i_objective_fight_intruders.html">AIObjectiveFightIntruders</a> _:</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="class_barotrauma_1_1_a_i_objective_fix_leaks.html">AIObjectiveFixLeaks</a> _:</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            }</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a65ffc3dcd064312902c16bdac6d6decb"> 1713</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a65ffc3dcd064312902c16bdac6d6decb">NeedsDivingGear</a>(<a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> hull, out <span class="keywordtype">bool</span> needsSuit)</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;            needsSuit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            <span class="keywordtype">bool</span> needsAir = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a6ef26b13799e20135729d92a03af2b9d">NeedsAir</a> &amp;&amp; <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a1f73838e3be52986df173800be90967c">CharacterHealth</a>.<a class="code" href="class_barotrauma_1_1_character_health.html#ace4601ea7355604793b0937604e32ea4">OxygenLowResistance</a> &lt; 1;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            <span class="keywordflow">if</span> (hull == <span class="keyword">null</span> || </div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                hull.<a class="code" href="class_barotrauma_1_1_hull.html#acf0b271fdaa3cfcc4d525519cd730afc">WaterPercentage</a> &gt; 90 || </div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                hull.<a class="code" href="class_barotrauma_1_1_hull.html#aab5ff6f71d5238c8bc76bd3228121c17">LethalPressure</a> &gt; 0 || </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                hull.<a class="code" href="class_barotrauma_1_1_hull.html#a793ee799f07514ead039023c9fbda04b">ConnectedGaps</a>.Any(gap =&gt; !gap.IsRoomToRoom &amp;&amp; gap.Open &gt; 0.9f))</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                needsSuit = (hull == <span class="keyword">null</span> || hull.<a class="code" href="class_barotrauma_1_1_hull.html#aab5ff6f71d5238c8bc76bd3228121c17">LethalPressure</a> &gt; 0) &amp;&amp; !<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a563ea85b5ace801ca26c318781587b11">IsImmuneToPressure</a>;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                <span class="keywordflow">return</span> needsAir || needsSuit;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            <span class="keywordflow">if</span> (hull.<a class="code" href="class_barotrauma_1_1_hull.html#acf0b271fdaa3cfcc4d525519cd730afc">WaterPercentage</a> &gt; 60 || (hull.<a class="code" href="class_barotrauma_1_1_hull.html#a8aa02af3ff7b788f85a0db3579a46d6d">IsWetRoom</a> &amp;&amp; hull.<a class="code" href="class_barotrauma_1_1_hull.html#acf0b271fdaa3cfcc4d525519cd730afc">WaterPercentage</a> &gt; 10) || hull.<a class="code" href="class_barotrauma_1_1_hull.html#a00d96807dfafb249a0b07442736c623f">OxygenPercentage</a> &lt; HULL_LOW_OXYGEN_PERCENTAGE + 1)</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                <span class="keywordflow">return</span> needsAir;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            }</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160; </div>
<div class="line"><a name="l01732"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a45fcb630b776bef6dd34e7da1d57b638"> 1732</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a45fcb630b776bef6dd34e7da1d57b638">HasDivingGear</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, <span class="keywordtype">float</span> conditionPercentage = 0, <span class="keywordtype">bool</span> requireOxygenTank = <span class="keyword">true</span>) =&gt; </div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            HasDivingSuit(character, conditionPercentage, requireOxygenTank) || HasDivingMask(character, conditionPercentage, requireOxygenTank);</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a1c680489cad97f64a80b4bbf6f6d7ed7"> 1738</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a1c680489cad97f64a80b4bbf6f6d7ed7">HasDivingSuit</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, <span class="keywordtype">float</span> conditionPercentage = 0, <span class="keywordtype">bool</span> requireOxygenTank = <span class="keyword">true</span>, <span class="keywordtype">bool</span> requireSuitablePressureProtection = <span class="keyword">true</span>) </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            =&gt; HasItem(character, Tags.HeavyDivingGear, out _, requireOxygenTank ? Tags.OxygenSource : Identifier.Empty, conditionPercentage, requireEquipped: <span class="keyword">true</span>,</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                predicate: (<a class="code" href="class_barotrauma_1_1_item.html">Item</a> item) =&gt; </div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                    character.HasEquippedItem(item, <a class="code" href="namespace_barotrauma.html#a4ae31bb5c40e588eec5d81af9e1d1025">InvSlotType</a>.OuterClothes | <a class="code" href="namespace_barotrauma.html#a4ae31bb5c40e588eec5d81af9e1d1025">InvSlotType</a>.InnerClothes) &amp;&amp;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                    (!requireSuitablePressureProtection || <a class="code" href="class_barotrauma_1_1_a_i_objective_find_diving_gear.html">AIObjectiveFindDivingGear</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_find_diving_gear.html#a8091fa3dd54f54fc2e87428a2694ba28">IsSuitablePressureProtection</a>(item, Tags.HeavyDivingGear, character)));</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160; </div>
<div class="line"><a name="l01747"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#ac5d5cba24f7f56a4bb46a10cee9c4d21"> 1747</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#ac5d5cba24f7f56a4bb46a10cee9c4d21">HasDivingMask</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, <span class="keywordtype">float</span> conditionPercentage = 0, <span class="keywordtype">bool</span> requireOxygenTank = <span class="keyword">true</span>) </div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;            =&gt; HasItem(character, Tags.LightDivingGear, out _, requireOxygenTank ? Tags.OxygenSource : Identifier.Empty, conditionPercentage, requireEquipped: <span class="keyword">true</span>);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160; </div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> List&lt;Item&gt; matchingItems = <span class="keyword">new</span> List&lt;Item&gt;();</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a402ef33488d9181e85f1b5024a798bd0"> 1756</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a402ef33488d9181e85f1b5024a798bd0">HasItem</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, Identifier tagOrIdentifier, out IEnumerable&lt;Item&gt; items, Identifier containedTag = <span class="keywordflow">default</span>, <span class="keywordtype">float</span> conditionPercentage = 0, <span class="keywordtype">bool</span> requireEquipped = <span class="keyword">false</span>, <span class="keywordtype">bool</span> recursive = <span class="keyword">true</span>, Func&lt;Item, bool&gt; predicate = <span class="keyword">null</span>)</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            matchingItems.Clear();</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            items = matchingItems;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <span class="keywordflow">if</span> (character?.<a class="code" href="class_barotrauma_1_1_inventory.html">Inventory</a> == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            matchingItems = character.<a class="code" href="class_barotrauma_1_1_character.html#a68c11884e610e45404c675125439517f">Inventory</a>.<a class="code" href="class_barotrauma_1_1_inventory.html#ad814ac0478b6ce6f96b9e712f993fb11">FindAllItems</a>(i =&gt; (i.Prefab.Identifier == tagOrIdentifier || i.HasTag(tagOrIdentifier)) &amp;&amp;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                i.ConditionPercentage &gt;= conditionPercentage &amp;&amp;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                (!requireEquipped || character.<a class="code" href="class_barotrauma_1_1_character.html#a3b77f0b44528456e4f93deeb349ee803">HasEquippedItem</a>(i)) &amp;&amp;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                (predicate == <span class="keyword">null</span> || predicate(i)), recursive, matchingItems);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            items = matchingItems;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;            <span class="keywordflow">foreach</span> (var item <span class="keywordflow">in</span> matchingItems)</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                <span class="keywordflow">if</span> (item == <span class="keyword">null</span>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160; </div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                <span class="keywordflow">if</span> (containedTag.IsEmpty || item.OwnInventory == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                    <span class="comment">//no contained items required, this item&#39;s ok</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                }</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                var suitableSlot = item.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_container.html">ItemContainer</a>&gt;().FindSuitableSubContainerIndex(containedTag);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                <span class="keywordflow">if</span> (suitableSlot == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                {</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                    <span class="comment">//no restrictions on the suitable slot</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                    <span class="keywordflow">return</span> item.ContainedItems.Any(it =&gt; it.HasTag(containedTag) &amp;&amp; it.ConditionPercentage &gt; conditionPercentage);</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                }</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                    <span class="keywordflow">return</span> item.ContainedItems.Any(it =&gt; it.HasTag(containedTag) &amp;&amp; it.ConditionPercentage &gt; conditionPercentage &amp;&amp; it.ParentInventory.IsInSlot(it, suitableSlot.Value));</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                }</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;            }</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        }</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160; </div>
<div class="line"><a name="l01789"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#af0be14fd379aaf0a6d748b64f7290b70"> 1789</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#af0be14fd379aaf0a6d748b64f7290b70">StructureDamaged</a>(<a class="code" href="class_barotrauma_1_1_structure.html">Structure</a> structure, <span class="keywordtype">float</span> damageAmount, <a class="code" href="class_barotrauma_1_1_character.html">Character</a> character)</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        {</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> MaxDamagePerSecond = 5.0f;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> MaxDamagePerFrame = MaxDamagePerSecond * (float)Timing.Step;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160; </div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> WarningThreshold = 5.0f;</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> ArrestThreshold = 20.0f;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">float</span> KillThreshold = 50.0f;</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160; </div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            if (character == <span class="keyword">null</span> || damageAmount &lt;= 0.0f) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            <span class="keywordflow">if</span> (structure?.<a class="code" href="class_barotrauma_1_1_submarine.html">Submarine</a> == <span class="keyword">null</span> || !structure.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#ae9fcc64a1607cde7d8a6267f2cb5f36a">Info</a>.<a class="code" href="class_barotrauma_1_1_submarine_info.html#a9d3626dd91e666630a47932089f2b647">IsOutpost</a> || character.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == structure.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">TeamID</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            <span class="comment">//structure not indestructible = something that&#39;s &quot;meant&quot; to be destroyed, like an ice wall in mines</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;            <span class="keywordflow">if</span> (!structure.<a class="code" href="class_barotrauma_1_1_structure.html#a0b636e166b73f851b39cbb29f5c6d1a8">Prefab</a>.<a class="code" href="class_barotrauma_1_1_structure_prefab.html#a8c32cc8733d2520d8ee8a8e6a2e9cc3c">IndestructibleInOutposts</a>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160; </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            <span class="keywordtype">bool</span> someoneSpoke = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;            <span class="keywordtype">float</span> maxAccumulatedDamage = 0.0f;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> otherCharacter <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                <span class="keywordflow">if</span> (otherCharacter == character || otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == character.TeamID || otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#a26a02dfc53db3a5013e4ad35ed723761">IsDead</a> ||</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                    otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#a84ba931e913c568405c043ca7dc69b6f">Info</a>?.<a class="code" href="class_barotrauma_1_1_character_info.html#ad9f0e95ed323cdd313b71fc15963d354">Job</a> == <span class="keyword">null</span> ||</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                    otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> is not <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> otherHumanAI ||</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                    Vector2.DistanceSquared(otherCharacter.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a>, character.WorldPosition) &gt; 1000.0f * 1000.0f)</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                }</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                <span class="keywordflow">if</span> (!otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#afef8adb9919fe4da9411e576b6a672ea">CanSeeTarget</a>(character, seeThroughWindows: <span class="keyword">true</span>)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                otherHumanAI.structureDamageAccumulator.TryAdd(character, 0.0f);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                <span class="keywordtype">float</span> prevAccumulatedDamage = otherHumanAI.structureDamageAccumulator[character];</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                otherHumanAI.structureDamageAccumulator[character] += MathHelper.Clamp(damageAmount, -MaxDamagePerFrame, MaxDamagePerFrame);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                <span class="keywordtype">float</span> accumulatedDamage = Math.Max(otherHumanAI.structureDamageAccumulator[character], maxAccumulatedDamage);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                maxAccumulatedDamage = Math.Max(accumulatedDamage, maxAccumulatedDamage);</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">GameSession</a>?.<a class="code" href="class_barotrauma_1_1_game_session.html#a8c3132ea67d099e8593cb7882c2e712b">Campaign</a>?.<a class="code" href="class_barotrauma_1_1_campaign_mode.html#a1bd5d06ce283396808b97f3be53adc7d">Map</a>?.<a class="code" href="class_barotrauma_1_1_map.html#a43c712ecf38cc51c9fdc7d9dc1613530">CurrentLocation</a>?.<a class="code" href="class_barotrauma_1_1_location.html#a71b9c12b44376b8fb7eead7606091a29">Reputation</a> != <span class="keyword">null</span> &amp;&amp; character.IsPlayer)</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                {</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;                    var reputationLoss = damageAmount * <a class="code" href="class_barotrauma_1_1_reputation.html">Reputation</a>.<a class="code" href="class_barotrauma_1_1_reputation.html#aa42c7367fc6e117008e04d7067cfab9e">ReputationLossPerWallDamage</a>;</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                    <a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">GameSession</a>.<a class="code" href="class_barotrauma_1_1_game_session.html#a8c3132ea67d099e8593cb7882c2e712b">Campaign</a>.<a class="code" href="class_barotrauma_1_1_campaign_mode.html#a1bd5d06ce283396808b97f3be53adc7d">Map</a>.<a class="code" href="class_barotrauma_1_1_map.html#a43c712ecf38cc51c9fdc7d9dc1613530">CurrentLocation</a>.<a class="code" href="class_barotrauma_1_1_location.html#a71b9c12b44376b8fb7eead7606091a29">Reputation</a>.<a class="code" href="class_barotrauma_1_1_reputation.html#a861d98dd99980c9eb54ab3ef2385b1b4">AddReputation</a>(-reputationLoss, <a class="code" href="class_barotrauma_1_1_reputation.html">Reputation</a>.<a class="code" href="class_barotrauma_1_1_reputation.html#a36d8a2471dd03c4dfb1718b3000d9fed">MaxReputationLossFromWallDamage</a>);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;                }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                <span class="keywordflow">if</span> (!character.IsCriminal)</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                {</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                    <span class="keywordflow">if</span> (accumulatedDamage &lt;= WarningThreshold) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                    <span class="keywordflow">if</span> (accumulatedDamage &gt; WarningThreshold &amp;&amp; prevAccumulatedDamage &lt;= WarningThreshold &amp;&amp;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                        !someoneSpoke &amp;&amp; !character.IsIncapacitated &amp;&amp; character.Stun &lt;= 0.0f)</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                    {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                        <span class="comment">//if the damage is still fairly low, wait and see if the character keeps damaging the walls to the point where we need to intervene</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                        <span class="keywordflow">if</span> (accumulatedDamage &lt; ArrestThreshold)</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                        {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                            <span class="keywordflow">if</span> (otherHumanAI.ObjectiveManager.CurrentObjective is <a class="code" href="class_barotrauma_1_1_a_i_objective_idle.html">AIObjectiveIdle</a> idleObjective)</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                            {</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                                idleObjective.FaceTargetAndWait(character, 5.0f);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                            }</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                        }</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                        otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#a19df1c40269490e19f9a66358959d8ba">Speak</a>(TextManager.Get(<span class="stringliteral">&quot;dialogdamagewallswarning&quot;</span>).Value, <span class="keyword">null</span>, Rand.Range(0.5f, 1.0f), <span class="stringliteral">&quot;damageoutpostwalls&quot;</span>.ToIdentifier(), 10.0f);</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                        someoneSpoke = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                    }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                </div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                <span class="comment">// React if we are security</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                <span class="keywordflow">if</span> (character.IsCriminal ||</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                    (accumulatedDamage &gt; ArrestThreshold &amp;&amp; prevAccumulatedDamage &lt;= ArrestThreshold) ||</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                    (accumulatedDamage &gt; KillThreshold &amp;&amp; prevAccumulatedDamage &lt;= KillThreshold))</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                {</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                    var combatMode = accumulatedDamage &gt; KillThreshold ? <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a>.Offensive : <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a>.Arrest;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                    <span class="keywordflow">if</span> (combatMode == <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a>.Offensive)</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                    {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                        character.IsCriminal = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                    }</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                    <span class="keywordflow">if</span> (!TriggerSecurity(otherHumanAI, combatMode))</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                    {</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                        <span class="comment">// Else call the others</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                        <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> security <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>.Where(c =&gt; c.TeamID == otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>).OrderBy(c =&gt; Vector2.DistanceSquared(character.WorldPosition, c.WorldPosition)))</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                        {</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                            <span class="keywordflow">if</span> (!TriggerSecurity(security.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> as <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a>, combatMode))</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                            {</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                                <span class="comment">// Only alert one guard at a time</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                            }</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                        }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                    }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;            }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            <span class="keywordtype">bool</span> TriggerSecurity(<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> humanAI, <a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a> combatMode)</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            {</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                <span class="keywordflow">if</span> (humanAI == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                <span class="keywordflow">if</span> (!humanAI.<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#aadc2bcdeaf8d26d570d5babd65ac4a8b">IsSecurity</a>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                <span class="keywordflow">if</span> (humanAI.<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.IsCurrentObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>&gt;()) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                humanAI.<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a98fa54a887cbca4c9bd7cd233a0cabbf">AddCombatObjective</a>(combatMode, character, delay: GetReactionTime(),</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                    onCompleted: () =&gt; </div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                    { </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                        <span class="comment">//if the target is arrested successfully, reset the damage accumulator</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                        <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> anyCharacter <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                        {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                            if (anyCharacter.AIController is HumanAIController anyAI)</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                            {</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                                anyAI.structureDamageAccumulator?.Remove(character);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                            }</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                        }</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                    });</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            }</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        }</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160; </div>
<div class="line"><a name="l01894"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a91076322c9509dcac3aa34059f32b722"> 1894</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a91076322c9509dcac3aa34059f32b722">ItemTaken</a>(<a class="code" href="class_barotrauma_1_1_item.html">Item</a> item, <a class="code" href="class_barotrauma_1_1_character.html">Character</a> thief)</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        {</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;            <span class="keywordflow">if</span> (item == <span class="keyword">null</span> || thief == <span class="keyword">null</span> || item.GetComponent&lt;<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_level_resource.html">LevelResource</a>&gt;() != <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            <span class="keywordtype">bool</span> someoneSpoke = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;            <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_item.html#a6a9ee69836227da4bdf8e200218deb42">Illegitimate</a> &amp;&amp; item.<a class="code" href="class_barotrauma_1_1_item.html#af1eecd9e315fb74061eff019637226af">GetRootInventoryOwner</a>() is <a class="code" href="class_barotrauma_1_1_character.html">Character</a> itemOwner &amp;&amp; itemOwner != thief &amp;&amp; itemOwner.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == thief.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>)</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            {</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                <span class="comment">// The player attempts to use a bot as a mule or get them arrested -&gt; just arrest the player instead.</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                thief.<a class="code" href="class_barotrauma_1_1_character.html#a48ad7e7374a7146efe71d6602f7055a8">IsCriminal</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            }</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;            <span class="keywordtype">bool</span> foundIllegitimateItems = item.<a class="code" href="class_barotrauma_1_1_item.html#a6a9ee69836227da4bdf8e200218deb42">Illegitimate</a> || item.<a class="code" href="class_barotrauma_1_1_item.html#a0ad6a95eae5e7020973b9c6ed1a10e01">OwnInventory</a>?.<a class="code" href="class_barotrauma_1_1_inventory.html#a988d2f59f72f564d14c7151f45504b00">FindItem</a>(it =&gt; it.Illegitimate, recursive: <span class="keyword">true</span>) != <span class="keyword">null</span>;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            <span class="keywordflow">if</span> (foundIllegitimateItems &amp;&amp; thief.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> != <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.FriendlyNPC)</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            {</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> otherCharacter <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                {</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                    <span class="keywordflow">if</span> (otherCharacter == thief || otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == thief.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> || otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#a487d54c21be19303d5428430484c0c08">IsIncapacitated</a> || otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#ac1491dd52cac3c2472d645399740f835">Stun</a> &gt; 0.0f ||</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;                        otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#a84ba931e913c568405c043ca7dc69b6f">Info</a>?.<a class="code" href="class_barotrauma_1_1_character_info.html#ad9f0e95ed323cdd313b71fc15963d354">Job</a> == <span class="keyword">null</span> || otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> is not <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> otherHumanAI || otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#a3e4c9e2c0f46913359ec3d8abdf87676">IsEscorted</a> ||</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                        Vector2.DistanceSquared(otherCharacter.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a>, thief.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a>) &gt; 1000.0f * 1000.0f)</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                    {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                    }</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                    <span class="comment">//if (!otherCharacter.IsFacing(thief.WorldPosition)) { continue; }</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                    <span class="keywordflow">if</span> (!otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#afef8adb9919fe4da9411e576b6a672ea">CanSeeTarget</a>(thief, seeThroughWindows: <span class="keyword">true</span>)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                    <span class="comment">// Don&#39;t react if the player is taking an extinguisher and there&#39;s any fires on the sub, or diving gear when the sub is flooding</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;                    <span class="comment">// -&gt; allow them to use the emergency items</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;                    <span class="keywordflow">if</span> (thief.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                    {</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                        var connectedHulls = thief.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#ae3f04bc9ceda5910df5479c7e3f70cb1">GetHulls</a>(alsoFromConnectedSubs: <span class="keyword">true</span>);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;                        <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_item.html#aa3f01eda2fb6109936ae9a1f6f4b6f8d">HasTag</a>(Tags.FireExtinguisher) &amp;&amp; connectedHulls.Any(h =&gt; h.FireSources.Any())) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                        <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_item.html#aa3f01eda2fb6109936ae9a1f6f4b6f8d">HasTag</a>(Tags.DivingGear) &amp;&amp; connectedHulls.Any(h =&gt; h.ConnectedGaps.Any(g =&gt; <a class="code" href="class_barotrauma_1_1_a_i_objective_fix_leaks.html">AIObjectiveFixLeaks</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_fix_leaks.html#ac75490422a60c746eaafdc9d37a6757a">IsValidTarget</a>(g, thief)))) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                    }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                    <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_item.html#aa3f01eda2fb6109936ae9a1f6f4b6f8d">HasTag</a>(Tags.Handcuffs) &amp;&amp; thief.<a class="code" href="class_barotrauma_1_1_character.html#a3b77f0b44528456e4f93deeb349ee803">HasEquippedItem</a>(item))</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                    {</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                        <span class="comment">// Handcuffed -&gt; don&#39;t react.</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                    }</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                    <span class="keywordflow">if</span> (!item.<a class="code" href="class_barotrauma_1_1_item.html#acf43e7d220cd1845e7fa872bfdffa11d">StolenDuringRound</a>)</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                    {</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                        item.<a class="code" href="class_barotrauma_1_1_item.html#acf43e7d220cd1845e7fa872bfdffa11d">StolenDuringRound</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                        ApplyStealingReputationLoss(item);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="preprocessor">#if CLIENT</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                        HintManager.OnStoleItem(thief, item);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                    }</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                    <span class="keywordflow">if</span> (!someoneSpoke)</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                    {</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                        otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#a19df1c40269490e19f9a66358959d8ba">Speak</a>(TextManager.Get(<span class="stringliteral">&quot;dialogstealwarning&quot;</span>).Value, <span class="keyword">null</span>, Rand.Range(0.5f, 1.0f), <span class="stringliteral">&quot;thief&quot;</span>.ToIdentifier(), 10.0f);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                        someoneSpoke = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                    }</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                    <span class="comment">// React if we are security</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                    <span class="keywordflow">if</span> (!TriggerSecurity(otherHumanAI))</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                    {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                        <span class="comment">// Else call the others</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                        <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> security <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>.Where(c =&gt; c.TeamID == otherCharacter.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>).OrderBy(c =&gt; Vector2.DistanceSquared(thief.<a class="code" href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">WorldPosition</a>, c.WorldPosition)))</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                        {</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                            <span class="keywordflow">if</span> (TriggerSecurity(security.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> as <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a>))</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                            {</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                                <span class="comment">// Only alert one guard at a time</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                            }</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                        }</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                    }</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                }</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            }</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item.<a class="code" href="class_barotrauma_1_1_item.html#a0ad6a95eae5e7020973b9c6ed1a10e01">OwnInventory</a>?.<a class="code" href="class_barotrauma_1_1_inventory.html#a988d2f59f72f564d14c7151f45504b00">FindItem</a>(it =&gt; it.Illegitimate, <span class="keyword">true</span>) is { } foundItem)</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;            {</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                ItemTaken(foundItem, thief);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;            }</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160; </div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;            <span class="keywordtype">bool</span> TriggerSecurity(<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> humanAI)</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                <span class="keywordflow">if</span> (humanAI == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;                <span class="keywordflow">if</span> (!humanAI.<a class="code" href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#aadc2bcdeaf8d26d570d5babd65ac4a8b">IsSecurity</a>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                <span class="keywordflow">if</span> (humanAI.<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.IsCurrentObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>&gt;()) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                <span class="keywordflow">if</span> (humanAI.<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.GetObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_find_thieves.html">AIObjectiveFindThieves</a>&gt;() is { } findThieves)</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                {</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                    findThieves.InspectEveryone();</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                <span class="keywordtype">bool</span> isCriminal = thief.<a class="code" href="class_barotrauma_1_1_character.html#a48ad7e7374a7146efe71d6602f7055a8">IsCriminal</a>;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                humanAI.<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a98fa54a887cbca4c9bd7cd233a0cabbf">AddCombatObjective</a>(<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html">AIObjectiveCombat</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">CombatMode</a>.Arrest, thief, delay: GetReactionTime(),</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                    abortCondition: obj =&gt; !isCriminal &amp;&amp; thief.<a class="code" href="class_barotrauma_1_1_character.html#a68c11884e610e45404c675125439517f">Inventory</a>.<a class="code" href="class_barotrauma_1_1_inventory.html#a988d2f59f72f564d14c7151f45504b00">FindItem</a>(it =&gt; it.Illegitimate, recursive: <span class="keyword">true</span>) == <span class="keyword">null</span>,</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                    onAbort: () =&gt;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                    {</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                        if (!item.Removed &amp;&amp; !humanAI.ObjectiveManager.IsCurrentObjective&lt;AIObjectiveGetItem&gt;())</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                        {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                            humanAI.ObjectiveManager.AddObjective(new AIObjectiveGetItem(humanAI.Character, item, humanAI.ObjectiveManager, equip: false)</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                            {</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                                BasePriority = 10</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                            });</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                        }</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                    },</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                    allowHoldFire: !isCriminal,</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                    speakWarnings: !isCriminal);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            }</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        }</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a58c3d7598fe509c751f627b9dc35b1a7"> 1990</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a58c3d7598fe509c751f627b9dc35b1a7">ApplyStealingReputationLoss</a>(<a class="code" href="class_barotrauma_1_1_item.html">Item</a> item)</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        {</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_level.html">Level</a>.<a class="code" href="class_barotrauma_1_1_level.html#aeed512e4f70bc4531e552987114975f3">Loaded</a>?.<a class="code" href="class_barotrauma_1_1_level.html#a685132046d04b15a02c250605ed5d8a0">Type</a> == <a class="code" href="class_barotrauma_1_1_level_data.html">LevelData</a>.<a class="code" href="class_barotrauma_1_1_level_data.html#aadf84baa855eb1857a598059879a58af">LevelType</a>.Outpost &amp;&amp;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                <a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">GameSession</a>?.<a class="code" href="class_barotrauma_1_1_game_session.html#a8c3132ea67d099e8593cb7882c2e712b">Campaign</a>?.<a class="code" href="class_barotrauma_1_1_campaign_mode.html#a1bd5d06ce283396808b97f3be53adc7d">Map</a>?.<a class="code" href="class_barotrauma_1_1_map.html#a43c712ecf38cc51c9fdc7d9dc1613530">CurrentLocation</a> != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            {</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                var reputationLoss = MathHelper.Clamp(</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                    (item.<a class="code" href="class_barotrauma_1_1_item.html#af7f1cf26f2680bbdfbecf5d5ca65f521">Prefab</a>.<a class="code" href="class_barotrauma_1_1_item_prefab.html#aa9ac26311b19cde190468adfdbe5b4d5">GetMinPrice</a>() ?? 0) * <a class="code" href="class_barotrauma_1_1_reputation.html">Reputation</a>.<a class="code" href="class_barotrauma_1_1_reputation.html#a270144fd889bab182f4ec8650902c0dd">ReputationLossPerStolenItemPrice</a>,</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                    <a class="code" href="class_barotrauma_1_1_reputation.html">Reputation</a>.<a class="code" href="class_barotrauma_1_1_reputation.html#a46a50648e5cc396d715a710e38374837">MinReputationLossPerStolenItem</a>, <a class="code" href="class_barotrauma_1_1_reputation.html">Reputation</a>.<a class="code" href="class_barotrauma_1_1_reputation.html#a20ff7a10a5745a47b243352bec843a74">MaxReputationLossPerStolenItem</a>);</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                <a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">GameSession</a>.<a class="code" href="class_barotrauma_1_1_game_session.html#a8c3132ea67d099e8593cb7882c2e712b">Campaign</a>.<a class="code" href="class_barotrauma_1_1_campaign_mode.html#a1bd5d06ce283396808b97f3be53adc7d">Map</a>.<a class="code" href="class_barotrauma_1_1_map.html#a43c712ecf38cc51c9fdc7d9dc1613530">CurrentLocation</a>.<a class="code" href="class_barotrauma_1_1_location.html#a71b9c12b44376b8fb7eead7606091a29">Reputation</a>?.<a class="code" href="class_barotrauma_1_1_reputation.html#a861d98dd99980c9eb54ab3ef2385b1b4">AddReputation</a>(-reputationLoss);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            }</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        <span class="comment">// 0.225 - 0.375</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">float</span> GetReactionTime() =&gt; reactionTime * Rand.Range(0.75f, 1.25f);</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160; </div>
<div class="line"><a name="l02010"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a85694a43a2b62afc5a2f523391ecea16"> 2010</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a85694a43a2b62afc5a2f523391ecea16">PropagateHullSafety</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, <a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> hull)</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        {</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;            DoForEachBot(character, (humanAi) =&gt; humanAi.RefreshHullSafety(hull));</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        }</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02015"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a5bef62a37b10931467bddd236e9221a8"> 2015</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a5bef62a37b10931467bddd236e9221a8">AskToRecalculateHullSafety</a>(<a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> hull) =&gt; dirtyHullSafetyCalculations.Add(hull);</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160; </div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> RefreshHullSafety(<a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> hull)</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            var visibleHulls = dirtyHullSafetyCalculations.Contains(hull) ? hull.<a class="code" href="class_barotrauma_1_1_hull.html#ac55cea34313c524f3613d145fba6d3c3">GetConnectedHulls</a>(includingThis: <span class="keyword">true</span>, searchDepth: 1) : VisibleHulls;</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            <span class="keywordtype">float</span> hullSafety = GetHullSafety(hull, <a class="code" href="class_barotrauma_1_1_character.html">Character</a>, visibleHulls);</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            <span class="keywordflow">if</span> (hullSafety &gt; HULL_SAFETY_THRESHOLD)</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;            {</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                UnsafeHulls.Remove(hull);</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            }</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            {</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                UnsafeHulls.Add(hull);</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;            }</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        }</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160; </div>
<div class="line"><a name="l02031"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#adde6bb6df9e2cf22ea760e759171dff8"> 2031</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#adde6bb6df9e2cf22ea760e759171dff8">RefreshTargets</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, <a class="code" href="class_barotrauma_1_1_order.html">Order</a> order, <a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> hull)</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        {</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;            <span class="keywordflow">switch</span> (order.<a class="code" href="class_barotrauma_1_1_order.html#ac247e0ad3746c6b975aaea68cbd27d9d">Identifier</a>.Value.ToLowerInvariant())</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;            {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;reportfire&quot;</span>:</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                    AddTargets&lt;AIObjectiveExtinguishFires, Hull&gt;(character, hull);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;reportbreach&quot;</span>:</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                    <span class="keywordflow">foreach</span> (var gap <span class="keywordflow">in</span> hull.<a class="code" href="class_barotrauma_1_1_hull.html#a793ee799f07514ead039023c9fbda04b">ConnectedGaps</a>)</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                    {</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_fix_leaks.html">AIObjectiveFixLeaks</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_fix_leaks.html#ac75490422a60c746eaafdc9d37a6757a">IsValidTarget</a>(gap, character))</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                        {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                            AddTargets&lt;AIObjectiveFixLeaks, Gap&gt;(character, gap);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                        }</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;                    }</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;reportbrokendevices&quot;</span>:</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                    <span class="keywordflow">foreach</span> (var item <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_item.html">Item</a>.<a class="code" href="class_barotrauma_1_1_item.html#a95b787ce0509a3cd991a3fc5cc6eca17">RepairableItems</a>)</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                    {</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                        <span class="keywordflow">if</span> (item.CurrentHull != hull) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_repair_items.html">AIObjectiveRepairItems</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_repair_items.html#a6b2173b79cf4b05214c985a60aaed0f9">IsValidTarget</a>(item, character))</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                        {</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                            <span class="keywordflow">if</span> (item.Repairables.All(r =&gt; r.IsBelowRepairThreshold)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                            AddTargets&lt;AIObjectiveRepairItems, Item&gt;(character, item);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                        }</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                    }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;reportintruders&quot;</span>:</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;                    <span class="keywordflow">foreach</span> (var enemy <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                    {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                        <span class="keywordflow">if</span> (enemy.CurrentHull != hull) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_fight_intruders.html">AIObjectiveFightIntruders</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_fight_intruders.html#a1eec88063836a31a2d7081fd14e29482">IsValidTarget</a>(enemy, character, <span class="keyword">false</span>))</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                        {</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                            AddTargets&lt;AIObjectiveFightIntruders, Character&gt;(character, enemy);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;                        }</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                    }</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;                <span class="keywordflow">case</span> <span class="stringliteral">&quot;requestfirstaid&quot;</span>:</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                    <span class="keywordflow">foreach</span> (var c <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                    {</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                        <span class="keywordflow">if</span> (c.CurrentHull != hull) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_a_i_objective_rescue_all.html">AIObjectiveRescueAll</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_rescue_all.html#ae34da4c707a0fda52091d7c99efb179a">IsValidTarget</a>(c, character, out _))</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                        {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;                            AddTargets&lt;AIObjectiveRescueAll, Character&gt;(character, c);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                        }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                    }</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                    DebugConsole.ThrowError(order.<a class="code" href="class_barotrauma_1_1_order.html#ac247e0ad3746c6b975aaea68cbd27d9d">Identifier</a> + <span class="stringliteral">&quot; not implemented!&quot;</span>);</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;            }</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        }</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160; </div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> AddTargets&lt;T1, T2&gt;(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> caller, T2 target) where T1 : <a class="code" href="class_barotrauma_1_1_a_i_objective_loop.html">AIObjectiveLoop&lt;T2&gt;</a></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        {</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            <span class="keywordtype">bool</span> targetAdded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            DoForEachBot(caller, humanAI =&gt;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;            {</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                <span class="keywordflow">if</span> (caller != humanAI.Character &amp;&amp; caller.SpeechImpediment &gt;= 100) { return; }</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                var objective = humanAI.ObjectiveManager.GetObjective&lt;T1&gt;();</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                if (objective != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                    <span class="keywordflow">if</span> (!targetAdded &amp;&amp; objective.AddTarget(target))</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                    {</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                        targetAdded = true;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                    }</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                }</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;            }, range: (caller.AIController as HumanAIController)?.ReportRange ?? <span class="keywordtype">float</span>.PositiveInfinity);</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;            <span class="keywordflow">return</span> targetAdded;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        }</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160; </div>
<div class="line"><a name="l02104"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#af19def1d2b1b73a2ebe4a4fe8df3d27f"> 2104</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> RemoveTargets&lt;T1, T2&gt;(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> caller, T2 target) where T1 : <a class="code" href="class_barotrauma_1_1_a_i_objective_loop.html">AIObjectiveLoop&lt;T2&gt;</a></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;            DoForEachBot(caller, humanAI =&gt;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                humanAI.ObjectiveManager.GetObjective&lt;T1&gt;()?.ReportedTargets.Remove(target));</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        }</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> StoreHullSafety(<a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> hull, HullSafety safety)</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        {</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;            <span class="keywordflow">if</span> (knownHulls.ContainsKey(hull))</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;            {</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                <span class="comment">// Update existing. Shouldn&#39;t currently happen, but things might change.</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;                knownHulls[hull] = safety;</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            }</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;            {</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                <span class="comment">// Add new</span></div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                knownHulls.Add(hull, safety);</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            }</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        }</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160; </div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">float</span> CalculateHullSafety(Hull hull, Character character, IEnumerable&lt;Hull&gt; visibleHulls = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;        {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            <span class="keywordtype">bool</span> isCurrentHull = character == <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a> &amp;&amp; character.CurrentHull == hull;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            <span class="keywordflow">if</span> (hull == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;            {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                <span class="keywordtype">float</span> hullSafety = character.IsProtectedFromPressure ? 0 : 100;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                <span class="keywordflow">if</span> (isCurrentHull)</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                {</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                    CurrentHullSafety = hullSafety;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                }</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                <span class="keywordflow">return</span> hullSafety;</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            }</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            <span class="keywordflow">if</span> (isCurrentHull &amp;&amp; visibleHulls == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            {</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                <span class="comment">// Use the cached visible hulls</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                visibleHulls = VisibleHulls;</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;            }</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;            <span class="keywordtype">bool</span> ignoreFire = objectiveManager.CurrentOrder is AIObjectiveExtinguishFires extinguishOrder &amp;&amp; extinguishOrder.Priority &gt; 0 || objectiveManager.HasActiveObjective&lt;AIObjectiveExtinguishFire&gt;();</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;            <span class="keywordtype">bool</span> ignoreOxygen = HasDivingGear(character);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;            <span class="keywordtype">bool</span> ignoreEnemies = ObjectiveManager.HasObjectiveOrOrder&lt;AIObjectiveFightIntruders&gt;();</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;            <span class="keywordtype">float</span> safety = CalculateHullSafety(hull, visibleHulls, character, ignoreWater: <span class="keyword">false</span>, ignoreOxygen, ignoreFire, ignoreEnemies);</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            <span class="keywordflow">if</span> (isCurrentHull)</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;            {</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                CurrentHullSafety = safety;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;            }</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;            <span class="keywordflow">return</span> safety;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        }</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">float</span> CalculateHullSafety(Hull hull, IEnumerable&lt;Hull&gt; visibleHulls, Character character, <span class="keywordtype">bool</span> ignoreWater = <span class="keyword">false</span>, <span class="keywordtype">bool</span> ignoreOxygen = <span class="keyword">false</span>, <span class="keywordtype">bool</span> ignoreFire = <span class="keyword">false</span>, <span class="keywordtype">bool</span> ignoreEnemies = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        {</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;            <span class="keywordtype">bool</span> isProtectedFromPressure = character.IsProtectedFromPressure;</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;            <span class="keywordflow">if</span> (hull == <span class="keyword">null</span>) { <span class="keywordflow">return</span> isProtectedFromPressure ? 100 : 0; }</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;            <span class="keywordflow">if</span> (hull.LethalPressure &gt; 0 &amp;&amp; !isProtectedFromPressure) { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;            <span class="comment">// Oxygen factor should be 1 with 70% oxygen or more and 0.1 when the oxygen level is 30% or lower.</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;            <span class="comment">// With insufficient oxygen, the safety of the hull should be 39, all the other factors aside. So, just below the HULL_SAFETY_THRESHOLD.</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;            <span class="keywordtype">float</span> oxygenFactor = ignoreOxygen ? 1 : MathHelper.Lerp((HULL_SAFETY_THRESHOLD - 1) / 100, 1, MathUtils.InverseLerp(HULL_LOW_OXYGEN_PERCENTAGE, 100 - HULL_LOW_OXYGEN_PERCENTAGE, hull.OxygenPercentage));</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;            <span class="keywordtype">float</span> waterFactor = 1;</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;            <span class="keywordflow">if</span> (!ignoreWater)</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;            {</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                <span class="keywordflow">if</span> (visibleHulls != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                {</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                    <span class="comment">// Take the visible hulls into account too, because otherwise multi-hull rooms on several floors (with platforms) will yield unexpected results.</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                    <span class="keywordtype">float</span> relativeWaterVolume = visibleHulls.Sum(s =&gt; s.WaterVolume) / visibleHulls.Sum(s =&gt; s.Volume);</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                    waterFactor = MathHelper.Lerp(1, HULL_SAFETY_THRESHOLD / 2 / 100, relativeWaterVolume);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                }</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                {</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                    <span class="keywordtype">float</span> relativeWaterVolume = hull.WaterVolume / hull.Volume;</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                    waterFactor = MathHelper.Lerp(1, HULL_SAFETY_THRESHOLD / 2 / 100, relativeWaterVolume);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                }</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            }</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            <span class="keywordflow">if</span> (!character.NeedsOxygen || character.CharacterHealth.OxygenLowResistance &gt;= 1)</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            {</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                oxygenFactor = 1;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;            }</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;            <span class="keywordflow">if</span> (isProtectedFromPressure)</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                waterFactor = 1;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;            }</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;            <span class="keywordtype">float</span> fireFactor = 1;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            <span class="keywordflow">if</span> (!ignoreFire)</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;            {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                <span class="keyword">static</span> <span class="keywordtype">float</span> CalculateFire(Hull h) =&gt; h.FireSources.Count * 0.5f + h.FireSources.Sum(fs =&gt; fs.DamageRange) / h.Size.X;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                <span class="comment">// Even the smallest fire reduces the safety by 50%</span></div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                <span class="keywordtype">float</span> fire = visibleHulls?.Sum(CalculateFire) ?? CalculateFire(hull);</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                fireFactor = MathHelper.Lerp(1, 0, MathHelper.Clamp(fire, 0, 1));</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;            }</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;            <span class="keywordtype">float</span> enemyFactor = 1;</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;            <span class="keywordflow">if</span> (!ignoreEnemies)</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;            {</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                <span class="keywordtype">int</span> enemyCount = 0;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                <span class="keywordflow">foreach</span> (Character c <span class="keywordflow">in</span> <a class="code" href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Character</a>.CharacterList)</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                    <span class="keywordflow">if</span> (visibleHulls == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                    {</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                        <span class="keywordflow">if</span> (c.CurrentHull != hull) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                    }</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                    {</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                        <span class="keywordflow">if</span> (!visibleHulls.Contains(c.CurrentHull)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                    }</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                    <span class="keywordflow">if</span> (IsActive(c) &amp;&amp; !IsFriendly(character, c) &amp;&amp; !c.IsHandcuffed)</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                    {</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                        enemyCount++;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                    }</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                <span class="comment">// The hull safety decreases 90% per enemy up to 100% (TODO: test smaller percentages)</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                enemyFactor = MathHelper.Lerp(1, 0, MathHelper.Clamp(enemyCount * 0.9f, 0, 1));</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;            }</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;            <span class="keywordtype">float</span> dangerousItemsFactor = 1f;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_item.html">Item</a> item <span class="keywordflow">in</span> <a class="code" href="class_item.html">Item</a>.DangerousItems)</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;            {</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                <span class="keywordflow">if</span> (item.CurrentHull == hull) </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                { </div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                    dangerousItemsFactor = 0;</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                }</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            }</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            <span class="keywordtype">float</span> safety = oxygenFactor * waterFactor * fireFactor * enemyFactor * dangerousItemsFactor;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;            <span class="keywordflow">return</span> MathHelper.Clamp(safety * 100, 0, 100);</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;        }</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160; </div>
<div class="line"><a name="l02226"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a5ff710ff12f6b016bcef150659715bcd"> 2226</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a5ff710ff12f6b016bcef150659715bcd">GetHullSafety</a>(<a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> hull, <a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, IEnumerable&lt;Hull&gt; visibleHulls = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;        {</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;            <span class="keywordflow">if</span> (hull == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;            {</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                <span class="keywordflow">return</span> CalculateHullSafety(hull, character, visibleHulls);</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;            }</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;            <span class="keywordflow">if</span> (!knownHulls.TryGetValue(hull, out HullSafety hullSafety))</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;            {</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                hullSafety = <span class="keyword">new</span> HullSafety(CalculateHullSafety(hull, character, visibleHulls));</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                StoreHullSafety(hull, hullSafety);</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            }</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hullSafety.IsStale)</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                hullSafety.Reset(CalculateHullSafety(hull, character, visibleHulls));</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            }</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;            <span class="keywordflow">return</span> hullSafety.safety;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        }</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160; </div>
<div class="line"><a name="l02244"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#aff76b71f3de4decebe20273da9f3a17f"> 2244</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#aff76b71f3de4decebe20273da9f3a17f">GetHullSafety</a>(<a class="code" href="class_barotrauma_1_1_hull.html">Hull</a> hull, IEnumerable&lt;Hull&gt; visibleHulls, <a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, <span class="keywordtype">bool</span> ignoreWater = <span class="keyword">false</span>, <span class="keywordtype">bool</span> ignoreOxygen = <span class="keyword">false</span>, <span class="keywordtype">bool</span> ignoreFire = <span class="keyword">false</span>, <span class="keywordtype">bool</span> ignoreEnemies = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        {</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;            <span class="keywordflow">if</span> (hull == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            {</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                <span class="keywordflow">return</span> CalculateHullSafety(hull, visibleHulls, character, ignoreWater, ignoreOxygen, ignoreFire, ignoreEnemies);</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;            }</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;            HullSafety hullSafety;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;            <span class="keywordflow">if</span> (character.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> is <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> controller)</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;            {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                <span class="keywordflow">if</span> (!controller.knownHulls.TryGetValue(hull, out hullSafety))</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                {</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                    hullSafety = <span class="keyword">new</span> HullSafety(CalculateHullSafety(hull, visibleHulls, character, ignoreWater, ignoreOxygen, ignoreFire, ignoreEnemies));</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                    controller.StoreHullSafety(hull, hullSafety);</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hullSafety.IsStale)</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                {</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                    hullSafety.Reset(CalculateHullSafety(hull, visibleHulls, character, ignoreWater, ignoreOxygen, ignoreFire, ignoreEnemies));</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                }</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;            }</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;            {</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="preprocessor">#if DEBUG</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                DebugConsole.ThrowError(<span class="stringliteral">&quot;Cannot store the hull safety, because was unable to cast the AIController as HumanAIController. This should never happen!&quot;</span>);</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                <span class="keywordflow">return</span> CalculateHullSafety(hull, visibleHulls, character, ignoreWater, ignoreOxygen, ignoreFire, ignoreEnemies);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;            }</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;            <span class="keywordflow">return</span> hullSafety.safety;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        }</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160; </div>
<div class="line"><a name="l02273"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a8a4c9efa6e9ae591ffab42ee0c47cdbe"> 2273</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8a4c9efa6e9ae591ffab42ee0c47cdbe">IsFriendly</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> me, <a class="code" href="class_barotrauma_1_1_character.html">Character</a> other, <span class="keywordtype">bool</span> onlySameTeam = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        {</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            <span class="keywordflow">if</span> (other.<a class="code" href="class_barotrauma_1_1_character.html#a12619c70835dffb14effc1352b12e33a">IsHusk</a>)</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            {</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;                <span class="comment">// Disguised as husk</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                <span class="keywordflow">return</span> me.<a class="code" href="class_barotrauma_1_1_character.html#a80586bbb7b6c6bbc94e4b78d0c6d0402">IsDisguisedAsHusk</a>;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            }</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            {</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                <span class="keywordflow">if</span> (other.<a class="code" href="class_barotrauma_1_1_character.html#ac7aef7e70b2ae21f5cbd93089e19fadd">IsPrisoner</a> &amp;&amp; me.<a class="code" href="class_barotrauma_1_1_character.html#ac7aef7e70b2ae21f5cbd93089e19fadd">IsPrisoner</a>)</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                    <span class="comment">// Both prisoners</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                }</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                <span class="keywordflow">if</span> (other.<a class="code" href="class_barotrauma_1_1_character.html#a7749c25d054a7e7c5f7877baf2c0bbdb">IsHostileEscortee</a> &amp;&amp; me.<a class="code" href="class_barotrauma_1_1_character.html#a7749c25d054a7e7c5f7877baf2c0bbdb">IsHostileEscortee</a>)</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                {</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                    <span class="comment">// Both hostile escortees</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                }</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            }  </div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;            <span class="keywordtype">bool</span> sameTeam = me.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == other.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;            <span class="keywordtype">bool</span> teamGood = sameTeam || !onlySameTeam &amp;&amp; me.<a class="code" href="class_barotrauma_1_1_character.html#ac7af1cb4553dc5ae5befbe6bb49d5c06">IsOnFriendlyTeam</a>(other);</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;            <span class="keywordflow">if</span> (!teamGood)</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;            {</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;  </div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            }</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;            <span class="keywordflow">if</span> (other.<a class="code" href="class_barotrauma_1_1_character.html#abf2e650c48ac615cda2a9770e3d882bb">IsPet</a>)</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;            {</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;                <span class="comment">// Hostile NPCs are hostile to all pets, unless they are in the same team.</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                <span class="keywordflow">return</span> sameTeam || me.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> != <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.None;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;            }</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                <span class="keywordflow">if</span> (!me.<a class="code" href="class_barotrauma_1_1_character.html#a751bf0314d15e3de77f493feb6f73b0b">IsSameSpeciesOrGroup</a>(other)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;            }</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">GameSession</a>?.<a class="code" href="class_barotrauma_1_1_game_session.html#a6135f10f677d0c128d302969be74b847">GameMode</a> is <a class="code" href="class_barotrauma_1_1_campaign_mode.html">CampaignMode</a>)</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;            {</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                <span class="keywordflow">if</span> ((me.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.FriendlyNPC &amp;&amp; other.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.Team1) ||</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;                    (me.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.Team1 &amp;&amp; other.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.FriendlyNPC))</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;                {</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;                    <a class="code" href="class_barotrauma_1_1_character.html">Character</a> npc = me.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> == <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a>.FriendlyNPC ? me : other;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160; </div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;                    <span class="comment">//NPCs that allow some campaign interaction are not turned hostile by low reputation</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;                    <span class="keywordflow">if</span> (npc.<a class="code" href="class_barotrauma_1_1_character.html#a2f75fbae8b415b47c1fd4026d563bede">CampaignInteractionType</a> != <a class="code" href="class_barotrauma_1_1_campaign_mode.html">CampaignMode</a>.<a class="code" href="class_barotrauma_1_1_campaign_mode.html#a7fd255ef07a3fa8a585cfc33cc400efe">InteractionType</a>.None) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160; </div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;                    <span class="keywordflow">if</span> (npc.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> is <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> npcAI)</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                    {</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                        <span class="keywordflow">return</span> !npcAI.IsInHostileFaction();</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                    }</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                }</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;            }</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        }</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a1fe977714d52e1fa8f06614cc6c5053b"> 2327</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a1fe977714d52e1fa8f06614cc6c5053b">IsInHostileFaction</a>()</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;        {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_game_main.html">GameMain</a>.<a class="code" href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">GameSession</a>?.<a class="code" href="class_barotrauma_1_1_game_session.html#a6135f10f677d0c128d302969be74b847">GameMode</a> is not <a class="code" href="class_barotrauma_1_1_campaign_mode.html">CampaignMode</a> campaign) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a3e4c9e2c0f46913359ec3d8abdf87676">IsEscorted</a>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;            Identifier npcFaction = <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a5666741f376e3d066561482b45d7a09e">Faction</a>;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;            Identifier currentLocationFaction = campaign.Map?.CurrentLocation?.Faction?.Prefab.Identifier ?? Identifier.Empty;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160; </div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;            <span class="keywordflow">if</span> (npcFaction.IsEmpty)</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            {</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;                <span class="comment">//if faction identifier is not specified, assume the NPC is a member of the faction that owns the outpost</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                npcFaction = currentLocationFaction;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;            }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;            <span class="keywordflow">if</span> (!currentLocationFaction.IsEmpty &amp;&amp; npcFaction == currentLocationFaction)</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;            {</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                <span class="keywordflow">if</span> (campaign.CurrentLocation is { IsFactionHostile: true })</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                {</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                }</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;            }</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;        }</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a4d525d1b7739be482a0abbe5f74b96f8"> 2350</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a4d525d1b7739be482a0abbe5f74b96f8">IsActive</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> c) =&gt; c != <span class="keyword">null</span> &amp;&amp; c.Enabled &amp;&amp; !c.IsUnconscious;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#abc2b725f802db1bf7e7874554bf6e67b"> 2352</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#abc2b725f802db1bf7e7874554bf6e67b">IsTrueForAllBotsInTheCrew</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, Func&lt;HumanAIController, bool&gt; predicate)</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;        {</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;            <span class="keywordflow">if</span> (character == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;            <span class="keywordflow">foreach</span> (var c <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;            {</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                <span class="keywordflow">if</span> (!IsBotInTheCrew(character, c)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                <span class="keywordflow">if</span> (!predicate(c.AIController as <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a>))</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                {</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                }</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        }</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        }</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160; </div>
<div class="line"><a name="l02366"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a0aed9456e9bc7a7202bd37fe153dcfc6"> 2366</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a0aed9456e9bc7a7202bd37fe153dcfc6">IsTrueForAnyBotInTheCrew</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, Func&lt;HumanAIController, bool&gt; predicate)</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;            <span class="keywordflow">if</span> (character == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;            <span class="keywordflow">foreach</span> (var c <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                <span class="keywordflow">if</span> (!IsBotInTheCrew(character, c)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                <span class="keywordflow">if</span> (predicate(c.AIController as <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a>))</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                {</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;                }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;            }</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        }</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160; </div>
<div class="line"><a name="l02380"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a0f3b91ce53bff197f355638902b71289"> 2380</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a0f3b91ce53bff197f355638902b71289">CountBotsInTheCrew</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, Func&lt;HumanAIController, bool&gt; predicate = <span class="keyword">null</span>)</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        {</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;            <span class="keywordflow">if</span> (character == <span class="keyword">null</span>) { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;            <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;            <span class="keywordflow">foreach</span> (var other <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;            {</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                <span class="keywordflow">if</span> (!IsBotInTheCrew(character, other)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                <span class="keywordflow">if</span> (predicate == <span class="keyword">null</span> || predicate(other.AIController as <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a>))</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                {</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                    count++;</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                }</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            }</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;            <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;        }</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160; </div>
<div class="line"><a name="l02398"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a8518e6942296d11e3c017b50dc71dd49"> 2398</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8518e6942296d11e3c017b50dc71dd49">IsTrueForAnyCrewMember</a>(Func&lt;Character, bool&gt; predicate, <span class="keywordtype">bool</span> onlyActive = <span class="keyword">true</span>, <span class="keywordtype">bool</span> onlyConnectedSubs = <span class="keyword">false</span>)</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        {</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;            <span class="keywordflow">foreach</span> (var c <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;            {</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                <span class="keywordflow">if</span> (!IsActive(c)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;                <span class="keywordflow">if</span> (c.TeamID != <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                <span class="keywordflow">if</span> (onlyActive &amp;&amp; c.IsIncapacitated) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                <span class="keywordflow">if</span> (onlyConnectedSubs)</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                {</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                    {</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                        <span class="keywordflow">if</span> (c.Submarine != <span class="keyword">null</span>)</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                        {</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                        }</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                    }</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c.Submarine != <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a> &amp;&amp; !<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Submarine</a>.<a class="code" href="class_barotrauma_1_1_submarine.html#a5e89de71b527daea5d9399a96ad2e1ea">GetConnectedSubs</a>().Contains(c.Submarine))</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                    {</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                    }</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                }</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                <span class="keywordflow">if</span> (predicate(c))</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                {</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                }</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;            }</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        }</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160; </div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> DoForEachBot(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> character, Action&lt;HumanAIController&gt; action, <span class="keywordtype">float</span> range = <span class="keywordtype">float</span>.PositiveInfinity)</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            <span class="keywordflow">if</span> (character == <span class="keyword">null</span>) { <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;            <span class="keywordflow">foreach</span> (var c <span class="keywordflow">in</span> Character.CharacterList)</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;            {</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                <span class="keywordflow">if</span> (IsBotInTheCrew(character, c) &amp;&amp; CheckReportRange(character, c, range))</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                {</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                    action(c.AIController as HumanAIController);</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                }</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;            }</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160; </div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> CheckReportRange(Character character, Character target, <span class="keywordtype">float</span> range)</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        {</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">float</span>.IsPositiveInfinity(range)) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;            <span class="keywordflow">if</span> (character.CurrentHull == <span class="keyword">null</span> || target.CurrentHull == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            {</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                <span class="keywordflow">return</span> Vector2.DistanceSquared(character.WorldPosition, target.WorldPosition) &lt;= range * range;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            }</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;            {</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                <span class="keywordflow">return</span> character.CurrentHull.GetApproximateDistance(character.Position, target.Position, target.CurrentHull, range, distanceMultiplierPerClosedDoor: 2) &lt;= range;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;            }</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        }</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160; </div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> IsBotInTheCrew(Character <span class="keyword">self</span>, Character other) =&gt; IsActive(other) &amp;&amp; other.TeamID == <span class="keyword">self</span>.TeamID &amp;&amp; !other.IsIncapacitated &amp;&amp; other.IsBot &amp;&amp; other.AIController is HumanAIController;</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160; </div>
<div class="line"><a name="l02454"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a4460ddcf3b0ee96a765e7ac86d998ff2"> 2454</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a4460ddcf3b0ee96a765e7ac86d998ff2">IsItemTargetedBySomeone</a>(<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_component.html">ItemComponent</a> target, <a class="code" href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">CharacterTeamType</a> team, out <a class="code" href="class_barotrauma_1_1_character.html">Character</a> operatingCharacter)</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        {</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;            operatingCharacter = <span class="keyword">null</span>;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;            <span class="keywordflow">if</span> (target?.<a class="code" href="class_barotrauma_1_1_item.html">Item</a> == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;            <span class="keywordtype">float</span> highestPriority = -1.0f;</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;            <span class="keywordtype">float</span> highestPriorityModifier = -1.0f;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> c <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;            {</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                <span class="keywordflow">if</span> (c == <span class="keyword">null</span>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_entity.html#ae40bdfaee2d22e0e2f3bf44bf006964e">Removed</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> != team) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_character.html#a487d54c21be19303d5428430484c0c08">IsIncapacitated</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_character.html#afc8633a3f7fba62786cddb92700b9980">SelectedItem</a> == target.<a class="code" href="class_barotrauma_1_1_item.html#aca9ef98dee6df2d1817c24f2caeb01ed">Item</a>)</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                {</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                    operatingCharacter = c;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                }</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> is <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> humanAI &amp;&amp; humanAI.<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a> is <a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html">AIObjectiveManager</a> objectiveManager)</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;                {</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                    <span class="keywordflow">foreach</span> (var objective <span class="keywordflow">in</span> objectiveManager.Objectives)</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                    {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                        <span class="keywordflow">if</span> (!(objective is <a class="code" href="class_barotrauma_1_1_a_i_objective_operate_item.html">AIObjectiveOperateItem</a> operateObjective)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                        <span class="keywordflow">if</span> (operateObjective.Component?.Item != target.Item) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                        <span class="keywordflow">if</span> (operateObjective.Priority &lt; highestPriority) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                        <span class="keywordflow">if</span> (operateObjective.PriorityModifier &lt; highestPriorityModifier) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                        operatingCharacter = c;</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                        highestPriority = operateObjective.Priority;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                        highestPriorityModifier = operateObjective.PriorityModifier;</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                    }</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                }</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;            }</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;            <span class="keywordflow">return</span> operatingCharacter != <span class="keyword">null</span>;</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        }</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160; </div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <span class="comment">// There&#39;s some duplicate logic in the two methods below, but making them use the same code would require some changes in the target classes so that we could use exactly the same checks.</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        <span class="comment">// And even then there would be some differences that could end up being confusing (like the exception for steering).</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a283d4769776ba0295af403b508be238d"> 2490</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a283d4769776ba0295af403b508be238d">IsItemOperatedByAnother</a>(<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_component.html">ItemComponent</a> target, out <a class="code" href="class_barotrauma_1_1_character.html">Character</a> other)</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        {</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;            other = <span class="keyword">null</span>;</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;            <span class="keywordflow">if</span> (target?.<a class="code" href="class_barotrauma_1_1_item.html">Item</a> == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;            <span class="keywordtype">bool</span> isOrder = IsOrderedToOperateTarget(<span class="keyword">this</span>);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> c <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;            {</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;                <span class="keywordflow">if</span> (!IsActive(c)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;                <span class="keywordflow">if</span> (c == <a class="code" href="class_barotrauma_1_1_character.html">Character</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a> != <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;                <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_character.html#a8cb4d866ecd26b0e53ba34c334e5c6fb">IsPlayer</a>)</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                {</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                    <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_character.html#afc8633a3f7fba62786cddb92700b9980">SelectedItem</a> == target.<a class="code" href="class_barotrauma_1_1_item.html#aca9ef98dee6df2d1817c24f2caeb01ed">Item</a>)</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;                    {</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;                        <span class="comment">// If the other character is player, don&#39;t try to operate</span></div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;                        other = c;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;                    }</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;                }</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> is <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> otherAI)</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                {</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                    <span class="keywordflow">if</span> (otherAI.ObjectiveManager.Objectives.None(o =&gt; o is <a class="code" href="class_barotrauma_1_1_a_i_objective_operate_item.html">AIObjectiveOperateItem</a> operateObjective &amp;&amp; operateObjective.<a class="code" href="class_barotrauma_1_1_a_i_objective_operate_item.html#ab82f71411eb27feb5fce537ed7889451">Component</a>.<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_component.html#a01a0f6be5502a91a956080502cd65f46">Item</a> == target.<a class="code" href="class_barotrauma_1_1_item.html#aca9ef98dee6df2d1817c24f2caeb01ed">Item</a>))</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                    {</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                        <span class="comment">// Not targeting the same item.</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                    }</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                    <span class="keywordtype">bool</span> isTargetOrdered = IsOrderedToOperateTarget(otherAI);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                    <span class="keywordflow">if</span> (!isOrder &amp;&amp; isTargetOrdered)</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                    {</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                        <span class="comment">// If the other bot is ordered to operate the item, let him do it, unless we are ordered too</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;                        other = c;</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;                    }</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                    {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                        <span class="keywordflow">if</span> (isOrder &amp;&amp; !isTargetOrdered)</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                        {</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                            <span class="comment">// We are ordered and the target is not -&gt; allow to operate</span></div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                        }</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                        {</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;                            <span class="keywordflow">if</span> (!IsOperatingTarget(otherAI))</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;                            {</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;                                <span class="comment">// The other bot is doing something else -&gt; stick to the target.</span></div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                            }</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;                            <span class="keywordflow">if</span> (target is <a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_steering.html">Steering</a>)</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                            {</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                                <span class="comment">// Steering is hard-coded -&gt; cannot use the required skills collection defined in the xml</span></div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4b148a10f943604cfb8775baabc18adf">GetSkillLevel</a>(Tags.HelmSkill) &lt;= c.<a class="code" href="class_barotrauma_1_1_character.html#a4b148a10f943604cfb8775baabc18adf">GetSkillLevel</a>(Tags.HelmSkill))</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                                {</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                                    other = c;</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                                }</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;                            }</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target.DegreeOfSuccess(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>) &lt;= target.DegreeOfSuccess(c))</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;                            {</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                                other = c;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                            }</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;                        }</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;                    }</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;                }</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;            }</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;            <span class="keywordflow">return</span> other != <span class="keyword">null</span>;</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;            <span class="keywordtype">bool</span> IsOrderedToOperateTarget(<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> ai) =&gt; ai.<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a90c9703815d4f56c7782a6984f5aed95">CurrentOrder</a> is <a class="code" href="class_barotrauma_1_1_a_i_objective_operate_item.html">AIObjectiveOperateItem</a> operateOrder &amp;&amp; operateOrder.<a class="code" href="class_barotrauma_1_1_a_i_objective_operate_item.html#ab82f71411eb27feb5fce537ed7889451">Component</a>.<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_component.html#a01a0f6be5502a91a956080502cd65f46">Item</a> == target.<a class="code" href="class_barotrauma_1_1_item.html#aca9ef98dee6df2d1817c24f2caeb01ed">Item</a>;</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;            <span class="keywordtype">bool</span> IsOperatingTarget(<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> ai) =&gt; ai.<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">CurrentObjective</a> is <a class="code" href="class_barotrauma_1_1_a_i_objective_operate_item.html">AIObjectiveOperateItem</a> operateObjective &amp;&amp; operateObjective.<a class="code" href="class_barotrauma_1_1_a_i_objective_operate_item.html#ab82f71411eb27feb5fce537ed7889451">Component</a>.<a class="code" href="class_barotrauma_1_1_items_1_1_components_1_1_item_component.html#a01a0f6be5502a91a956080502cd65f46">Item</a> == target.<a class="code" href="class_barotrauma_1_1_item.html#aca9ef98dee6df2d1817c24f2caeb01ed">Item</a>;</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;        }</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160; </div>
<div class="line"><a name="l02560"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a6add16f76070ef599dd532cd589ec9d4"> 2560</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a6add16f76070ef599dd532cd589ec9d4">IsItemRepairedByAnother</a>(<a class="code" href="class_barotrauma_1_1_item.html">Item</a> target, out <a class="code" href="class_barotrauma_1_1_character.html">Character</a> other)</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        {</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;            other = <span class="keyword">null</span>;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_barotrauma_1_1_character.html">Character</a> == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;            <span class="keywordflow">if</span> (target == <span class="keyword">null</span>) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;            <span class="keywordtype">bool</span> isOrder = IsOrderedToRepairThis(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">AIController</a> as <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a>);</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;            <span class="keywordflow">foreach</span> (var c <span class="keywordflow">in</span> <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">CharacterList</a>)</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;            {</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;                <span class="keywordflow">if</span> (!IsActive(c)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                <span class="keywordflow">if</span> (c == <a class="code" href="class_barotrauma_1_1_character.html">Character</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                <span class="keywordflow">if</span> (c.TeamID != <a class="code" href="class_barotrauma_1_1_character.html">Character</a>.<a class="code" href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">TeamID</a>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;                other = c;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                <span class="keywordflow">if</span> (c.IsPlayer)</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                {</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                    <span class="keywordflow">if</span> (target.Repairables.Any(r =&gt; r.CurrentFixer == c))</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                    {</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                        <span class="comment">// If the other character is player, don&#39;t try to repair</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                    }</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                }</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c.AIController is <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> operatingAI)</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                {</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                    var repairItemsObjective = operatingAI.ObjectiveManager.GetObjective&lt;<a class="code" href="class_barotrauma_1_1_a_i_objective_repair_items.html">AIObjectiveRepairItems</a>&gt;();</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                    <span class="keywordflow">if</span> (repairItemsObjective == <span class="keyword">null</span>) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                    <span class="keywordflow">if</span> (repairItemsObjective.SubObjectives.FirstOrDefault(o =&gt; o is <a class="code" href="class_barotrauma_1_1_a_i_objective_repair_item.html">AIObjectiveRepairItem</a>) is not <a class="code" href="class_barotrauma_1_1_a_i_objective_repair_item.html">AIObjectiveRepairItem</a> activeObjective || activeObjective.<a class="code" href="class_barotrauma_1_1_a_i_objective_repair_item.html#a048199eedf51a2c1b06c918d50a23d6c">Item</a> != target)</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                    {</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                        <span class="comment">// Not targeting the same item.</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                    }</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                    <span class="keywordtype">bool</span> isTargetOrdered = IsOrderedToRepairThis(operatingAI);</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                    <span class="keywordflow">if</span> (!isOrder &amp;&amp; isTargetOrdered)</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                    {</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                        <span class="comment">// If the other bot is ordered to repair the item, let him do it, unless we are ordered too</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                    }</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                    {</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                        <span class="keywordflow">if</span> (isOrder &amp;&amp; !isTargetOrdered)</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                        {</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                            <span class="comment">// We are ordered and the target is not -&gt; allow to repair</span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;                        }</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                        {</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;                            <span class="keywordflow">if</span> (!isTargetOrdered &amp;&amp; operatingAI.ObjectiveManager.CurrentOrder != operatingAI.ObjectiveManager.CurrentObjective)</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                            {</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;                                <span class="comment">// The other bot is ordered to do something else</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;                            }</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;                            <span class="keywordflow">return</span> target.Repairables.Max(r =&gt; r.DegreeOfSuccess(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>)) &lt;= target.Repairables.Max(r =&gt; r.DegreeOfSuccess(c));</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;                        }</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;                    }</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;                }</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;            }</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;            <span class="keywordtype">bool</span> IsOrderedToRepairThis(<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html">HumanAIController</a> ai) =&gt; ai.<a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">ObjectiveManager</a>.<a class="code" href="class_barotrauma_1_1_a_i_objective_manager.html#a90c9703815d4f56c7782a6984f5aed95">CurrentOrder</a> is <a class="code" href="class_barotrauma_1_1_a_i_objective_repair_items.html">AIObjectiveRepairItems</a> repairOrder &amp;&amp; repairOrder.<a class="code" href="class_barotrauma_1_1_a_i_objective_repair_items.html#a7f7e90870f49acbc55b226d59fb6e511">PrioritizedItem</a> == target;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        }</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160; </div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="preprocessor">        #region Wrappers</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#abad849441d0aab4d63661fd26abe4f22"> 2619</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#abad849441d0aab4d63661fd26abe4f22">IsFriendly</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a> other, <span class="keywordtype">bool</span> onlySameTeam = <span class="keyword">false</span>) =&gt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#abad849441d0aab4d63661fd26abe4f22">IsFriendly</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, other, onlySameTeam);</div>
<div class="line"><a name="l02620"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a9421128c6aa284c76b001859b1296ea4"> 2620</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a9421128c6aa284c76b001859b1296ea4">IsTrueForAnyBotInTheCrew</a>(Func&lt;HumanAIController, bool&gt; predicate) =&gt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a9421128c6aa284c76b001859b1296ea4">IsTrueForAnyBotInTheCrew</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, predicate);</div>
<div class="line"><a name="l02621"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a430544ef0a91d3dab322edb866b5218e"> 2621</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a430544ef0a91d3dab322edb866b5218e">IsTrueForAllBotsInTheCrew</a>(Func&lt;HumanAIController, bool&gt; predicate) =&gt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a430544ef0a91d3dab322edb866b5218e">IsTrueForAllBotsInTheCrew</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, predicate);</div>
<div class="line"><a name="l02622"></a><span class="lineno"><a class="line" href="class_barotrauma_1_1_human_a_i_controller.html#a2cabe6ba988dc46bc07b901b201ebd8a"> 2622</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a2cabe6ba988dc46bc07b901b201ebd8a">CountBotsInTheCrew</a>(Func&lt;HumanAIController, bool&gt; predicate = <span class="keyword">null</span>) =&gt; <a class="code" href="class_barotrauma_1_1_human_a_i_controller.html#a2cabe6ba988dc46bc07b901b201ebd8a">CountBotsInTheCrew</a>(<a class="code" href="class_barotrauma_1_1_character.html">Character</a>, predicate);</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="preprocessor">        #endregion</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    }</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;}</div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html">Barotrauma.AIController</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00011">AIController.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_a0c1e6a72df03169f548e44ff5ce6a93c"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#a0c1e6a72df03169f548e44ff5ce6a93c">Barotrauma.AIController.ReequipUnequipped</a></div><div class="ttdeci">void ReequipUnequipped()</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00395">AIController.cs:395</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_a2a43041edb7b1be62ed25a9cd1ac4db8"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#a2a43041edb7b1be62ed25a9cd1ac4db8">Barotrauma.AIController.SimPosition</a></div><div class="ttdeci">Vector2 SimPosition</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00064">AIController.cs:65</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_a2fd3ddfe5043fcce59b061a03d64698a"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#a2fd3ddfe5043fcce59b061a03d64698a">Barotrauma.AIController.Character</a></div><div class="ttdeci">readonly Character Character</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00015">AIController.cs:15</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_a45f2e3e9b9e5f1dad2eecedd77c4afcc"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#a45f2e3e9b9e5f1dad2eecedd77c4afcc">Barotrauma.AIController.IsMentallyUnstable</a></div><div class="ttdeci">virtual bool IsMentallyUnstable</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00089">AIController.cs:89</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_a56934cf172e7506d6299c0d6c6e6bc3f"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#a56934cf172e7506d6299c0d6c6e6bc3f">Barotrauma.AIController.WorldPosition</a></div><div class="ttdeci">Vector2 WorldPosition</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00069">AIController.cs:70</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_a8e81a7915987774ed8d652524b4a0f2d"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#a8e81a7915987774ed8d652524b4a0f2d">Barotrauma.AIController.SelectedAiTarget</a></div><div class="ttdeci">AITarget SelectedAiTarget</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00022">AIController.cs:23</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_aac15666eec86e614ed84785009163e71"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#aac15666eec86e614ed84785009163e71">Barotrauma.AIController.VisibleHulls</a></div><div class="ttdeci">IEnumerable&lt; Hull &gt; VisibleHulls</div><div class="ttdoc">Returns hulls that are visible to the character, including the current hull. Note that this is not an...</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00099">AIController.cs:100</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_ab1497018265d6ab1c492726b983f13fb"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#ab1497018265d6ab1c492726b983f13fb">Barotrauma.AIController.SteeringManager</a></div><div class="ttdeci">SteeringManager SteeringManager</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00053">AIController.cs:54</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_ac6f7d11d8a57121525307b21a0123e1e"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#ac6f7d11d8a57121525307b21a0123e1e">Barotrauma.AIController.steeringManager</a></div><div class="ttdeci">SteeringManager steeringManager</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00051">AIController.cs:51</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_controller_html_ada20b1876bf5b93356a85b55f5bae855"><div class="ttname"><a href="class_barotrauma_1_1_a_i_controller.html#ada20b1876bf5b93356a85b55f5bae855">Barotrauma.AIController.HasValidPath</a></div><div class="ttdeci">bool HasValidPath(bool requireNonDirty=true, bool requireUnfinished=true, Func&lt; WayPoint, bool &gt; nodePredicate=null)</div><div class="ttdoc">Is the current path valid, using the provided parameters.</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_controller_8cs_source.html#l00119">AIController.cs:119</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_combat_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_combat.html">Barotrauma.AIObjectiveCombat</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_combat_8cs_source.html#l00013">AIObjectiveCombat.cs:14</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_combat_html_a370873ab8460b4376bbb6bfd8b545d9a"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_combat.html#a370873ab8460b4376bbb6bfd8b545d9a">Barotrauma.AIObjectiveCombat.CombatMode</a></div><div class="ttdeci">CombatMode</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_combat_8cs_source.html#l00109">AIObjectiveCombat.cs:110</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_extinguish_fires_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_extinguish_fires.html">Barotrauma.AIObjectiveExtinguishFires</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_extinguish_fires_8cs_source.html#l00009">AIObjectiveExtinguishFires.cs:10</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_extinguish_fires_html_a1eebf2446f589bd3e7f546db229071e4"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_extinguish_fires.html#a1eebf2446f589bd3e7f546db229071e4">Barotrauma.AIObjectiveExtinguishFires.IsValidTarget</a></div><div class="ttdeci">override bool IsValidTarget(Hull hull)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_fight_intruders_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_fight_intruders.html">Barotrauma.AIObjectiveFightIntruders</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_fight_intruders_8cs_source.html#l00007">AIObjectiveFightIntruders.cs:8</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_fight_intruders_html_a1eec88063836a31a2d7081fd14e29482"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_fight_intruders.html#a1eec88063836a31a2d7081fd14e29482">Barotrauma.AIObjectiveFightIntruders.IsValidTarget</a></div><div class="ttdeci">override bool IsValidTarget(Character target)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_find_diving_gear_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_find_diving_gear.html">Barotrauma.AIObjectiveFindDivingGear</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_find_diving_gear_8cs_source.html#l00008">AIObjectiveFindDivingGear.cs:9</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_find_diving_gear_html_a8091fa3dd54f54fc2e87428a2694ba28"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_find_diving_gear.html#a8091fa3dd54f54fc2e87428a2694ba28">Barotrauma.AIObjectiveFindDivingGear.IsSuitablePressureProtection</a></div><div class="ttdeci">static bool IsSuitablePressureProtection(Item item, Identifier tag, Character character)</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_find_diving_gear_8cs_source.html#l00217">AIObjectiveFindDivingGear.cs:217</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_find_safety_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_find_safety.html">Barotrauma.AIObjectiveFindSafety</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_find_safety_8cs_source.html#l00011">AIObjectiveFindSafety.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_find_thieves_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_find_thieves.html">Barotrauma.AIObjectiveFindThieves</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_find_thieves_8cs_source.html#l00009">AIObjectiveFindThieves.cs:10</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_fix_leaks_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_fix_leaks.html">Barotrauma.AIObjectiveFixLeaks</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_fix_leaks_8cs_source.html#l00007">AIObjectiveFixLeaks.cs:8</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_fix_leaks_html_ac75490422a60c746eaafdc9d37a6757a"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_fix_leaks.html#ac75490422a60c746eaafdc9d37a6757a">Barotrauma.AIObjectiveFixLeaks.IsValidTarget</a></div><div class="ttdeci">override bool IsValidTarget(Gap gap)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_go_to_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_go_to.html">Barotrauma.AIObjectiveGoTo</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_go_to_8cs_source.html#l00010">AIObjectiveGoTo.cs:11</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective.html">Barotrauma.AIObjective</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_8cs_source.html#l00010">AIObjective.cs:11</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_html_a3da977a11e2f89695e40cbaafb0a189c"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective.html#a3da977a11e2f89695e40cbaafb0a189c">Barotrauma.AIObjective.GetSubObjectivesRecursive</a></div><div class="ttdeci">IEnumerable&lt; AIObjective &gt; GetSubObjectivesRecursive(bool includingSelf=false)</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_8cs_source.html#l00136">AIObjective.cs:136</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_html_a485508851cd4465e5b0e64a0ac0fac15"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective.html#a485508851cd4465e5b0e64a0ac0fac15">Barotrauma.AIObjective.AddSubObjective</a></div><div class="ttdeci">void AddSubObjective(AIObjective objective, bool addFirst=false)</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_8cs_source.html#l00206">AIObjective.cs:206</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_html_add193be9cd4497265717cd00132af9f9"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective.html#add193be9cd4497265717cd00132af9f9">Barotrauma.AIObjective.AllowAutomaticItemUnequipping</a></div><div class="ttdeci">virtual bool AllowAutomaticItemUnequipping</div><div class="ttdoc">There's a separate property for diving suit and mask: KeepDivingGearOn.</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_8cs_source.html#l00041">AIObjective.cs:41</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_idle_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_idle.html">Barotrauma.AIObjectiveIdle</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_idle_8cs_source.html#l00011">AIObjectiveIdle.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_loop_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_loop.html">Barotrauma.AIObjectiveLoop</a></div><div class="ttdoc">An objective that creates specific kinds of subobjectives for specific types of targets,...</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_loop_8cs_source.html#l00011">AIObjectiveLoop.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html">Barotrauma.AIObjectiveManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00011">AIObjectiveManager.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a23d00f8d7200f686019380c555a2ad21"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a23d00f8d7200f686019380c555a2ad21">Barotrauma.AIObjectiveManager.GetActiveObjective</a></div><div class="ttdeci">AIObjective GetActiveObjective()</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a2ffe9e460d6be5abe88ec87d70e1d1d7"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a2ffe9e460d6be5abe88ec87d70e1d1d7">Barotrauma.AIObjectiveManager.RunPriority</a></div><div class="ttdeci">const float RunPriority</div><div class="ttdoc">Objectives with a priority equal to or higher than this make the character run.</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00044">AIObjectiveManager.cs:44</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a3bfa3b71e175473364cf5968c3ee3587"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a3bfa3b71e175473364cf5968c3ee3587">Barotrauma.AIObjectiveManager.CreateObjective</a></div><div class="ttdeci">AIObjective CreateObjective(Order order, float priorityModifier=1)</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00470">AIObjectiveManager.cs:470</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a40b8085c7aff5c00712d0b43eda1cb51"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a40b8085c7aff5c00712d0b43eda1cb51">Barotrauma.AIObjectiveManager.GetCurrentPriority</a></div><div class="ttdeci">float GetCurrentPriority()</div><div class="ttdoc">Returns the highest priority of the current objective and its subobjectives.</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00278">AIObjectiveManager.cs:278</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a4d7ff8e097e5ec619d1cce72c8ee781c"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a4d7ff8e097e5ec619d1cce72c8ee781c">Barotrauma.AIObjectiveManager.Objectives</a></div><div class="ttdeci">List&lt; AIObjective &gt; Objectives</div><div class="ttdoc">Excluding the current order.</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00051">AIObjectiveManager.cs:51</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a51747a7565424f4941118a07d87f3aa1"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a51747a7565424f4941118a07d87f3aa1">Barotrauma.AIObjectiveManager.SetForcedOrder</a></div><div class="ttdeci">void SetForcedOrder(AIObjective objective)</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00383">AIObjectiveManager.cs:383</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a53da8fca96a45ec370dc0f09cd0db2ad"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a53da8fca96a45ec370dc0f09cd0db2ad">Barotrauma.AIObjectiveManager.AddObjective</a></div><div class="ttdeci">void AddObjective(AIObjective objective)</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00099">AIObjectiveManager.cs:99</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a5be413b3ea0655c5edf2368c61ecc12c"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a5be413b3ea0655c5edf2368c61ecc12c">Barotrauma.AIObjectiveManager.ClearForcedOrder</a></div><div class="ttdeci">void ClearForcedOrder()</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00388">AIObjectiveManager.cs:388</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a7e65395fc1a6a5a2b948e5b00dd49902"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a7e65395fc1a6a5a2b948e5b00dd49902">Barotrauma.AIObjectiveManager.CurrentObjective</a></div><div class="ttdeci">AIObjective CurrentObjective</div><div class="ttdoc">Includes orders.</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00091">AIObjectiveManager.cs:91</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a90c9703815d4f56c7782a6984f5aed95"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a90c9703815d4f56c7782a6984f5aed95">Barotrauma.AIObjectiveManager.CurrentOrder</a></div><div class="ttdeci">AIObjective?? CurrentOrder</div><div class="ttdoc">The AIObjective in CurrentOrders with the highest AIObjective.Priority</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00074">AIObjectiveManager.cs:75</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_a92b60b8c97caa74d754c830c3c2a37e3"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#a92b60b8c97caa74d754c830c3c2a37e3">Barotrauma.AIObjectiveManager.CurrentOrders</a></div><div class="ttdeci">List&lt; Order &gt; CurrentOrders</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00070">AIObjectiveManager.cs:70</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_manager_html_afacfd3279fa1e7898f50c3f81373acdd"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_manager.html#afacfd3279fa1e7898f50c3f81373acdd">Barotrauma.AIObjectiveManager.WaitTimer</a></div><div class="ttdeci">float? WaitTimer</div><div class="ttdoc">When set above zero, the character will stand still doing nothing until the timer runs out....</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_manager_8cs_source.html#l00061">AIObjectiveManager.cs:62</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_operate_item_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_operate_item.html">Barotrauma.AIObjectiveOperateItem</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_operate_item_8cs_source.html#l00009">AIObjectiveOperateItem.cs:10</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_operate_item_html_ab82f71411eb27feb5fce537ed7889451"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_operate_item.html#ab82f71411eb27feb5fce537ed7889451">Barotrauma.AIObjectiveOperateItem.Component</a></div><div class="ttdeci">ItemComponent Component</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_operate_item_8cs_source.html#l00044">AIObjectiveOperateItem.cs:44</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_repair_item_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_repair_item.html">Barotrauma.AIObjectiveRepairItem</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_repair_item_8cs_source.html#l00009">AIObjectiveRepairItem.cs:10</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_repair_item_html_a048199eedf51a2c1b06c918d50a23d6c"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_repair_item.html#a048199eedf51a2c1b06c918d50a23d6c">Barotrauma.AIObjectiveRepairItem.Item</a></div><div class="ttdeci">Item Item</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_repair_item_8cs_source.html#l00017">AIObjectiveRepairItem.cs:17</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_repair_items_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_repair_items.html">Barotrauma.AIObjectiveRepairItems</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_repair_items_8cs_source.html#l00010">AIObjectiveRepairItems.cs:11</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_repair_items_html_a6b2173b79cf4b05214c985a60aaed0f9"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_repair_items.html#a6b2173b79cf4b05214c985a60aaed0f9">Barotrauma.AIObjectiveRepairItems.IsValidTarget</a></div><div class="ttdeci">override bool IsValidTarget(Item item)</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_repair_items_8cs_source.html#l00065">AIObjectiveRepairItems.cs:65</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_repair_items_html_a7f7e90870f49acbc55b226d59fb6e511"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_repair_items.html#a7f7e90870f49acbc55b226d59fb6e511">Barotrauma.AIObjectiveRepairItems.PrioritizedItem</a></div><div class="ttdeci">Item PrioritizedItem</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_repair_items_8cs_source.html#l00019">AIObjectiveRepairItems.cs:19</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_rescue_all_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_rescue_all.html">Barotrauma.AIObjectiveRescueAll</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_rescue_all_8cs_source.html#l00008">AIObjectiveRescueAll.cs:9</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_rescue_all_html_ae34da4c707a0fda52091d7c99efb179a"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_rescue_all.html#ae34da4c707a0fda52091d7c99efb179a">Barotrauma.AIObjectiveRescueAll.IsValidTarget</a></div><div class="ttdeci">override bool IsValidTarget(Character target)</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_rescue_all_8cs_source.html#l00035">AIObjectiveRescueAll.cs:35</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_objective_rescue_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_objective_rescue.html">Barotrauma.AIObjectiveRescue</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_objective_rescue_8cs_source.html#l00011">AIObjectiveRescue.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_target_html"><div class="ttname"><a href="class_barotrauma_1_1_a_i_target.html">Barotrauma.AITarget</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_i_target_8cs_source.html#l00008">AITarget.cs:9</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_a_i_target_html_a7ba9aa9ca23c144dc3533e38b3b1b43a"><div class="ttname"><a href="class_barotrauma_1_1_a_i_target.html#a7ba9aa9ca23c144dc3533e38b3b1b43a">Barotrauma.AITarget.Entity</a></div><div class="ttdeci">Entity Entity</div><div class="ttdef"><b>Definition:</b> <a href="_a_i_target_8cs_source.html#l00013">AITarget.cs:14</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_affliction_html"><div class="ttname"><a href="class_barotrauma_1_1_affliction.html">Barotrauma.Affliction</a></div><div class="ttdef"><b>Definition:</b> <a href="_affliction_8cs_source.html#l00010">Affliction.cs:11</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_affliction_html_a7e4bf2483798bb0dab9858c2488a7603"><div class="ttname"><a href="class_barotrauma_1_1_affliction.html#a7e4bf2483798bb0dab9858c2488a7603">Barotrauma.Affliction.Strength</a></div><div class="ttdeci">virtual float Strength</div><div class="ttdef"><b>Definition:</b> <a href="_affliction_8cs_source.html#l00030">Affliction.cs:31</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_affliction_html_aca086b51e4a33b72c5bd683f3c27af84"><div class="ttname"><a href="class_barotrauma_1_1_affliction.html#aca086b51e4a33b72c5bd683f3c27af84">Barotrauma.Affliction.Source</a></div><div class="ttdeci">Character Source</div><div class="ttdoc">Which character gave this affliction</div><div class="ttdef"><b>Definition:</b> <a href="_affliction_8cs_source.html#l00088">Affliction.cs:88</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_affliction_html_ad6b79239edf62a94d9047b86937588eb"><div class="ttname"><a href="class_barotrauma_1_1_affliction.html#ad6b79239edf62a94d9047b86937588eb">Barotrauma.Affliction.Prefab</a></div><div class="ttdeci">readonly AfflictionPrefab Prefab</div><div class="ttdef"><b>Definition:</b> <a href="_affliction_8cs_source.html#l00012">Affliction.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_anim_controller_html"><div class="ttname"><a href="class_barotrauma_1_1_anim_controller.html">Barotrauma.AnimController</a></div><div class="ttdef"><b>Definition:</b> <a href="_anim_controller_8cs_source.html#l00011">AnimController.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_anim_controller_html_a28f940c7e5baebf5eaa241cf9676297a"><div class="ttname"><a href="class_barotrauma_1_1_anim_controller.html#a28f940c7e5baebf5eaa241cf9676297a">Barotrauma.AnimController.GetCurrentSpeed</a></div><div class="ttdeci">float GetCurrentSpeed(bool useMaxSpeed)</div><div class="ttdef"><b>Definition:</b> <a href="_anim_controller_8cs_source.html#l00246">AnimController.cs:246</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_anim_controller_html_a9aa56d4a495ec2cc1dd7938c598d5d91"><div class="ttname"><a href="class_barotrauma_1_1_anim_controller.html#a9aa56d4a495ec2cc1dd7938c598d5d91">Barotrauma.AnimController.Anim</a></div><div class="ttdeci">Animation Anim</div><div class="ttdef"><b>Definition:</b> <a href="_anim_controller_8cs_source.html#l00162">AnimController.cs:161</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_anim_controller_html_acfc43e94b828505854f92ff70d43555b"><div class="ttname"><a href="class_barotrauma_1_1_anim_controller.html#acfc43e94b828505854f92ff70d43555b">Barotrauma.AnimController.Animation</a></div><div class="ttdeci">Animation</div><div class="ttdef"><b>Definition:</b> <a href="_anim_controller_8cs_source.html#l00161">AnimController.cs:161</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_campaign_mode_html"><div class="ttname"><a href="class_barotrauma_1_1_campaign_mode.html">Barotrauma.CampaignMode</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_game_session_2_game_modes_2_campaign_mode_8cs_source.html#l00014">BarotraumaShared/SharedSource/GameSession/GameModes/CampaignMode.cs:15</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_campaign_mode_html_a1bd5d06ce283396808b97f3be53adc7d"><div class="ttname"><a href="class_barotrauma_1_1_campaign_mode.html#a1bd5d06ce283396808b97f3be53adc7d">Barotrauma.CampaignMode.Map</a></div><div class="ttdeci">Map Map</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_game_session_2_game_modes_2_campaign_mode_8cs_source.html#l00101">BarotraumaShared/SharedSource/GameSession/GameModes/CampaignMode.cs:102</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_campaign_mode_html_a1fe14717ca4198055511641b9b67e46f"><div class="ttname"><a href="class_barotrauma_1_1_campaign_mode.html#a1fe14717ca4198055511641b9b67e46f">Barotrauma.CampaignMode.BeforeLevelLoading</a></div><div class="ttdeci">Action BeforeLevelLoading</div><div class="ttdoc">Automatically cleared after triggering -&gt; no need to unregister</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_game_session_2_game_modes_2_campaign_mode_8cs_source.html#l00368">BarotraumaShared/SharedSource/GameSession/GameModes/CampaignMode.cs:368</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_campaign_mode_html_a7fd255ef07a3fa8a585cfc33cc400efe"><div class="ttname"><a href="class_barotrauma_1_1_campaign_mode.html#a7fd255ef07a3fa8a585cfc33cc400efe">Barotrauma.CampaignMode.InteractionType</a></div><div class="ttdeci">InteractionType</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_game_session_2_game_modes_2_campaign_mode_8cs_source.html#l00034">BarotraumaShared/SharedSource/GameSession/GameModes/CampaignMode.cs:34</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_health_html_ace4601ea7355604793b0937604e32ea4"><div class="ttname"><a href="class_barotrauma_1_1_character_health.html#ace4601ea7355604793b0937604e32ea4">Barotrauma.CharacterHealth.OxygenLowResistance</a></div><div class="ttdeci">float OxygenLowResistance</div><div class="ttdoc">0-1.</div><div class="ttdef"><b>Definition:</b> <a href="_character_health_8cs_source.html#l00996">CharacterHealth.cs:996</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_health_html_ae9c319eb7d1fdcfeb6d51cf0549dc35c"><div class="ttname"><a href="class_barotrauma_1_1_character_health.html#ae9c319eb7d1fdcfeb6d51cf0549dc35c">Barotrauma.CharacterHealth.GetAfflictionStrengthByType</a></div><div class="ttdeci">float GetAfflictionStrengthByType(Identifier afflictionType, bool allowLimbAfflictions=true)</div><div class="ttdef"><b>Definition:</b> <a href="_character_health_8cs_source.html#l00429">CharacterHealth.cs:429</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html"><div class="ttname"><a href="class_barotrauma_1_1_character.html">Barotrauma.Character</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00031">BarotraumaShared/SharedSource/Characters/Character.cs:32</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a020a0846e63b5de70de85cd01338a1cf"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a020a0846e63b5de70de85cd01338a1cf">Barotrauma.Character.TryPutItemInAnySlot</a></div><div class="ttdeci">bool TryPutItemInAnySlot(Item item)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a0bc38c5b2dd1b7f08611e4f127984b04"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a0bc38c5b2dd1b7f08611e4f127984b04">Barotrauma.Character.CurrentHull</a></div><div class="ttdeci">Hull CurrentHull</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00117">BarotraumaShared/SharedSource/Characters/Character.cs:117</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a0fd9d623e6928a96ce6f006e35c93cc4"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a0fd9d623e6928a96ce6f006e35c93cc4">Barotrauma.Character.IsBot</a></div><div class="ttdeci">bool IsBot</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00154">BarotraumaShared/SharedSource/Characters/Character.cs:154</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a12619c70835dffb14effc1352b12e33a"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a12619c70835dffb14effc1352b12e33a">Barotrauma.Character.IsHusk</a></div><div class="ttdeci">bool IsHusk</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00458">BarotraumaShared/SharedSource/Characters/Character.cs:458</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a19df1c40269490e19f9a66358959d8ba"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a19df1c40269490e19f9a66358959d8ba">Barotrauma.Character.Speak</a></div><div class="ttdeci">void Speak(string message, ChatMessageType? messageType=null, float delay=0.0f, Identifier identifier=default, float minDurationBetweenSimilar=0.0f)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l04304">BarotraumaShared/SharedSource/Characters/Character.cs:4304</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a1f73838e3be52986df173800be90967c"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a1f73838e3be52986df173800be90967c">Barotrauma.Character.CharacterHealth</a></div><div class="ttdeci">CharacterHealth CharacterHealth</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00962">BarotraumaShared/SharedSource/Characters/Character.cs:962</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a23d72228ad07e32c85a61b866afa6e9c"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a23d72228ad07e32c85a61b866afa6e9c">Barotrauma.Character.SelectedCharacter</a></div><div class="ttdeci">Character?? SelectedCharacter</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00733">BarotraumaShared/SharedSource/Characters/Character.cs:734</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a268916096d699d531e844d5a42717dcb"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a268916096d699d531e844d5a42717dcb">Barotrauma.Character.AIController</a></div><div class="ttdeci">virtual AIController AIController</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01140">BarotraumaShared/SharedSource/Characters/Character.cs:1141</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a26a02dfc53db3a5013e4ad35ed723761"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a26a02dfc53db3a5013e4ad35ed723761">Barotrauma.Character.IsDead</a></div><div class="ttdeci">bool IsDead</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01146">BarotraumaShared/SharedSource/Characters/Character.cs:1147</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a2f75fbae8b415b47c1fd4026d563bede"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a2f75fbae8b415b47c1fd4026d563bede">Barotrauma.Character.CampaignInteractionType</a></div><div class="ttdeci">CampaignMode.InteractionType CampaignInteractionType</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01214">BarotraumaShared/SharedSource/Characters/Character.cs:1214</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a30694e56c154f2b41c785018b68b7266"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a30694e56c154f2b41c785018b68b7266">Barotrauma.Character.IsUnconscious</a></div><div class="ttdeci">bool IsUnconscious</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00914">BarotraumaShared/SharedSource/Characters/Character.cs:915</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a3557696cab74b3bbcfb53e1fdefdbf04"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a3557696cab74b3bbcfb53e1fdefdbf04">Barotrauma.Character.UpdateTeam</a></div><div class="ttdeci">void UpdateTeam()</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00351">BarotraumaShared/SharedSource/Characters/Character.cs:351</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a3723f7ee8e9d3ec3ff3981e5b7124f6a"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a3723f7ee8e9d3ec3ff3981e5b7124f6a">Barotrauma.Character.OriginalTeamID</a></div><div class="ttdeci">CharacterTeamType?? OriginalTeamID</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00220">BarotraumaShared/SharedSource/Characters/Character.cs:221</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a396668f9552bd28e8e352dcf1e2a9b9c"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a396668f9552bd28e8e352dcf1e2a9b9c">Barotrauma.Character.SelectedBy</a></div><div class="ttdeci">Character SelectedBy</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00791">BarotraumaShared/SharedSource/Characters/Character.cs:792</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a3b77f0b44528456e4f93deeb349ee803"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a3b77f0b44528456e4f93deeb349ee803">Barotrauma.Character.HasEquippedItem</a></div><div class="ttdeci">bool HasEquippedItem(Item item, InvSlotType? slotType=null, Func&lt; InvSlotType, bool &gt; predicate=null)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l02605">BarotraumaShared/SharedSource/Characters/Character.cs:2605</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a3c1ce407b57264140a4e88b479406d84"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a3c1ce407b57264140a4e88b479406d84">Barotrauma.Character.SimPosition</a></div><div class="ttdeci">override Vector2? SimPosition</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01218">BarotraumaShared/SharedSource/Characters/Character.cs:1219</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a3e4c9e2c0f46913359ec3d8abdf87676"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a3e4c9e2c0f46913359ec3d8abdf87676">Barotrauma.Character.IsEscorted</a></div><div class="ttdeci">bool IsEscorted</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00155">BarotraumaShared/SharedSource/Characters/Character.cs:155</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a45cdc7d0adb6bb86549feab66417e59f"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a45cdc7d0adb6bb86549feab66417e59f">Barotrauma.Character.IsMedic</a></div><div class="ttdeci">bool IsMedic</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l05550">BarotraumaShared/SharedSource/Characters/Character.cs:5550</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a47a5a8c641b203a4f8b7d71525f8e9fa"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a47a5a8c641b203a4f8b7d71525f8e9fa">Barotrauma.Character.ClearInputs</a></div><div class="ttdeci">void ClearInputs()</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01784">BarotraumaShared/SharedSource/Characters/Character.cs:1784</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a487d54c21be19303d5428430484c0c08"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a487d54c21be19303d5428430484c0c08">Barotrauma.Character.IsIncapacitated</a></div><div class="ttdeci">bool IsIncapacitated</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00905">BarotraumaShared/SharedSource/Characters/Character.cs:906</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a48ad7e7374a7146efe71d6602f7055a8"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a48ad7e7374a7146efe71d6602f7055a8">Barotrauma.Character.IsCriminal</a></div><div class="ttdeci">bool IsCriminal</div><div class="ttdoc">Do the outpost security officers treat the character as a criminal? Triggers when the character has e...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00397">BarotraumaShared/SharedSource/Characters/Character.cs:397</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a4b148a10f943604cfb8775baabc18adf"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a4b148a10f943604cfb8775baabc18adf">Barotrauma.Character.GetSkillLevel</a></div><div class="ttdeci">float GetSkillLevel(Identifier skillIdentifier)</div><div class="ttdoc">Get the character's current skill level, taking into account any temporary boosts from wearables and ...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01860">BarotraumaShared/SharedSource/Characters/Character.cs:1860</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a4e1a895b99288b9f290a4ba2824b0eaf"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a4e1a895b99288b9f290a4ba2824b0eaf">Barotrauma.Character.CharacterList</a></div><div class="ttdeci">static readonly List&lt; Character &gt; CharacterList</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00033">BarotraumaShared/SharedSource/Characters/Character.cs:33</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a563ea85b5ace801ca26c318781587b11"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a563ea85b5ace801ca26c318781587b11">Barotrauma.Character.IsImmuneToPressure</a></div><div class="ttdeci">bool IsImmuneToPressure</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l05569">BarotraumaShared/SharedSource/Characters/Character.cs:5569</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a5666741f376e3d066561482b45d7a09e"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a5666741f376e3d066561482b45d7a09e">Barotrauma.Character.Faction</a></div><div class="ttdeci">Identifier????? Faction</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00202">BarotraumaShared/SharedSource/Characters/Character.cs:203</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a57ac902c41166b491d8ea350ada1c21e"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a57ac902c41166b491d8ea350ada1c21e">Barotrauma.Character.IsOnPlayerTeam</a></div><div class="ttdeci">bool IsOnPlayerTeam</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00380">BarotraumaShared/SharedSource/Characters/Character.cs:380</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a5c43952c0062f171a45f539179e603d0"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a5c43952c0062f171a45f539179e603d0">Barotrauma.Character.IsClimbing</a></div><div class="ttdeci">bool IsClimbing</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01914">BarotraumaShared/SharedSource/Characters/Character.cs:1914</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a61b35829a6186d3896e046c4b4751124"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a61b35829a6186d3896e046c4b4751124">Barotrauma.Character.CursorPosition</a></div><div class="ttdeci">Vector2 CursorPosition</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00710">BarotraumaShared/SharedSource/Characters/Character.cs:711</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a68c11884e610e45404c675125439517f"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a68c11884e610e45404c675125439517f">Barotrauma.Character.Inventory</a></div><div class="ttdeci">CharacterInventory Inventory</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00648">BarotraumaShared/SharedSource/Characters/Character.cs:648</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a6ef26b13799e20135729d92a03af2b9d"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a6ef26b13799e20135729d92a03af2b9d">Barotrauma.Character.NeedsAir</a></div><div class="ttdeci">bool NeedsAir</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00474">BarotraumaShared/SharedSource/Characters/Character.cs:475</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a751bf0314d15e3de77f493feb6f73b0b"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a751bf0314d15e3de77f493feb6f73b0b">Barotrauma.Character.IsSameSpeciesOrGroup</a></div><div class="ttdeci">bool IsSameSpeciesOrGroup(Character other)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a761ad63374223546205c67439918ad3e"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a761ad63374223546205c67439918ad3e">Barotrauma.Character.OxygenAvailable</a></div><div class="ttdeci">float OxygenAvailable</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00939">BarotraumaShared/SharedSource/Characters/Character.cs:940</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a7749c25d054a7e7c5f7877baf2c0bbdb"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a7749c25d054a7e7c5f7877baf2c0bbdb">Barotrauma.Character.IsHostileEscortee</a></div><div class="ttdeci">bool IsHostileEscortee</div><div class="ttdoc">Set true only, if the character is turned hostile from an escort mission (See EscortMission).</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00402">BarotraumaShared/SharedSource/Characters/Character.cs:402</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a7a5574a10199c6f34e68c1ebab98f983"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a7a5574a10199c6f34e68c1ebab98f983">Barotrauma.Character.LockHands</a></div><div class="ttdeci">bool? LockHands</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00673">BarotraumaShared/SharedSource/Characters/Character.cs:674</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a7f18f8c396a94ff724e31762c0708c21"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a7f18f8c396a94ff724e31762c0708c21">Barotrauma.Character.CanRun</a></div><div class="ttdeci">bool CanRun</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01943">BarotraumaShared/SharedSource/Characters/Character.cs:1943</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a80586bbb7b6c6bbc94e4b78d0c6d0402"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a80586bbb7b6c6bbc94e4b78d0c6d0402">Barotrauma.Character.IsDisguisedAsHusk</a></div><div class="ttdeci">bool IsDisguisedAsHusk</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00459">BarotraumaShared/SharedSource/Characters/Character.cs:459</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a84ba931e913c568405c043ca7dc69b6f"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a84ba931e913c568405c043ca7dc69b6f">Barotrauma.Character.Info</a></div><div class="ttdeci">CharacterInfo Info</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00555">BarotraumaShared/SharedSource/Characters/Character.cs:556</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_a8cb4d866ecd26b0e53ba34c334e5c6fb"><div class="ttname"><a href="class_barotrauma_1_1_character.html#a8cb4d866ecd26b0e53ba34c334e5c6fb">Barotrauma.Character.IsPlayer</a></div><div class="ttdeci">bool IsPlayer</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00148">BarotraumaShared/SharedSource/Characters/Character.cs:148</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_aabbf81a6a3a2226e6605ba08d78125fb"><div class="ttname"><a href="class_barotrauma_1_1_character.html#aabbf81a6a3a2226e6605ba08d78125fb">Barotrauma.Character.IsKeyDown</a></div><div class="ttdeci">bool IsKeyDown(InputType inputType)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01707">BarotraumaShared/SharedSource/Characters/Character.cs:1707</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_aadc2bcdeaf8d26d570d5babd65ac4a8b"><div class="ttname"><a href="class_barotrauma_1_1_character.html#aadc2bcdeaf8d26d570d5babd65ac4a8b">Barotrauma.Character.IsSecurity</a></div><div class="ttdeci">bool IsSecurity</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l05551">BarotraumaShared/SharedSource/Characters/Character.cs:5551</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_aaec2cf54fa685ea7b02f0915e9341dd2"><div class="ttname"><a href="class_barotrauma_1_1_character.html#aaec2cf54fa685ea7b02f0915e9341dd2">Barotrauma.Character.IsInstigator</a></div><div class="ttdeci">bool IsInstigator</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00388">BarotraumaShared/SharedSource/Characters/Character.cs:388</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ab230957fa4e993452bac76072f46d7f4"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ab230957fa4e993452bac76072f46d7f4">Barotrauma.Character.FindItem</a></div><div class="ttdeci">bool FindItem(ref int itemIndex, out Item targetItem, IEnumerable&lt; Identifier &gt; identifiers=null, bool ignoreBroken=true, IEnumerable&lt; Item &gt; ignoredItems=null, IEnumerable&lt; Identifier &gt; ignoredContainerIdentifiers=null, Func&lt; Item, bool &gt; customPredicate=null, Func&lt; Item, float &gt; customPriorityFunction=null, float maxItemDistance=10000, ISpatialEntity positionalReference=null)</div><div class="ttdoc">Finds the closest item seeking by identifiers or tags from the world. Ignores items that are outside ...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l02785">BarotraumaShared/SharedSource/Characters/Character.cs:2785</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ab49bd629ad01839bb47b5c027cb2b2d1"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ab49bd629ad01839bb47b5c027cb2b2d1">Barotrauma.Character.SpeechImpediment</a></div><div class="ttdeci">float SpeechImpediment</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01002">BarotraumaShared/SharedSource/Characters/Character.cs:1003</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_abf2e650c48ac615cda2a9770e3d882bb"><div class="ttname"><a href="class_barotrauma_1_1_character.html#abf2e650c48ac615cda2a9770e3d882bb">Barotrauma.Character.IsPet</a></div><div class="ttdeci">bool IsPet</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00924">BarotraumaShared/SharedSource/Characters/Character.cs:925</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ac1491dd52cac3c2472d645399740f835"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ac1491dd52cac3c2472d645399740f835">Barotrauma.Character.Stun</a></div><div class="ttdeci">float? Stun</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00952">BarotraumaShared/SharedSource/Characters/Character.cs:953</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ac7aef7e70b2ae21f5cbd93089e19fadd"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ac7aef7e70b2ae21f5cbd93089e19fadd">Barotrauma.Character.IsPrisoner</a></div><div class="ttdeci">bool IsPrisoner</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l05555">BarotraumaShared/SharedSource/Characters/Character.cs:5555</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ac7af1cb4553dc5ae5befbe6bb49d5c06"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ac7af1cb4553dc5ae5befbe6bb49d5c06">Barotrauma.Character.IsOnFriendlyTeam</a></div><div class="ttdeci">static bool IsOnFriendlyTeam(CharacterTeamType myTeam, CharacterTeamType otherTeam)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l05992">BarotraumaShared/SharedSource/Characters/Character.cs:5992</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ac7b520354c259f5ad40fd410f41976c1"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ac7b520354c259f5ad40fd410f41976c1">Barotrauma.Character.IsLowInOxygen</a></div><div class="ttdeci">bool IsLowInOxygen</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01192">BarotraumaShared/SharedSource/Characters/Character.cs:1192</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_acadf1fb3fcb249b42306430436c28ae9"><div class="ttname"><a href="class_barotrauma_1_1_character.html#acadf1fb3fcb249b42306430436c28ae9">Barotrauma.Character.IsHandcuffed</a></div><div class="ttdeci">bool IsHandcuffed</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00919">BarotraumaShared/SharedSource/Characters/Character.cs:920</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ad096212a175de1fd67592de520ae21b1"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ad096212a175de1fd67592de520ae21b1">Barotrauma.Character.TryPutItemInBag</a></div><div class="ttdeci">bool TryPutItemInBag(Item item)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ad77de7c19866b40113b697ade48df404"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ad77de7c19866b40113b697ade48df404">Barotrauma.Character.TeamID</a></div><div class="ttdeci">CharacterTeamType TeamID</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00209">BarotraumaShared/SharedSource/Characters/Character.cs:210</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ad8867df774f4aaa8d29e972af88670be"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ad8867df774f4aaa8d29e972af88670be">Barotrauma.Character.Position</a></div><div class="ttdeci">override Vector2 Position</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01250">BarotraumaShared/SharedSource/Characters/Character.cs:1251</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_add485e2d123826c39b50b026760e9729"><div class="ttname"><a href="class_barotrauma_1_1_character.html#add485e2d123826c39b50b026760e9729">Barotrauma.Character.Enabled</a></div><div class="ttdeci">bool Enabled</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00044">BarotraumaShared/SharedSource/Characters/Character.cs:45</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_adeb939b672c3317ac5dc6796fe05405c"><div class="ttname"><a href="class_barotrauma_1_1_character.html#adeb939b672c3317ac5dc6796fe05405c">Barotrauma.Character.ApplyMovementLimits</a></div><div class="ttdeci">Vector2 ApplyMovementLimits(Vector2 targetMovement, float currentSpeed)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01975">BarotraumaShared/SharedSource/Characters/Character.cs:1975</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ae0e7a20a03bd7c11bd149653d408cc31"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ae0e7a20a03bd7c11bd149653d408cc31">Barotrauma.Character.AnimController</a></div><div class="ttdeci">readonly AnimController AnimController</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00406">BarotraumaShared/SharedSource/Characters/Character.cs:406</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_ae82edf3be0ca56e91594222df9f395cc"><div class="ttname"><a href="class_barotrauma_1_1_character.html#ae82edf3be0ca56e91594222df9f395cc">Barotrauma.Character.GetVisibleHulls</a></div><div class="ttdeci">List&lt; Hull &gt; GetVisibleHulls()</div><div class="ttdoc">Returns hulls that are visible to the character, including the current hull. Note that this is not an...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l05497">BarotraumaShared/SharedSource/Characters/Character.cs:5497</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_af11bffd137434f5927fb87b5ce5f1838"><div class="ttname"><a href="class_barotrauma_1_1_character.html#af11bffd137434f5927fb87b5ce5f1838">Barotrauma.Character.HeldItems</a></div><div class="ttdeci">IEnumerable&lt; Item &gt;?? HeldItems</div><div class="ttdoc">Items the character has in their hand slots. Doesn't return nulls and only returns items held in both...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00807">BarotraumaShared/SharedSource/Characters/Character.cs:808</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_af1becc98ef30de0b3d2e2369402b2e37"><div class="ttname"><a href="class_barotrauma_1_1_character.html#af1becc98ef30de0b3d2e2369402b2e37">Barotrauma.Character.CombatAction</a></div><div class="ttdeci">CombatAction CombatAction</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00404">BarotraumaShared/SharedSource/Characters/Character.cs:404</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_afc8633a3f7fba62786cddb92700b9980"><div class="ttname"><a href="class_barotrauma_1_1_character.html#afc8633a3f7fba62786cddb92700b9980">Barotrauma.Character.SelectedItem</a></div><div class="ttdeci">Item? SelectedItem</div><div class="ttdoc">The primary selected item. It can be any device that character interacts with. This excludes items li...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l01059">BarotraumaShared/SharedSource/Characters/Character.cs:1060</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_html_afef8adb9919fe4da9411e576b6a672ea"><div class="ttname"><a href="class_barotrauma_1_1_character.html#afef8adb9919fe4da9411e576b6a672ea">Barotrauma.Character.CanSeeTarget</a></div><div class="ttdeci">bool CanSeeTarget(ISpatialEntity target, ISpatialEntity seeingEntity=null, bool seeThroughWindows=false, bool checkFacing=false)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l02477">BarotraumaShared/SharedSource/Characters/Character.cs:2477</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_info_html"><div class="ttname"><a href="class_barotrauma_1_1_character_info.html">Barotrauma.CharacterInfo</a></div><div class="ttdoc">Stores information about the Character that is needed between rounds in the menu etc....</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_info_8cs_source.html#l00094">BarotraumaShared/SharedSource/Characters/CharacterInfo.cs:95</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_info_html_a54d5c6e9ae57f25dd162e823bc26bdd4"><div class="ttname"><a href="class_barotrauma_1_1_character_info.html#a54d5c6e9ae57f25dd162e823bc26bdd4">Barotrauma.CharacterInfo.HighestManualOrderPriority</a></div><div class="ttdeci">static int HighestManualOrderPriority</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_info_8cs_source.html#l00541">BarotraumaShared/SharedSource/Characters/CharacterInfo.cs:541</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_info_html_ad9f0e95ed323cdd313b71fc15963d354"><div class="ttname"><a href="class_barotrauma_1_1_character_info.html#ad9f0e95ed323cdd313b71fc15963d354">Barotrauma.CharacterInfo.Job</a></div><div class="ttdeci">Job Job</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_info_8cs_source.html#l00348">BarotraumaShared/SharedSource/Characters/CharacterInfo.cs:348</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_inventory_html_a1f708f31c5358b49a2dc2ac355a42e4a"><div class="ttname"><a href="class_barotrauma_1_1_character_inventory.html#a1f708f31c5358b49a2dc2ac355a42e4a">Barotrauma.CharacterInventory.TryPutItem</a></div><div class="ttdeci">override bool TryPutItem(Item item, Character user, IEnumerable&lt; InvSlotType &gt; allowedSlots=null, bool createNetworkEvent=true, bool ignoreCondition=false)</div><div class="ttdoc">If there is room, puts the item in the inventory and returns true, otherwise returns false</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_character_inventory_8cs_source.html#l00342">BarotraumaShared/SharedSource/Items/CharacterInventory.cs:342</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_character_inventory_html_abdd8e1436def42aa6f360777580489ce"><div class="ttname"><a href="class_barotrauma_1_1_character_inventory.html#abdd8e1436def42aa6f360777580489ce">Barotrauma.CharacterInventory.FindEquippedItemByTag</a></div><div class="ttdeci">Item FindEquippedItemByTag(Identifier tag)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_character_inventory_8cs_source.html#l00171">BarotraumaShared/SharedSource/Items/CharacterInventory.cs:171</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_combat_action_html_a0be113328a93fcf17eed713efe1ba8bd"><div class="ttname"><a href="class_barotrauma_1_1_combat_action.html#a0be113328a93fcf17eed713efe1ba8bd">Barotrauma.CombatAction.WitnessReaction</a></div><div class="ttdeci">AIObjectiveCombat.CombatMode WitnessReaction</div><div class="ttdef"><b>Definition:</b> <a href="_combat_action_8cs_source.html#l00022">CombatAction.cs:22</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_combat_action_html_a6d0c33e1d54f62504480210fa5ac6c3c"><div class="ttname"><a href="class_barotrauma_1_1_combat_action.html#a6d0c33e1d54f62504480210fa5ac6c3c">Barotrauma.CombatAction.GuardReaction</a></div><div class="ttdeci">AIObjectiveCombat.CombatMode GuardReaction</div><div class="ttdef"><b>Definition:</b> <a href="_combat_action_8cs_source.html#l00019">CombatAction.cs:19</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_crew_manager_html_a810c9eb12253d9281fceb4c355051e60"><div class="ttname"><a href="class_barotrauma_1_1_crew_manager.html#a810c9eb12253d9281fceb4c355051e60">Barotrauma.CrewManager.AddOrder</a></div><div class="ttdeci">bool AddOrder(Order order, float? fadeOutTime)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_game_session_2_crew_manager_8cs_source.html#l00072">BarotraumaShared/SharedSource/GameSession/CrewManager.cs:72</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_entity_html"><div class="ttname"><a href="class_barotrauma_1_1_entity.html">Barotrauma.Entity</a></div><div class="ttdef"><b>Definition:</b> <a href="_entity_8cs_source.html#l00012">Entity.cs:13</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_entity_html_a1e6216dd8b82a1b0d046d3e297fb92f0"><div class="ttname"><a href="class_barotrauma_1_1_entity.html#a1e6216dd8b82a1b0d046d3e297fb92f0">Barotrauma.Entity.WorldPosition</a></div><div class="ttdeci">virtual Vector2 WorldPosition</div><div class="ttdef"><b>Definition:</b> <a href="_entity_8cs_source.html#l00049">Entity.cs:49</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_entity_html_a9ff52bc5e36cd663248ff956f04b3aab"><div class="ttname"><a href="class_barotrauma_1_1_entity.html#a9ff52bc5e36cd663248ff956f04b3aab">Barotrauma.Entity.Submarine</a></div><div class="ttdeci">Submarine Submarine</div><div class="ttdef"><b>Definition:</b> <a href="_entity_8cs_source.html#l00053">Entity.cs:53</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_entity_html_ae40bdfaee2d22e0e2f3bf44bf006964e"><div class="ttname"><a href="class_barotrauma_1_1_entity.html#ae40bdfaee2d22e0e2f3bf44bf006964e">Barotrauma.Entity.Removed</a></div><div class="ttdeci">bool Removed</div><div class="ttdef"><b>Definition:</b> <a href="_entity_8cs_source.html#l00035">Entity.cs:35</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_main_html"><div class="ttname"><a href="class_barotrauma_1_1_game_main.html">Barotrauma.GameMain</a></div><div class="ttdef"><b>Definition:</b> <a href="_game_main_8cs_source.html#l00019">GameMain.cs:20</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_main_html_a7e0ad5e70cd26d542a6f6004f54d4d48"><div class="ttname"><a href="class_barotrauma_1_1_game_main.html#a7e0ad5e70cd26d542a6f6004f54d4d48">Barotrauma.GameMain.Server</a></div><div class="ttdeci">static GameServer Server</div><div class="ttdef"><b>Definition:</b> <a href="_game_main_8cs_source.html#l00039">GameMain.cs:39</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_main_html_ae54411af030a39d3f24c9e9f4db2e121"><div class="ttname"><a href="class_barotrauma_1_1_game_main.html#ae54411af030a39d3f24c9e9f4db2e121">Barotrauma.GameMain.GameSession</a></div><div class="ttdeci">static GameSession GameSession</div><div class="ttdef"><b>Definition:</b> <a href="_game_main_8cs_source.html#l00045">GameMain.cs:45</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_session_html_a6135f10f677d0c128d302969be74b847"><div class="ttname"><a href="class_barotrauma_1_1_game_session.html#a6135f10f677d0c128d302969be74b847">Barotrauma.GameSession.GameMode</a></div><div class="ttdeci">GameMode? GameMode</div><div class="ttdef"><b>Definition:</b> <a href="_game_session_8cs_source.html#l00071">GameSession.cs:71</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_session_html_a8c3132ea67d099e8593cb7882c2e712b"><div class="ttname"><a href="class_barotrauma_1_1_game_session.html#a8c3132ea67d099e8593cb7882c2e712b">Barotrauma.GameSession.Campaign</a></div><div class="ttdeci">CampaignMode? Campaign</div><div class="ttdef"><b>Definition:</b> <a href="_game_session_8cs_source.html#l00127">GameSession.cs:128</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_game_session_html_ae904be5ebcdede3d01c6b95a0f5d9250"><div class="ttname"><a href="class_barotrauma_1_1_game_session.html#ae904be5ebcdede3d01c6b95a0f5d9250">Barotrauma.GameSession.CrewManager</a></div><div class="ttdeci">CrewManager? CrewManager</div><div class="ttdef"><b>Definition:</b> <a href="_game_session_8cs_source.html#l00075">GameSession.cs:75</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_hull_html"><div class="ttname"><a href="class_barotrauma_1_1_hull.html">Barotrauma.Hull</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_hull_8cs_source.html#l00114">BarotraumaShared/SharedSource/Map/Hull.cs:115</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_hull_html_a00d96807dfafb249a0b07442736c623f"><div class="ttname"><a href="class_barotrauma_1_1_hull.html#a00d96807dfafb249a0b07442736c623f">Barotrauma.Hull.OxygenPercentage</a></div><div class="ttdeci">float? OxygenPercentage</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_hull_8cs_source.html#l00366">BarotraumaShared/SharedSource/Map/Hull.cs:367</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_hull_html_a19850254a0fb70f9a05ff794d839f3a5"><div class="ttname"><a href="class_barotrauma_1_1_hull.html#a19850254a0fb70f9a05ff794d839f3a5">Barotrauma.Hull.DisplayName</a></div><div class="ttdeci">LocalizedString DisplayName</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_hull_8cs_source.html#l00182">BarotraumaShared/SharedSource/Map/Hull.cs:183</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_hull_html_a793ee799f07514ead039023c9fbda04b"><div class="ttname"><a href="class_barotrauma_1_1_hull.html#a793ee799f07514ead039023c9fbda04b">Barotrauma.Hull.ConnectedGaps</a></div><div class="ttdeci">readonly List&lt; Gap &gt; ConnectedGaps</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_hull_8cs_source.html#l00178">BarotraumaShared/SharedSource/Map/Hull.cs:178</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_hull_html_a8aa02af3ff7b788f85a0db3579a46d6d"><div class="ttname"><a href="class_barotrauma_1_1_hull.html#a8aa02af3ff7b788f85a0db3579a46d6d">Barotrauma.Hull.IsWetRoom</a></div><div class="ttdeci">bool IsWetRoom</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_hull_8cs_source.html#l00336">BarotraumaShared/SharedSource/Map/Hull.cs:337</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_hull_html_aab5ff6f71d5238c8bc76bd3228121c17"><div class="ttname"><a href="class_barotrauma_1_1_hull.html#aab5ff6f71d5238c8bc76bd3228121c17">Barotrauma.Hull.LethalPressure</a></div><div class="ttdeci">float LethalPressure</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_hull_8cs_source.html#l00272">BarotraumaShared/SharedSource/Map/Hull.cs:273</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_hull_html_ac55cea34313c524f3613d145fba6d3c3"><div class="ttname"><a href="class_barotrauma_1_1_hull.html#ac55cea34313c524f3613d145fba6d3c3">Barotrauma.Hull.GetConnectedHulls</a></div><div class="ttdeci">IEnumerable&lt; Hull &gt; GetConnectedHulls(bool includingThis, int? searchDepth=null, bool ignoreClosedGaps=false)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_hull_8cs_source.html#l01092">BarotraumaShared/SharedSource/Map/Hull.cs:1092</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_hull_html_acf0b271fdaa3cfcc4d525519cd730afc"><div class="ttname"><a href="class_barotrauma_1_1_hull.html#acf0b271fdaa3cfcc4d525519cd730afc">Barotrauma.Hull.WaterPercentage</a></div><div class="ttdeci">float WaterPercentage</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_hull_8cs_source.html#l00364">BarotraumaShared/SharedSource/Map/Hull.cs:364</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_hull_html_af79fe91887d15e2456ab582ff19ea8fa"><div class="ttname"><a href="class_barotrauma_1_1_hull.html#af79fe91887d15e2456ab582ff19ea8fa">Barotrauma.Hull.Oxygen</a></div><div class="ttdeci">float Oxygen</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_hull_8cs_source.html#l00315">BarotraumaShared/SharedSource/Map/Hull.cs:316</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html">Barotrauma.HumanAIController</a></div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00011">HumanAIController.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a0a87c9639c62d01fd271595d3fd86e8a"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a0a87c9639c62d01fd271595d3fd86e8a">Barotrauma.HumanAIController.HULL_SAFETY_THRESHOLD</a></div><div class="ttdeci">const float HULL_SAFETY_THRESHOLD</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00036">HumanAIController.cs:36</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a0aed9456e9bc7a7202bd37fe153dcfc6"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a0aed9456e9bc7a7202bd37fe153dcfc6">Barotrauma.HumanAIController.IsTrueForAnyBotInTheCrew</a></div><div class="ttdeci">static bool IsTrueForAnyBotInTheCrew(Character character, Func&lt; HumanAIController, bool &gt; predicate)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02366">HumanAIController.cs:2366</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a0f3b91ce53bff197f355638902b71289"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a0f3b91ce53bff197f355638902b71289">Barotrauma.HumanAIController.CountBotsInTheCrew</a></div><div class="ttdeci">static int CountBotsInTheCrew(Character character, Func&lt; HumanAIController, bool &gt; predicate=null)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02380">HumanAIController.cs:2380</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a19a842e9b26f3900ec9c6991e533dbbc"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a19a842e9b26f3900ec9c6991e533dbbc">Barotrauma.HumanAIController.Hearing</a></div><div class="ttdeci">float Hearing</div><div class="ttdoc">Affects how far the character can hear sounds created by AI targets with the tag ProvocativeToHumanAI...</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00075">HumanAIController.cs:75</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a1c680489cad97f64a80b4bbf6f6d7ed7"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a1c680489cad97f64a80b4bbf6f6d7ed7">Barotrauma.HumanAIController.HasDivingSuit</a></div><div class="ttdeci">static bool HasDivingSuit(Character character, float conditionPercentage=0, bool requireOxygenTank=true, bool requireSuitablePressureProtection=true)</div><div class="ttdoc">Check whether the character has a diving suit in usable condition, suitable pressure protection for t...</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a1dc627482c6e23815010d9f551d1f005"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a1dc627482c6e23815010d9f551d1f005">Barotrauma.HumanAIController.DebugAI</a></div><div class="ttdeci">static bool DebugAI</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00013">HumanAIController.cs:13</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a1fe977714d52e1fa8f06614cc6c5053b"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a1fe977714d52e1fa8f06614cc6c5053b">Barotrauma.HumanAIController.IsInHostileFaction</a></div><div class="ttdeci">bool IsInHostileFaction()</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02327">HumanAIController.cs:2327</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a20809a298c2e35eb3d25d99ae9b05e4e"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a20809a298c2e35eb3d25d99ae9b05e4e">Barotrauma.HumanAIController.AimAccuracy</a></div><div class="ttdeci">float AimAccuracy</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00095">HumanAIController.cs:96</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a25c6f7909db9be23cd5dc66a9cc801f9"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a25c6f7909db9be23cd5dc66a9cc801f9">Barotrauma.HumanAIController.CurrentHullSafety</a></div><div class="ttdeci">float CurrentHullSafety</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00119">HumanAIController.cs:119</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a283d4769776ba0295af403b508be238d"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a283d4769776ba0295af403b508be238d">Barotrauma.HumanAIController.IsItemOperatedByAnother</a></div><div class="ttdeci">bool IsItemOperatedByAnother(ItemComponent target, out Character other)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02490">HumanAIController.cs:2490</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a2b25c946885632f2effa8b5a91935f90"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a2b25c946885632f2effa8b5a91935f90">Barotrauma.HumanAIController.AllowCampaignInteraction</a></div><div class="ttdeci">bool AllowCampaignInteraction()</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01697">HumanAIController.cs:1697</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a2cabe6ba988dc46bc07b901b201ebd8a"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a2cabe6ba988dc46bc07b901b201ebd8a">Barotrauma.HumanAIController.CountBotsInTheCrew</a></div><div class="ttdeci">int CountBotsInTheCrew(Func&lt; HumanAIController, bool &gt; predicate=null)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a327357928c710e8baeddb1df92e1c10c"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a327357928c710e8baeddb1df92e1c10c">Barotrauma.HumanAIController.FindWeaponsRange</a></div><div class="ttdeci">float FindWeaponsRange</div><div class="ttdoc">How far the character can seek new weapons from.</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00085">HumanAIController.cs:85</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a380f751ddbdeab78a76fef55ee436c63"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a380f751ddbdeab78a76fef55ee436c63">Barotrauma.HumanAIController.ReportProblems</a></div><div class="ttdeci">void ReportProblems()</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01033">HumanAIController.cs:1033</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a402ef33488d9181e85f1b5024a798bd0"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a402ef33488d9181e85f1b5024a798bd0">Barotrauma.HumanAIController.HasItem</a></div><div class="ttdeci">static bool HasItem(Character character, Identifier tagOrIdentifier, out IEnumerable&lt; Item &gt; items, Identifier containedTag=default, float conditionPercentage=0, bool requireEquipped=false, bool recursive=true, Func&lt; Item, bool &gt; predicate=null)</div><div class="ttdoc">Note: uses a single list for matching items. The item is reused each time when the method is called....</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01756">HumanAIController.cs:1756</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a430544ef0a91d3dab322edb866b5218e"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a430544ef0a91d3dab322edb866b5218e">Barotrauma.HumanAIController.IsTrueForAllBotsInTheCrew</a></div><div class="ttdeci">bool IsTrueForAllBotsInTheCrew(Func&lt; HumanAIController, bool &gt; predicate)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a4460ddcf3b0ee96a765e7ac86d998ff2"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a4460ddcf3b0ee96a765e7ac86d998ff2">Barotrauma.HumanAIController.IsItemTargetedBySomeone</a></div><div class="ttdeci">static bool IsItemTargetedBySomeone(ItemComponent target, CharacterTeamType team, out Character operatingCharacter)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02454">HumanAIController.cs:2454</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a45553edc36380e344d8ef39de8059e5d"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a45553edc36380e344d8ef39de8059e5d">Barotrauma.HumanAIController.HULL_LOW_OXYGEN_PERCENTAGE</a></div><div class="ttdeci">const float HULL_LOW_OXYGEN_PERCENTAGE</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00037">HumanAIController.cs:37</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a45fcb630b776bef6dd34e7da1d57b638"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a45fcb630b776bef6dd34e7da1d57b638">Barotrauma.HumanAIController.HasDivingGear</a></div><div class="ttdeci">static bool HasDivingGear(Character character, float conditionPercentage=0, bool requireOxygenTank=true)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a485c9bb6f8a10d51d40979491464a9e0"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a485c9bb6f8a10d51d40979491464a9e0">Barotrauma.HumanAIController.SetOrder</a></div><div class="ttdeci">void SetOrder(Order order, bool speak=true)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01631">HumanAIController.cs:1631</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a4af45a98307526b1c94a5bd0b045aa3d"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a4af45a98307526b1c94a5bd0b045aa3d">Barotrauma.HumanAIController.UnreachableHulls</a></div><div class="ttdeci">readonly HashSet&lt; Hull &gt; UnreachableHulls</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00041">HumanAIController.cs:41</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a4d525d1b7739be482a0abbe5f74b96f8"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a4d525d1b7739be482a0abbe5f74b96f8">Barotrauma.HumanAIController.IsActive</a></div><div class="ttdeci">static bool IsActive(Character c)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a58b965647c0dc128ec65890d892a3e54"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a58b965647c0dc128ec65890d892a3e54">Barotrauma.HumanAIController.ClearForcedOrder</a></div><div class="ttdeci">void ClearForcedOrder()</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01646">HumanAIController.cs:1646</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a58c3d7598fe509c751f627b9dc35b1a7"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a58c3d7598fe509c751f627b9dc35b1a7">Barotrauma.HumanAIController.ApplyStealingReputationLoss</a></div><div class="ttdeci">static void ApplyStealingReputationLoss(Item item)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01990">HumanAIController.cs:1990</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a5a58c6ae24d47ab1790489f1e4164e4a"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a5a58c6ae24d47ab1790489f1e4164e4a">Barotrauma.HumanAIController.FindSuitableContainer</a></div><div class="ttdeci">static bool FindSuitableContainer(Character character, Item containableItem, List&lt; Item &gt; ignoredItems, ref int itemIndex, out Item suitableContainer)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00938">HumanAIController.cs:938</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a5bef62a37b10931467bddd236e9221a8"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a5bef62a37b10931467bddd236e9221a8">Barotrauma.HumanAIController.AskToRecalculateHullSafety</a></div><div class="ttdeci">void AskToRecalculateHullSafety(Hull hull)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a5ff710ff12f6b016bcef150659715bcd"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a5ff710ff12f6b016bcef150659715bcd">Barotrauma.HumanAIController.GetHullSafety</a></div><div class="ttdeci">float GetHullSafety(Hull hull, Character character, IEnumerable&lt; Hull &gt; visibleHulls=null)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02226">HumanAIController.cs:2226</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a60ed9fef8e741daac560538aced80caf"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a60ed9fef8e741daac560538aced80caf">Barotrauma.HumanAIController.InitShipCommandManager</a></div><div class="ttdeci">void InitShipCommandManager()</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00174">HumanAIController.cs:174</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a6464547fe0ec74212f6d4e4dc47987df"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a6464547fe0ec74212f6d4e4dc47987df">Barotrauma.HumanAIController.OnHealed</a></div><div class="ttdeci">override void OnHealed(Character healer, float healAmount)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01213">HumanAIController.cs:1213</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a65ffc3dcd064312902c16bdac6d6decb"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a65ffc3dcd064312902c16bdac6d6decb">Barotrauma.HumanAIController.NeedsDivingGear</a></div><div class="ttdeci">bool NeedsDivingGear(Hull hull, out bool needsSuit)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01713">HumanAIController.cs:1713</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a67c13416af7f6a66d8478b48af9c1996"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a67c13416af7f6a66d8478b48af9c1996">Barotrauma.HumanAIController.OnAttacked</a></div><div class="ttdeci">override void OnAttacked(Character attacker, AttackResult attackResult)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01226">HumanAIController.cs:1226</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a6add16f76070ef599dd532cd589ec9d4"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a6add16f76070ef599dd532cd589ec9d4">Barotrauma.HumanAIController.IsItemRepairedByAnother</a></div><div class="ttdeci">bool IsItemRepairedByAnother(Item target, out Character other)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02560">HumanAIController.cs:2560</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a6b60ec3a3e96b542002d576692c0ee15"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a6b60ec3a3e96b542002d576692c0ee15">Barotrauma.HumanAIController.Update</a></div><div class="ttdeci">override void Update(float deltaTime)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00193">HumanAIController.cs:193</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a71a505cabd09264e3ca300670aa6f5f4"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a71a505cabd09264e3ca300670aa6f5f4">Barotrauma.HumanAIController.DisableCrewAI</a></div><div class="ttdeci">static bool DisableCrewAI</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00014">HumanAIController.cs:14</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a71bf6b439bb0983676e403e50aa16582"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a71bf6b439bb0983676e403e50aa16582">Barotrauma.HumanAIController.IgnoredItems</a></div><div class="ttdeci">readonly List&lt; Item &gt; IgnoredItems</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00043">HumanAIController.cs:43</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a7619a576de7820c1ef70e870d978fcbd"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a7619a576de7820c1ef70e870d978fcbd">Barotrauma.HumanAIController.UseOutsideWaypoints</a></div><div class="ttdeci">bool UseOutsideWaypoints</div><div class="ttdoc">Waypoints that are not linked to a sub (e.g. main path).</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00112">HumanAIController.cs:112</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a790df212a93a840069eb3586c7095b17"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a790df212a93a840069eb3586c7095b17">Barotrauma.HumanAIController.AutoFaceMovement</a></div><div class="ttdeci">bool AutoFaceMovement</div><div class="ttdoc">Resets each frame</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00026">HumanAIController.cs:26</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a847429b1b20c34ffacf1e95200364d8e"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a847429b1b20c34ffacf1e95200364d8e">Barotrauma.HumanAIController.AimSpeed</a></div><div class="ttdeci">float AimSpeed</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00088">HumanAIController.cs:89</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a8518e6942296d11e3c017b50dc71dd49"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a8518e6942296d11e3c017b50dc71dd49">Barotrauma.HumanAIController.IsTrueForAnyCrewMember</a></div><div class="ttdeci">bool IsTrueForAnyCrewMember(Func&lt; Character, bool &gt; predicate, bool onlyActive=true, bool onlyConnectedSubs=false)</div><div class="ttdoc">Including the player characters in the same team.</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02398">HumanAIController.cs:2398</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a85694a43a2b62afc5a2f523391ecea16"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a85694a43a2b62afc5a2f523391ecea16">Barotrauma.HumanAIController.PropagateHullSafety</a></div><div class="ttdeci">static void PropagateHullSafety(Character character, Hull hull)</div><div class="ttdoc">Updates the hull safety for all ai characters in the team. The idea is that the crew communicates (ma...</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02010">HumanAIController.cs:2010</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a8720e1713c9a5408bcc0387dfffecee0"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a8720e1713c9a5408bcc0387dfffecee0">Barotrauma.HumanAIController.ObjectiveManager</a></div><div class="ttdeci">AIObjectiveManager ObjectiveManager</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00117">HumanAIController.cs:117</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a8a1da1b8e4fe6884f392ebe25353ad15"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a8a1da1b8e4fe6884f392ebe25353ad15">Barotrauma.HumanAIController.SetForcedOrder</a></div><div class="ttdeci">AIObjective SetForcedOrder(Order order)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01639">HumanAIController.cs:1639</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a8a4c9efa6e9ae591ffab42ee0c47cdbe"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a8a4c9efa6e9ae591ffab42ee0c47cdbe">Barotrauma.HumanAIController.IsFriendly</a></div><div class="ttdeci">static bool IsFriendly(Character me, Character other, bool onlySameTeam=false)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02273">HumanAIController.cs:2273</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a91076322c9509dcac3aa34059f32b722"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a91076322c9509dcac3aa34059f32b722">Barotrauma.HumanAIController.ItemTaken</a></div><div class="ttdeci">static void ItemTaken(Item item, Character thief)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01894">HumanAIController.cs:1894</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a9421128c6aa284c76b001859b1296ea4"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a9421128c6aa284c76b001859b1296ea4">Barotrauma.HumanAIController.IsTrueForAnyBotInTheCrew</a></div><div class="ttdeci">bool IsTrueForAnyBotInTheCrew(Func&lt; HumanAIController, bool &gt; predicate)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a97e11e03ca7d572d8da7eeff26462979"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a97e11e03ca7d572d8da7eeff26462979">Barotrauma.HumanAIController.HumanAIController</a></div><div class="ttdeci">HumanAIController(Character c)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00183">HumanAIController.cs:183</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a98fa54a887cbca4c9bd7cd233a0cabbf"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a98fa54a887cbca4c9bd7cd233a0cabbf">Barotrauma.HumanAIController.AddCombatObjective</a></div><div class="ttdeci">void AddCombatObjective(AIObjectiveCombat.CombatMode mode, Character target, float delay=0, Func&lt; AIObjective, bool &gt; abortCondition=null, Action onAbort=null, Action onCompleted=null, bool allowHoldFire=false, bool speakWarnings=false)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01582">HumanAIController.cs:1582</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a9b96cc3bca4ee7a43db80c0d3b922c8d"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a9b96cc3bca4ee7a43db80c0d3b922c8d">Barotrauma.HumanAIController.UnsafeHulls</a></div><div class="ttdeci">readonly HashSet&lt; Hull &gt; UnsafeHulls</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00042">HumanAIController.cs:42</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_a9c8b9a5e372b6aeea66f58e3464700fb"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#a9c8b9a5e372b6aeea66f58e3464700fb">Barotrauma.HumanAIController.SortTimer</a></div><div class="ttdeci">float SortTimer</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00018">HumanAIController.cs:18</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_aacaf643e5223e15dc7d9f521a1dfdcef"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#aacaf643e5223e15dc7d9f521a1dfdcef">Barotrauma.HumanAIController.FindSuitableContainer</a></div><div class="ttdeci">bool FindSuitableContainer(Item containableItem, out Item suitableContainer)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_aacded103df9a9932315afd077bac82b8"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#aacded103df9a9932315afd077bac82b8">Barotrauma.HumanAIController.IsBallastFloraNoticeable</a></div><div class="ttdeci">static bool IsBallastFloraNoticeable(Character character, Hull hull)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01157">HumanAIController.cs:1157</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_ab3cc74f2aa9698b548e0ea6bf94308c9"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#ab3cc74f2aa9698b548e0ea6bf94308c9">Barotrauma.HumanAIController.MentalStateManager</a></div><div class="ttdeci">MentalStateManager MentalStateManager</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00152">HumanAIController.cs:152</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_ab9ea048248123333a3708c64236035f9"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#ab9ea048248123333a3708c64236035f9">Barotrauma.HumanAIController.SelectTarget</a></div><div class="ttdeci">override void SelectTarget(AITarget target)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01651">HumanAIController.cs:1651</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_abad849441d0aab4d63661fd26abe4f22"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#abad849441d0aab4d63661fd26abe4f22">Barotrauma.HumanAIController.IsFriendly</a></div><div class="ttdeci">bool IsFriendly(Character other, bool onlySameTeam=false)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_abc2b725f802db1bf7e7874554bf6e67b"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#abc2b725f802db1bf7e7874554bf6e67b">Barotrauma.HumanAIController.IsTrueForAllBotsInTheCrew</a></div><div class="ttdeci">static bool IsTrueForAllBotsInTheCrew(Character character, Func&lt; HumanAIController, bool &gt; predicate)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02352">HumanAIController.cs:2352</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_ac28409294a53f30fc0d9dece975a6ad6"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#ac28409294a53f30fc0d9dece975a6ad6">Barotrauma.HumanAIController.ReportProblem</a></div><div class="ttdeci">static void ReportProblem(Character reporter, Order order, Hull targetHull=null)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01172">HumanAIController.cs:1172</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_ac5d5cba24f7f56a4bb46a10cee9c4d21"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#ac5d5cba24f7f56a4bb46a10cee9c4d21">Barotrauma.HumanAIController.HasDivingMask</a></div><div class="ttdeci">static bool HasDivingMask(Character character, float conditionPercentage=0, bool requireOxygenTank=true)</div><div class="ttdoc">Check whether the character has a diving mask in usable condition plus some oxygen.</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_ad0c7a74bae179d0e73ae18fc14aff2a2"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#ad0c7a74bae179d0e73ae18fc14aff2a2">Barotrauma.HumanAIController.HandleRelocation</a></div><div class="ttdeci">void HandleRelocation(Item item)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00850">HumanAIController.cs:850</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_ad694466240ac6fba2c227785bd96763d"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#ad694466240ac6fba2c227785bd96763d">Barotrauma.HumanAIController.Reset</a></div><div class="ttdeci">override void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01656">HumanAIController.cs:1656</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_adb3c687cdff4fc8bd540811fa2dd2aa2"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#adb3c687cdff4fc8bd540811fa2dd2aa2">Barotrauma.HumanAIController.PathSteering</a></div><div class="ttdeci">IndoorsSteeringManager PathSteering</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00114">HumanAIController.cs:114</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_adde6bb6df9e2cf22ea760e759171dff8"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#adde6bb6df9e2cf22ea760e759171dff8">Barotrauma.HumanAIController.RefreshTargets</a></div><div class="ttdeci">static void RefreshTargets(Character character, Order order, Hull hull)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02031">HumanAIController.cs:2031</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_ae0f1090677d29bc143bbce658d7ed15f"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#ae0f1090677d29bc143bbce658d7ed15f">Barotrauma.HumanAIController.ReportRange</a></div><div class="ttdeci">float ReportRange</div><div class="ttdoc">How far other characters can hear reports done by this character (e.g. reports for fires,...</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00080">HumanAIController.cs:80</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_ae7c93a9780779ac98bfcf3db3b9f0689"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#ae7c93a9780779ac98bfcf3db3b9f0689">Barotrauma.HumanAIController.InitMentalStateManager</a></div><div class="ttdeci">void InitMentalStateManager()</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00154">HumanAIController.cs:154</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_aeed0dd457fc91a72bc684ba3f6bd36ae"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#aeed0dd457fc91a72bc684ba3f6bd36ae">Barotrauma.HumanAIController.ShipCommandManager</a></div><div class="ttdeci">ShipCommandManager ShipCommandManager</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00172">HumanAIController.cs:172</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_aef208273059f23b7e03a7bf77c89854d"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#aef208273059f23b7e03a7bf77c89854d">Barotrauma.HumanAIController.IsMentallyUnstable</a></div><div class="ttdeci">override bool IsMentallyUnstable</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l00163">HumanAIController.cs:163</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_aef653f4dc4d4a6b88773e5262de95130"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#aef653f4dc4d4a6b88773e5262de95130">Barotrauma.HumanAIController.Escape</a></div><div class="ttdeci">override bool Escape(float deltaTime)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_af0be14fd379aaf0a6d748b64f7290b70"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#af0be14fd379aaf0a6d748b64f7290b70">Barotrauma.HumanAIController.StructureDamaged</a></div><div class="ttdeci">static void StructureDamaged(Structure structure, float damageAmount, Character character)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l01789">HumanAIController.cs:1789</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_human_a_i_controller_html_aff76b71f3de4decebe20273da9f3a17f"><div class="ttname"><a href="class_barotrauma_1_1_human_a_i_controller.html#aff76b71f3de4decebe20273da9f3a17f">Barotrauma.HumanAIController.GetHullSafety</a></div><div class="ttdeci">static float GetHullSafety(Hull hull, IEnumerable&lt; Hull &gt; visibleHulls, Character character, bool ignoreWater=false, bool ignoreOxygen=false, bool ignoreFire=false, bool ignoreEnemies=false)</div><div class="ttdef"><b>Definition:</b> <a href="_human_a_i_controller_8cs_source.html#l02244">HumanAIController.cs:2244</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_humanoid_anim_controller_html"><div class="ttname"><a href="class_barotrauma_1_1_humanoid_anim_controller.html">Barotrauma.HumanoidAnimController</a></div><div class="ttdef"><b>Definition:</b> <a href="_humanoid_anim_controller_8cs_source.html#l00011">HumanoidAnimController.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_indoors_steering_manager_html"><div class="ttname"><a href="class_barotrauma_1_1_indoors_steering_manager.html">Barotrauma.IndoorsSteeringManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_indoors_steering_manager_8cs_source.html#l00010">IndoorsSteeringManager.cs:11</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_indoors_steering_manager_html_a1f665eefa911b9f82d3247221fbc284a"><div class="ttname"><a href="class_barotrauma_1_1_indoors_steering_manager.html#a1f665eefa911b9f82d3247221fbc284a">Barotrauma.IndoorsSteeringManager.IsPathDirty</a></div><div class="ttdeci">bool IsPathDirty</div><div class="ttdef"><b>Definition:</b> <a href="_indoors_steering_manager_8cs_source.html#l00046">IndoorsSteeringManager.cs:47</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_indoors_steering_manager_html_a503526fa24d6a40ad3267d4d685b1428"><div class="ttname"><a href="class_barotrauma_1_1_indoors_steering_manager.html#a503526fa24d6a40ad3267d4d685b1428">Barotrauma.IndoorsSteeringManager.IsNextLadderSameAsCurrent</a></div><div class="ttdeci">bool IsNextLadderSameAsCurrent</div><div class="ttdef"><b>Definition:</b> <a href="_indoors_steering_manager_8cs_source.html#l00061">IndoorsSteeringManager.cs:62</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_indoors_steering_manager_html_ad57557a70977f4db56cf0aedfb920014"><div class="ttname"><a href="class_barotrauma_1_1_indoors_steering_manager.html#ad57557a70977f4db56cf0aedfb920014">Barotrauma.IndoorsSteeringManager.CurrentPath</a></div><div class="ttdeci">SteeringPath CurrentPath</div><div class="ttdef"><b>Definition:</b> <a href="_indoors_steering_manager_8cs_source.html#l00036">IndoorsSteeringManager.cs:37</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_indoors_steering_manager_html_ae74063b11d4b2611da7b0afeb2eddd61"><div class="ttname"><a href="class_barotrauma_1_1_indoors_steering_manager.html#ae74063b11d4b2611da7b0afeb2eddd61">Barotrauma.IndoorsSteeringManager.ResetPath</a></div><div class="ttdeci">void ResetPath()</div><div class="ttdef"><b>Definition:</b> <a href="_indoors_steering_manager_8cs_source.html#l00111">IndoorsSteeringManager.cs:111</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_inventory_html"><div class="ttname"><a href="class_barotrauma_1_1_inventory.html">Barotrauma.Inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_inventory_8cs_source.html#l00011">BarotraumaShared/SharedSource/Items/Inventory.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_inventory_html_a988d2f59f72f564d14c7151f45504b00"><div class="ttname"><a href="class_barotrauma_1_1_inventory.html#a988d2f59f72f564d14c7151f45504b00">Barotrauma.Inventory.FindItem</a></div><div class="ttdeci">Item FindItem(Func&lt; Item, bool &gt; predicate, bool recursive)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_inventory_8cs_source.html#l00996">BarotraumaShared/SharedSource/Items/Inventory.cs:996</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_inventory_html_ad814ac0478b6ce6f96b9e712f993fb11"><div class="ttname"><a href="class_barotrauma_1_1_inventory.html#ad814ac0478b6ce6f96b9e712f993fb11">Barotrauma.Inventory.FindAllItems</a></div><div class="ttdeci">List&lt; Item &gt; FindAllItems(Func&lt; Item, bool &gt; predicate=null, bool recursive=false, List&lt; Item &gt; list=null)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_inventory_8cs_source.html#l01012">BarotraumaShared/SharedSource/Items/Inventory.cs:1012</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html"><div class="ttname"><a href="class_barotrauma_1_1_item.html">Barotrauma.Item</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00025">BarotraumaShared/SharedSource/Items/Item.cs:26</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_a0974e4e4e433da549bae4e2eb500ee9e"><div class="ttname"><a href="class_barotrauma_1_1_item.html#a0974e4e4e433da549bae4e2eb500ee9e">Barotrauma.Item.Drop</a></div><div class="ttdeci">void Drop(Character dropper, bool createNetworkEvent=true, bool setTransform=true)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l03390">BarotraumaShared/SharedSource/Items/Item.cs:3390</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_a0ad6a95eae5e7020973b9c6ed1a10e01"><div class="ttname"><a href="class_barotrauma_1_1_item.html#a0ad6a95eae5e7020973b9c6ed1a10e01">Barotrauma.Item.OwnInventory</a></div><div class="ttdeci">ItemInventory OwnInventory</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00952">BarotraumaShared/SharedSource/Items/Item.cs:953</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_a3af1b8ac75aa29cd1cfe1845b946b847"><div class="ttname"><a href="class_barotrauma_1_1_item.html#a3af1b8ac75aa29cd1cfe1845b946b847">Barotrauma.Item.CurrentHull</a></div><div class="ttdeci">Hull CurrentHull</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00070">BarotraumaShared/SharedSource/Items/Item.cs:71</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_a42c7b082301409385365c7bbf8852721"><div class="ttname"><a href="class_barotrauma_1_1_item.html#a42c7b082301409385365c7bbf8852721">Barotrauma.Item.Repairables</a></div><div class="ttdeci">List&lt; Repairable &gt; Repairables</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00964">BarotraumaShared/SharedSource/Items/Item.cs:965</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_a49699af85870244611e577ee5ecaaea9"><div class="ttname"><a href="class_barotrauma_1_1_item.html#a49699af85870244611e577ee5ecaaea9">Barotrauma.Item.SetTransform</a></div><div class="ttdeci">void SetTransform(Vector2 simPosition, float rotation, bool findNewHull=true, bool setPrevTransform=true)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l01569">BarotraumaShared/SharedSource/Items/Item.cs:1569</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_a6a9ee69836227da4bdf8e200218deb42"><div class="ttname"><a href="class_barotrauma_1_1_item.html#a6a9ee69836227da4bdf8e200218deb42">Barotrauma.Item.Illegitimate</a></div><div class="ttdeci">bool Illegitimate</div><div class="ttdoc">Item shouldn't be in the player's inventory. If the guards find it, they will consider it as a theft.</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00782">BarotraumaShared/SharedSource/Items/Item.cs:782</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_a6cd68ba1f017dc7399ec9a24fe0350c5"><div class="ttname"><a href="class_barotrauma_1_1_item.html#a6cd68ba1f017dc7399ec9a24fe0350c5">Barotrauma.Item.SecondaryUse</a></div><div class="ttdeci">void SecondaryUse(float deltaTime, Character character=null)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l03273">BarotraumaShared/SharedSource/Items/Item.cs:3273</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_a7a3a8187074e14dd36c6c193528cca4c"><div class="ttname"><a href="class_barotrauma_1_1_item.html#a7a3a8187074e14dd36c6c193528cca4c">Barotrauma.Item.SpawnedInCurrentOutpost</a></div><div class="ttdeci">bool?? SpawnedInCurrentOutpost</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00785">BarotraumaShared/SharedSource/Items/Item.cs:786</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_a95b787ce0509a3cd991a3fc5cc6eca17"><div class="ttname"><a href="class_barotrauma_1_1_item.html#a95b787ce0509a3cd991a3fc5cc6eca17">Barotrauma.Item.RepairableItems</a></div><div class="ttdeci">static IReadOnlyCollection&lt; Item &gt; RepairableItems</div><div class="ttdoc">Items that have one more more Repairable component</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00038">BarotraumaShared/SharedSource/Items/Item.cs:38</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_aa3f01eda2fb6109936ae9a1f6f4b6f8d"><div class="ttname"><a href="class_barotrauma_1_1_item.html#aa3f01eda2fb6109936ae9a1f6f4b6f8d">Barotrauma.Item.HasTag</a></div><div class="ttdeci">bool HasTag(Identifier tag)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l01873">BarotraumaShared/SharedSource/Items/Item.cs:1873</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_aca9ef98dee6df2d1817c24f2caeb01ed"><div class="ttname"><a href="class_barotrauma_1_1_item.html#aca9ef98dee6df2d1817c24f2caeb01ed">Barotrauma.Item.Item</a></div><div class="ttdeci">Item(ItemPrefab itemPrefab, Vector2 position, Submarine submarine, ushort id=Entity.NullEntityID, bool callOnItemLoaded=true)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l01066">BarotraumaShared/SharedSource/Items/Item.cs:1066</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_acf43e7d220cd1845e7fa872bfdffa11d"><div class="ttname"><a href="class_barotrauma_1_1_item.html#acf43e7d220cd1845e7fa872bfdffa11d">Barotrauma.Item.StolenDuringRound</a></div><div class="ttdeci">bool StolenDuringRound</div><div class="ttdoc">Was the item stolen during the current round. Note that it's possible for the items to be found in th...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00777">BarotraumaShared/SharedSource/Items/Item.cs:777</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_aeb79548f68eece867df33771dbc21d3a"><div class="ttname"><a href="class_barotrauma_1_1_item.html#aeb79548f68eece867df33771dbc21d3a">Barotrauma.Item.RootContainer</a></div><div class="ttdeci">Item RootContainer</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00263">BarotraumaShared/SharedSource/Items/Item.cs:264</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_af1eecd9e315fb74061eff019637226af"><div class="ttname"><a href="class_barotrauma_1_1_item.html#af1eecd9e315fb74061eff019637226af">Barotrauma.Item.GetRootInventoryOwner</a></div><div class="ttdeci">Entity GetRootInventoryOwner()</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l01824">BarotraumaShared/SharedSource/Items/Item.cs:1824</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_html_af7f1cf26f2680bbdfbecf5d5ca65f521"><div class="ttname"><a href="class_barotrauma_1_1_item.html#af7f1cf26f2680bbdfbecf5d5ca65f521">Barotrauma.Item.Prefab</a></div><div class="ttdeci">new ItemPrefab Prefab</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_8cs_source.html#l00061">BarotraumaShared/SharedSource/Items/Item.cs:61</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_inventory_html_a03187469e4717755b080ce2a8624cad9"><div class="ttname"><a href="class_barotrauma_1_1_item_inventory.html#a03187469e4717755b080ce2a8624cad9">Barotrauma.ItemInventory.TryPutItem</a></div><div class="ttdeci">override bool TryPutItem(Item item, Character user, IEnumerable&lt; InvSlotType &gt; allowedSlots=null, bool createNetworkEvent=true, bool ignoreCondition=false)</div><div class="ttdoc">If there is room, puts the item in the inventory and returns true, otherwise returns false</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_item_inventory_8cs_source.html#l00091">BarotraumaShared/SharedSource/Items/ItemInventory.cs:91</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_item_prefab_html_aa9ac26311b19cde190468adfdbe5b4d5"><div class="ttname"><a href="class_barotrauma_1_1_item_prefab.html#aa9ac26311b19cde190468adfdbe5b4d5">Barotrauma.ItemPrefab.GetMinPrice</a></div><div class="ttdeci">int? GetMinPrice()</div><div class="ttdef"><b>Definition:</b> <a href="_item_prefab_8cs_source.html#l01437">ItemPrefab.cs:1437</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_controller_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_controller.html">Barotrauma.Items.Components.Controller</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_machines_2_controller_8cs_source.html#l00033">BarotraumaShared/SharedSource/Items/Components/Machines/Controller.cs:34</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_deconstructor_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_deconstructor.html">Barotrauma.Items.Components.Deconstructor</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_machines_2_deconstructor_8cs_source.html#l00012">BarotraumaShared/SharedSource/Items/Components/Machines/Deconstructor.cs:13</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_docking_port_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_docking_port.html">Barotrauma.Items.Components.DockingPort</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_docking_port_8cs_source.html#l00016">BarotraumaShared/SharedSource/Items/Components/DockingPort.cs:17</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_fabricator_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_fabricator.html">Barotrauma.Items.Components.Fabricator</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_machines_2_fabricator_8cs_source.html#l00014">BarotraumaShared/SharedSource/Items/Components/Machines/Fabricator.cs:15</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_item_component_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_item_component.html">Barotrauma.Items.Components.ItemComponent</a></div><div class="ttdoc">The base class for components holding the different functionalities of the item</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_item_component_8cs_source.html#l00034">BarotraumaShared/SharedSource/Items/Components/ItemComponent.cs:35</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_item_component_html_a01a0f6be5502a91a956080502cd65f46"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_item_component.html#a01a0f6be5502a91a956080502cd65f46">Barotrauma.Items.Components.ItemComponent.Item</a></div><div class="ttdeci">Item Item</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_item_component_8cs_source.html#l00243">BarotraumaShared/SharedSource/Items/Components/ItemComponent.cs:244</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_item_container_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_item_container.html">Barotrauma.Items.Components.ItemContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="_item_container_8cs_source.html#l00014">ItemContainer.cs:15</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_level_resource_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_level_resource.html">Barotrauma.Items.Components.LevelResource</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_holdable_2_level_resource_8cs_source.html#l00009">BarotraumaShared/SharedSource/Items/Components/Holdable/LevelResource.cs:10</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_items_1_1_components_1_1_steering_html"><div class="ttname"><a href="class_barotrauma_1_1_items_1_1_components_1_1_steering.html">Barotrauma.Items.Components.Steering</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_machines_2_steering_8cs_source.html#l00013">BarotraumaShared/SharedSource/Items/Components/Machines/Steering.cs:14</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_job_html_af4cb0732f2e3b7f6c9832f70415ba14d"><div class="ttname"><a href="class_barotrauma_1_1_job.html#af4cb0732f2e3b7f6c9832f70415ba14d">Barotrauma.Job.Prefab</a></div><div class="ttdeci">JobPrefab Prefab</div><div class="ttdef"><b>Definition:</b> <a href="_job_8cs_source.html#l00018">Job.cs:18</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_level_data_html"><div class="ttname"><a href="class_barotrauma_1_1_level_data.html">Barotrauma.LevelData</a></div><div class="ttdef"><b>Definition:</b> <a href="_level_data_8cs_source.html#l00012">LevelData.cs:13</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_level_data_html_aadf84baa855eb1857a598059879a58af"><div class="ttname"><a href="class_barotrauma_1_1_level_data.html#aadf84baa855eb1857a598059879a58af">Barotrauma.LevelData.LevelType</a></div><div class="ttdeci">LevelType</div><div class="ttdef"><b>Definition:</b> <a href="_level_data_8cs_source.html#l00014">LevelData.cs:15</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_level_html"><div class="ttname"><a href="class_barotrauma_1_1_level.html">Barotrauma.Level</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_levels_2_level_8cs_source.html#l00018">BarotraumaShared/SharedSource/Map/Levels/Level.cs:19</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_level_html_a685132046d04b15a02c250605ed5d8a0"><div class="ttname"><a href="class_barotrauma_1_1_level.html#a685132046d04b15a02c250605ed5d8a0">Barotrauma.Level.Type</a></div><div class="ttdeci">LevelData.LevelType Type</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_levels_2_level_8cs_source.html#l00446">BarotraumaShared/SharedSource/Map/Levels/Level.cs:447</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_level_html_aeed512e4f70bc4531e552987114975f3"><div class="ttname"><a href="class_barotrauma_1_1_level.html#aeed512e4f70bc4531e552987114975f3">Barotrauma.Level.Loaded</a></div><div class="ttdeci">static Level? Loaded</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_levels_2_level_8cs_source.html#l00056">BarotraumaShared/SharedSource/Map/Levels/Level.cs:57</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_limb_html_a85bd84fc2b5fc1f52213b0162be36bbe"><div class="ttname"><a href="class_barotrauma_1_1_limb.html#a85bd84fc2b5fc1f52213b0162be36bbe">Barotrauma.Limb.body</a></div><div class="ttdeci">PhysicsBody body</div><div class="ttdef"><b>Definition:</b> <a href="_limb_8cs_source.html#l00217">Limb.cs:217</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_localized_string_html"><div class="ttname"><a href="class_barotrauma_1_1_localized_string.html">Barotrauma.LocalizedString</a></div><div class="ttdef"><b>Definition:</b> <a href="_localized_string_8cs_source.html#l00007">LocalizedString.cs:8</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_localized_string_html_a1d49a0b0daba172e0f369a9d23cae293"><div class="ttname"><a href="class_barotrauma_1_1_localized_string.html#a1d49a0b0daba172e0f369a9d23cae293">Barotrauma.LocalizedString.Value</a></div><div class="ttdeci">string Value</div><div class="ttdef"><b>Definition:</b> <a href="_localized_string_8cs_source.html#l00020">LocalizedString.cs:21</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_location_html_a71b9c12b44376b8fb7eead7606091a29"><div class="ttname"><a href="class_barotrauma_1_1_location.html#a71b9c12b44376b8fb7eead7606091a29">Barotrauma.Location.Reputation</a></div><div class="ttdeci">Reputation Reputation</div><div class="ttdef"><b>Definition:</b> <a href="_location_8cs_source.html#l00106">Location.cs:106</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_map_entity_html_af5976c06cfb77b17cd2e21321b846bf5"><div class="ttname"><a href="class_barotrauma_1_1_map_entity.html#af5976c06cfb77b17cd2e21321b846bf5">Barotrauma.MapEntity.SimPosition</a></div><div class="ttdeci">override Vector2 SimPosition</div><div class="ttdef"><b>Definition:</b> <a href="_map_entity_8cs_source.html#l00226">MapEntity.cs:227</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_map_html_a43c712ecf38cc51c9fdc7d9dc1613530"><div class="ttname"><a href="class_barotrauma_1_1_map.html#a43c712ecf38cc51c9fdc7d9dc1613530">Barotrauma.Map.CurrentLocation</a></div><div class="ttdeci">Location CurrentLocation</div><div class="ttdef"><b>Definition:</b> <a href="_map_8cs_source.html#l00047">Map.cs:47</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_mental_state_manager_html"><div class="ttname"><a href="class_barotrauma_1_1_mental_state_manager.html">Barotrauma.MentalStateManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_mental_state_manager_8cs_source.html#l00007">MentalStateManager.cs:8</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_mental_state_manager_html_a119d6bf6fec6bbc40b715791e722d877"><div class="ttname"><a href="class_barotrauma_1_1_mental_state_manager.html#a119d6bf6fec6bbc40b715791e722d877">Barotrauma.MentalStateManager.MentalType</a></div><div class="ttdeci">MentalType</div><div class="ttdef"><b>Definition:</b> <a href="_mental_state_manager_8cs_source.html#l00020">MentalStateManager.cs:21</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_mental_state_manager_html_ad17ba54eec099664a2bb6de06b64513c"><div class="ttname"><a href="class_barotrauma_1_1_mental_state_manager.html#ad17ba54eec099664a2bb6de06b64513c">Barotrauma.MentalStateManager.Active</a></div><div class="ttdeci">bool Active</div><div class="ttdef"><b>Definition:</b> <a href="_mental_state_manager_8cs_source.html#l00018">MentalStateManager.cs:18</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_mental_state_manager_html_af97cd94250c3a434b9e12d5d6ce40559"><div class="ttname"><a href="class_barotrauma_1_1_mental_state_manager.html#af97cd94250c3a434b9e12d5d6ce40559">Barotrauma.MentalStateManager.Update</a></div><div class="ttdeci">void Update(float deltaTime)</div><div class="ttdef"><b>Definition:</b> <a href="_mental_state_manager_8cs_source.html#l00037">MentalStateManager.cs:37</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_networking_1_1_game_server_html_a21530a39b7bb72e2855afb61d41ff9c5"><div class="ttname"><a href="class_barotrauma_1_1_networking_1_1_game_server.html#a21530a39b7bb72e2855afb61d41ff9c5">Barotrauma.Networking.GameServer.SendOrderChatMessage</a></div><div class="ttdeci">void SendOrderChatMessage(OrderChatMessage message)</div><div class="ttdef"><b>Definition:</b> <a href="_game_server_8cs_source.html#l03908">GameServer.cs:3908</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_networking_1_1_order_chat_message_html"><div class="ttname"><a href="class_barotrauma_1_1_networking_1_1_order_chat_message.html">Barotrauma.Networking.OrderChatMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_networking_2_order_chat_message_8cs_source.html#l00006">BarotraumaShared/SharedSource/Networking/OrderChatMessage.cs:7</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_order_html"><div class="ttname"><a href="class_barotrauma_1_1_order.html">Barotrauma.Order</a></div><div class="ttdef"><b>Definition:</b> <a href="_order_8cs_source.html#l00475">Order.cs:476</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_order_html_a1aa89e24c621eaac2118fcacfba21b59"><div class="ttname"><a href="class_barotrauma_1_1_order.html#a1aa89e24c621eaac2118fcacfba21b59">Barotrauma.Order.GetChatMessage</a></div><div class="ttdeci">string GetChatMessage(string targetCharacterName, string targetRoomName, bool givingOrderToSelf, Identifier orderOption=default, bool isNewOrder=true)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_order_html_a47c753484ae184f85d0f741267c363b9"><div class="ttname"><a href="class_barotrauma_1_1_order.html#a47c753484ae184f85d0f741267c363b9">Barotrauma.Order.FadeOutTime</a></div><div class="ttdeci">float FadeOutTime</div><div class="ttdef"><b>Definition:</b> <a href="_order_8cs_source.html#l00549">Order.cs:549</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_order_html_a82c49476e032da234e238c17614484ca"><div class="ttname"><a href="class_barotrauma_1_1_order.html#a82c49476e032da234e238c17614484ca">Barotrauma.Order.WithTargetEntity</a></div><div class="ttdeci">Order WithTargetEntity(Entity entity)</div><div class="ttdef"><b>Definition:</b> <a href="_order_8cs_source.html#l00720">Order.cs:720</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_order_html_ac247e0ad3746c6b975aaea68cbd27d9d"><div class="ttname"><a href="class_barotrauma_1_1_order.html#ac247e0ad3746c6b975aaea68cbd27d9d">Barotrauma.Order.Identifier</a></div><div class="ttdeci">Identifier Identifier</div><div class="ttdef"><b>Definition:</b> <a href="_order_8cs_source.html#l00536">Order.cs:536</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_order_html_afd9fcb4c025809bbb8ad1c5b67b55ffe"><div class="ttname"><a href="class_barotrauma_1_1_order.html#afd9fcb4c025809bbb8ad1c5b67b55ffe">Barotrauma.Order.WithOrderGiver</a></div><div class="ttdeci">Order WithOrderGiver(Character orderGiver)</div><div class="ttdef"><b>Definition:</b> <a href="_order_8cs_source.html#l00710">Order.cs:710</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_order_prefab_html"><div class="ttname"><a href="class_barotrauma_1_1_order_prefab.html">Barotrauma.OrderPrefab</a></div><div class="ttdef"><b>Definition:</b> <a href="_order_8cs_source.html#l00039">Order.cs:40</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_order_prefab_html_a786aabbf73f4f610e7d7d7e9ab62f79e"><div class="ttname"><a href="class_barotrauma_1_1_order_prefab.html#a786aabbf73f4f610e7d7d7e9ab62f79e">Barotrauma.OrderPrefab.Prefabs</a></div><div class="ttdeci">static readonly PrefabCollection&lt; OrderPrefab &gt; Prefabs</div><div class="ttdef"><b>Definition:</b> <a href="_order_8cs_source.html#l00041">Order.cs:41</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_physics_body_html"><div class="ttname"><a href="class_barotrauma_1_1_physics_body.html">Barotrauma.PhysicsBody</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_physics_2_physics_body_8cs_source.html#l00084">BarotraumaShared/SharedSource/Physics/PhysicsBody.cs:85</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_physics_body_html_a432b44f501d1529777510575950b56c4"><div class="ttname"><a href="class_barotrauma_1_1_physics_body.html#a432b44f501d1529777510575950b56c4">Barotrauma.PhysicsBody.Height</a></div><div class="ttdeci">float Height</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_physics_2_physics_body_8cs_source.html#l00122">BarotraumaShared/SharedSource/Physics/PhysicsBody.cs:122</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_physics_body_html_a8416b230635164418eca1ab198ccf59a"><div class="ttname"><a href="class_barotrauma_1_1_physics_body.html#a8416b230635164418eca1ab198ccf59a">Barotrauma.PhysicsBody.GetLocalFront</a></div><div class="ttdeci">Vector2 GetLocalFront(float? spritesheetRotation=null)</div><div class="ttdoc">Returns the farthest point towards the forward of the body. For capsules and circles,...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_physics_2_physics_body_8cs_source.html#l00505">BarotraumaShared/SharedSource/Physics/PhysicsBody.cs:505</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_physics_body_html_a903993a96687dbed0470519d36532804"><div class="ttname"><a href="class_barotrauma_1_1_physics_body.html#a903993a96687dbed0470519d36532804">Barotrauma.PhysicsBody.FarseerBody</a></div><div class="ttdeci">Body FarseerBody</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_physics_2_physics_body_8cs_source.html#l00305">BarotraumaShared/SharedSource/Physics/PhysicsBody.cs:305</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_physics_body_html_aba2ac13a9259c7f81dd86d18e49f8b71"><div class="ttname"><a href="class_barotrauma_1_1_physics_body.html#aba2ac13a9259c7f81dd86d18e49f8b71">Barotrauma.PhysicsBody.TransformedRotation</a></div><div class="ttdeci">float TransformedRotation</div><div class="ttdoc">Takes flipping (Dir) into account.</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_physics_2_physics_body_8cs_source.html#l00269">BarotraumaShared/SharedSource/Physics/PhysicsBody.cs:269</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_prefab_html_af02707f77b17e23dd22af51e35c45c81"><div class="ttname"><a href="class_barotrauma_1_1_prefab.html#af02707f77b17e23dd22af51e35c45c81">Barotrauma.Prefab.Identifier</a></div><div class="ttdeci">readonly Identifier Identifier</div><div class="ttdef"><b>Definition:</b> <a href="_prefab_8cs_source.html#l00034">Prefab.cs:34</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_a0642bf708cd9c0ee981e6e0928e91734"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#a0642bf708cd9c0ee981e6e0928e91734">Barotrauma.Ragdoll.TryGetCollider</a></div><div class="ttdeci">bool TryGetCollider(int index, out PhysicsBody collider)</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l00152">Ragdoll.cs:152</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_a1028fd1202927859e3f87212a776fc90"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#a1028fd1202927859e3f87212a776fc90">Barotrauma.Ragdoll.ImpactTolerance</a></div><div class="ttdeci">float?? ImpactTolerance</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l00317">Ragdoll.cs:318</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_a2bb82f86d6960ba6ca4ad28888c72bbf"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#a2bb82f86d6960ba6ca4ad28888c72bbf">Barotrauma.Ragdoll.TargetMovement</a></div><div class="ttdeci">Vector2? TargetMovement</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l00297">Ragdoll.cs:298</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_a6000f08b5552f46b4db28d53e48d671e"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#a6000f08b5552f46b4db28d53e48d671e">Barotrauma.Ragdoll.Collider</a></div><div class="ttdeci">PhysicsBody? Collider</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l00144">Ragdoll.cs:145</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_a63aaf8c7d4b1704790b6dfbdc25bcf6b"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#a63aaf8c7d4b1704790b6dfbdc25bcf6b">Barotrauma.Ragdoll.GetColliderBottom</a></div><div class="ttdeci">Vector2 GetColliderBottom()</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l02183">Ragdoll.cs:2183</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_a7fb59f06051c62ceb09ac96edb1e0884"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#a7fb59f06051c62ceb09ac96edb1e0884">Barotrauma.Ragdoll.GetLimb</a></div><div class="ttdeci">Limb GetLimb(LimbType limbType, bool excludeSevered=true, bool excludeLimbsWithSecondaryType=false, bool useSecondaryType=false)</div><div class="ttdoc">Note that if there are multiple limbs of the same type, only the first (valid) limb is returned.</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l02130">Ragdoll.cs:2130</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_a8a2db92b5713ce4515bc7ba21169ea1c"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#a8a2db92b5713ce4515bc7ba21169ea1c">Barotrauma.Ragdoll.InWater</a></div><div class="ttdeci">bool InWater</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l00345">Ragdoll.cs:346</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_aa8fbcedb9e22015a1cd454adaba20e77"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#aa8fbcedb9e22015a1cd454adaba20e77">Barotrauma.Ragdoll.IgnorePlatforms</a></div><div class="ttdeci">bool IgnorePlatforms</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l00373">Ragdoll.cs:373</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_ab92582f873ec7b6b76a57fe3e5a667ea"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#ab92582f873ec7b6b76a57fe3e5a667ea">Barotrauma.Ragdoll.HeadInWater</a></div><div class="ttdeci">bool HeadInWater</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l00350">Ragdoll.cs:351</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ragdoll_html_af272c6e59a0768620fabe69f017900a6"><div class="ttname"><a href="class_barotrauma_1_1_ragdoll.html#af272c6e59a0768620fabe69f017900a6">Barotrauma.Ragdoll.TargetDir</a></div><div class="ttdeci">Direction TargetDir</div><div class="ttdef"><b>Definition:</b> <a href="_ragdoll_8cs_source.html#l00135">Ragdoll.cs:135</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_reputation_html"><div class="ttname"><a href="class_barotrauma_1_1_reputation.html">Barotrauma.Reputation</a></div><div class="ttdef"><b>Definition:</b> <a href="_reputation_8cs_source.html#l00007">Reputation.cs:8</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_reputation_html_a20ff7a10a5745a47b243352bec843a74"><div class="ttname"><a href="class_barotrauma_1_1_reputation.html#a20ff7a10a5745a47b243352bec843a74">Barotrauma.Reputation.MaxReputationLossPerStolenItem</a></div><div class="ttdeci">const float MaxReputationLossPerStolenItem</div><div class="ttdef"><b>Definition:</b> <a href="_reputation_8cs_source.html#l00014">Reputation.cs:14</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_reputation_html_a270144fd889bab182f4ec8650902c0dd"><div class="ttname"><a href="class_barotrauma_1_1_reputation.html#a270144fd889bab182f4ec8650902c0dd">Barotrauma.Reputation.ReputationLossPerStolenItemPrice</a></div><div class="ttdeci">const float ReputationLossPerStolenItemPrice</div><div class="ttdef"><b>Definition:</b> <a href="_reputation_8cs_source.html#l00012">Reputation.cs:12</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_reputation_html_a36d8a2471dd03c4dfb1718b3000d9fed"><div class="ttname"><a href="class_barotrauma_1_1_reputation.html#a36d8a2471dd03c4dfb1718b3000d9fed">Barotrauma.Reputation.MaxReputationLossFromWallDamage</a></div><div class="ttdeci">const float MaxReputationLossFromWallDamage</div><div class="ttdoc">Maximum amount of reputation loss you can get from damaging outpost walls per round</div><div class="ttdef"><b>Definition:</b> <a href="_reputation_8cs_source.html#l00023">Reputation.cs:23</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_reputation_html_a46a50648e5cc396d715a710e38374837"><div class="ttname"><a href="class_barotrauma_1_1_reputation.html#a46a50648e5cc396d715a710e38374837">Barotrauma.Reputation.MinReputationLossPerStolenItem</a></div><div class="ttdeci">const float MinReputationLossPerStolenItem</div><div class="ttdef"><b>Definition:</b> <a href="_reputation_8cs_source.html#l00013">Reputation.cs:13</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_reputation_html_a861d98dd99980c9eb54ab3ef2385b1b4"><div class="ttname"><a href="class_barotrauma_1_1_reputation.html#a861d98dd99980c9eb54ab3ef2385b1b4">Barotrauma.Reputation.AddReputation</a></div><div class="ttdeci">void AddReputation(float reputationChange, float maxReputationChangePerRound=float.MaxValue)</div><div class="ttdef"><b>Definition:</b> <a href="_reputation_8cs_source.html#l00095">Reputation.cs:95</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_reputation_html_aa42c7367fc6e117008e04d7067cfab9e"><div class="ttname"><a href="class_barotrauma_1_1_reputation.html#aa42c7367fc6e117008e04d7067cfab9e">Barotrauma.Reputation.ReputationLossPerWallDamage</a></div><div class="ttdeci">const float ReputationLossPerWallDamage</div><div class="ttdef"><b>Definition:</b> <a href="_reputation_8cs_source.html#l00011">Reputation.cs:11</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ship_command_manager_html"><div class="ttname"><a href="class_barotrauma_1_1_ship_command_manager.html">Barotrauma.ShipCommandManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_ship_command_manager_8cs_source.html#l00009">ShipCommandManager.cs:10</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ship_command_manager_html_a12709b16c37897a381e939485080e160"><div class="ttname"><a href="class_barotrauma_1_1_ship_command_manager.html#a12709b16c37897a381e939485080e160">Barotrauma.ShipCommandManager.Active</a></div><div class="ttdeci">bool? Active</div><div class="ttdef"><b>Definition:</b> <a href="_ship_command_manager_8cs_source.html#l00015">ShipCommandManager.cs:16</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_ship_command_manager_html_a38f8ef70ed780e99bcec1c58c103a24c"><div class="ttname"><a href="class_barotrauma_1_1_ship_command_manager.html#a38f8ef70ed780e99bcec1c58c103a24c">Barotrauma.ShipCommandManager.Update</a></div><div class="ttdeci">void Update(float deltaTime)</div><div class="ttdef"><b>Definition:</b> <a href="_ship_command_manager_8cs_source.html#l00076">ShipCommandManager.cs:76</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_steering_manager_html"><div class="ttname"><a href="class_barotrauma_1_1_steering_manager.html">Barotrauma.SteeringManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_steering_manager_8cs_source.html#l00007">SteeringManager.cs:8</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_steering_manager_html_a505c734fb26e15edc5c16be2e1a440be"><div class="ttname"><a href="class_barotrauma_1_1_steering_manager.html#a505c734fb26e15edc5c16be2e1a440be">Barotrauma.SteeringManager.Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdef"><b>Definition:</b> <a href="_steering_manager_8cs_source.html#l00064">SteeringManager.cs:64</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_steering_manager_html_ab8a028abf3763373bf2e265d4695a4f5"><div class="ttname"><a href="class_barotrauma_1_1_steering_manager.html#ab8a028abf3763373bf2e265d4695a4f5">Barotrauma.SteeringManager.Update</a></div><div class="ttdeci">virtual void Update(float speed)</div><div class="ttdoc">Update speed for the steering. Should normally match the characters current animation speed.</div><div class="ttdef"><b>Definition:</b> <a href="_steering_manager_8cs_source.html#l00080">SteeringManager.cs:80</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_steering_path_html_a2adcad94a5e194e40176ddb685f1706b"><div class="ttname"><a href="class_barotrauma_1_1_steering_path.html#a2adcad94a5e194e40176ddb685f1706b">Barotrauma.SteeringPath.HasOutdoorsNodes</a></div><div class="ttdeci">bool HasOutdoorsNodes</div><div class="ttdef"><b>Definition:</b> <a href="_steering_path_8cs_source.html#l00083">SteeringPath.cs:84</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_steering_path_html_a9fda1adc1715c8179a8ee6c6f93d01e7"><div class="ttname"><a href="class_barotrauma_1_1_steering_path.html#a9fda1adc1715c8179a8ee6c6f93d01e7">Barotrauma.SteeringPath.CurrentNode</a></div><div class="ttdeci">WayPoint CurrentNode</div><div class="ttdef"><b>Definition:</b> <a href="_steering_path_8cs_source.html#l00109">SteeringPath.cs:110</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_steering_path_html_ac13fcccb0bd12ebad6dc918f2eeeb4c2"><div class="ttname"><a href="class_barotrauma_1_1_steering_path.html#ac13fcccb0bd12ebad6dc918f2eeeb4c2">Barotrauma.SteeringPath.Nodes</a></div><div class="ttdeci">List&lt; WayPoint &gt; Nodes</div><div class="ttdef"><b>Definition:</b> <a href="_steering_path_8cs_source.html#l00120">SteeringPath.cs:121</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_steering_path_html_adef471cee1fa31581193552336c70acf"><div class="ttname"><a href="class_barotrauma_1_1_steering_path.html#adef471cee1fa31581193552336c70acf">Barotrauma.SteeringPath.Unreachable</a></div><div class="ttdeci">bool Unreachable</div><div class="ttdef"><b>Definition:</b> <a href="_steering_path_8cs_source.html#l00015">SteeringPath.cs:16</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_structure_html"><div class="ttname"><a href="class_barotrauma_1_1_structure.html">Barotrauma.Structure</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_structure_8cs_source.html#l00048">BarotraumaShared/SharedSource/Map/Structure.cs:49</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_structure_html_a0b636e166b73f851b39cbb29f5c6d1a8"><div class="ttname"><a href="class_barotrauma_1_1_structure.html#a0b636e166b73f851b39cbb29f5c6d1a8">Barotrauma.Structure.Prefab</a></div><div class="ttdeci">new StructurePrefab Prefab</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_structure_8cs_source.html#l00171">BarotraumaShared/SharedSource/Map/Structure.cs:171</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_structure_prefab_html_a8c32cc8733d2520d8ee8a8e6a2e9cc3c"><div class="ttname"><a href="class_barotrauma_1_1_structure_prefab.html#a8c32cc8733d2520d8ee8a8e6a2e9cc3c">Barotrauma.StructurePrefab.IndestructibleInOutposts</a></div><div class="ttdeci">bool IndestructibleInOutposts</div><div class="ttdef"><b>Definition:</b> <a href="_structure_prefab_8cs_source.html#l00085">StructurePrefab.cs:85</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html">Barotrauma.Submarine</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00024">BarotraumaShared/SharedSource/Map/Submarine.cs:25</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_a041697ba7af693867f92db324facc88a"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#a041697ba7af693867f92db324facc88a">Barotrauma.Submarine.ConnectedDockingPorts</a></div><div class="ttdeci">readonly Dictionary&lt; Submarine, DockingPort &gt; ConnectedDockingPorts</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00086">BarotraumaShared/SharedSource/Map/Submarine.cs:86</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_a4cea8a12911102661d8b43630298b528"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#a4cea8a12911102661d8b43630298b528">Barotrauma.Submarine.MainSub</a></div><div class="ttdeci">static Submarine MainSub</div><div class="ttdoc">Note that this can be null in some situations, e.g. editors and missions that don't load a submarine.</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00069">BarotraumaShared/SharedSource/Map/Submarine.cs:70</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_a56b6a4520428f6bbf537b4c81241e796"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#a56b6a4520428f6bbf537b4c81241e796">Barotrauma.Submarine.CheckVisibility</a></div><div class="ttdeci">static Body CheckVisibility(Vector2 rayStart, Vector2 rayEnd, bool ignoreLevel=false, bool ignoreSubs=false, bool ignoreSensors=true, bool ignoreDisabledWalls=true, bool ignoreBranches=true, Predicate&lt; Fixture &gt; blocksVisibilityPredicate=null)</div><div class="ttdoc">Check visibility between two points (in sim units).</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00989">BarotraumaShared/SharedSource/Map/Submarine.cs:989</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_a5e89de71b527daea5d9399a96ad2e1ea"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#a5e89de71b527daea5d9399a96ad2e1ea">Barotrauma.Submarine.GetConnectedSubs</a></div><div class="ttdeci">IEnumerable&lt; Submarine &gt; GetConnectedSubs()</div><div class="ttdoc">Returns a list of all submarines that are connected to this one via docking ports,...</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00500">BarotraumaShared/SharedSource/Map/Submarine.cs:500</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_ab17558cd52d477cc90e79eec566c4df8"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#ab17558cd52d477cc90e79eec566c4df8">Barotrauma.Submarine.SimPosition</a></div><div class="ttdeci">override Vector2 SimPosition</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00312">BarotraumaShared/SharedSource/Map/Submarine.cs:313</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_acc871c559a26cec98a490ef7d9b2de6e"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#acc871c559a26cec98a490ef7d9b2de6e">Barotrauma.Submarine.PhysicsBody</a></div><div class="ttdeci">PhysicsBody? PhysicsBody</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00158">BarotraumaShared/SharedSource/Map/Submarine.cs:159</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_ae3f04bc9ceda5910df5479c7e3f70cb1"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#ae3f04bc9ceda5910df5479c7e3f70cb1">Barotrauma.Submarine.GetHulls</a></div><div class="ttdeci">List&lt; Hull &gt; GetHulls(bool alsoFromConnectedSubs)</div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_ae9fcc64a1607cde7d8a6267f2cb5f36a"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#ae9fcc64a1607cde7d8a6267f2cb5f36a">Barotrauma.Submarine.Info</a></div><div class="ttdeci">SubmarineInfo Info</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00026">BarotraumaShared/SharedSource/Map/Submarine.cs:26</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_af0021304c59f91a731965107f9a86837"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#af0021304c59f91a731965107f9a86837">Barotrauma.Submarine.PickBody</a></div><div class="ttdeci">static Body PickBody(Vector2 rayStart, Vector2 rayEnd, IEnumerable&lt; Body &gt; ignoredBodies=null, Category? collisionCategory=null, bool ignoreSensors=true, Predicate&lt; Fixture &gt; customPredicate=null, bool allowInsideFixture=false)</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00813">BarotraumaShared/SharedSource/Map/Submarine.cs:813</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_html_af47d96c389dda4ea16cacf8b201c15d2"><div class="ttname"><a href="class_barotrauma_1_1_submarine.html#af47d96c389dda4ea16cacf8b201c15d2">Barotrauma.Submarine.TeamID</a></div><div class="ttdeci">CharacterTeamType TeamID</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00028">BarotraumaShared/SharedSource/Map/Submarine.cs:28</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_info_html_a54e8f6fa2c36228025302a9745fda0c9"><div class="ttname"><a href="class_barotrauma_1_1_submarine_info.html#a54e8f6fa2c36228025302a9745fda0c9">Barotrauma.SubmarineInfo.IsRuin</a></div><div class="ttdeci">bool IsRuin</div><div class="ttdef"><b>Definition:</b> <a href="_submarine_info_8cs_source.html#l00138">SubmarineInfo.cs:138</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_info_html_a9d3626dd91e666630a47932089f2b647"><div class="ttname"><a href="class_barotrauma_1_1_submarine_info.html#a9d3626dd91e666630a47932089f2b647">Barotrauma.SubmarineInfo.IsOutpost</a></div><div class="ttdeci">bool IsOutpost</div><div class="ttdef"><b>Definition:</b> <a href="_submarine_info_8cs_source.html#l00132">SubmarineInfo.cs:132</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_info_html_acd102b30b8c1a230be4401f91e2c712f"><div class="ttname"><a href="class_barotrauma_1_1_submarine_info.html#acd102b30b8c1a230be4401f91e2c712f">Barotrauma.SubmarineInfo.IsWreck</a></div><div class="ttdeci">bool IsWreck</div><div class="ttdef"><b>Definition:</b> <a href="_submarine_info_8cs_source.html#l00134">SubmarineInfo.cs:134</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_submarine_info_html_ae9f97d09336d1f0c1f9f2f6c47c5fd0d"><div class="ttname"><a href="class_barotrauma_1_1_submarine_info.html#ae9f97d09336d1f0c1f9f2f6c47c5fd0d">Barotrauma.SubmarineInfo.HasTag</a></div><div class="ttdeci">bool HasTag(SubmarineTag tag)</div><div class="ttdef"><b>Definition:</b> <a href="_submarine_info_8cs_source.html#l00535">SubmarineInfo.cs:535</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_way_point_html"><div class="ttname"><a href="class_barotrauma_1_1_way_point.html">Barotrauma.WayPoint</a></div><div class="ttdef"><b>Definition:</b> <a href="_way_point_8cs_source.html#l00016">WayPoint.cs:17</a></div></div>
<div class="ttc" id="aclass_barotrauma_1_1_way_point_html_a70dda7b2c14b5ddae09a8bf52e14cc61"><div class="ttname"><a href="class_barotrauma_1_1_way_point.html#a70dda7b2c14b5ddae09a8bf52e14cc61">Barotrauma.WayPoint.GetRandom</a></div><div class="ttdeci">static WayPoint GetRandom(SpawnType spawnType=SpawnType.Human, JobPrefab assignedJob=null, Submarine sub=null, bool useSyncedRand=false, string spawnPointTag=null, bool ignoreSubmarine=false)</div><div class="ttdef"><b>Definition:</b> <a href="_way_point_8cs_source.html#l00933">WayPoint.cs:933</a></div></div>
<div class="ttc" id="aclass_item_html"><div class="ttname"><a href="class_item.html">Item</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_server_2_server_source_2_items_2_item_event_data_8cs_source.html#l00010">BarotraumaServer/ServerSource/Items/ItemEventData.cs:11</a></div></div>
<div class="ttc" id="ainterface_barotrauma_1_1_i_spatial_entity_html"><div class="ttname"><a href="interface_barotrauma_1_1_i_spatial_entity.html">Barotrauma.ISpatialEntity</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_spatial_entity_8cs_source.html#l00005">ISpatialEntity.cs:6</a></div></div>
<div class="ttc" id="ainterface_barotrauma_1_1_i_spatial_entity_html_a693513319db6e2fbf2c8c6f5a0321a66"><div class="ttname"><a href="interface_barotrauma_1_1_i_spatial_entity.html#a693513319db6e2fbf2c8c6f5a0321a66">Barotrauma.ISpatialEntity.SimPosition</a></div><div class="ttdeci">Vector2 SimPosition</div><div class="ttdef"><b>Definition:</b> <a href="_i_spatial_entity_8cs_source.html#l00009">ISpatialEntity.cs:9</a></div></div>
<div class="ttc" id="ainterface_barotrauma_1_1_i_spatial_entity_html_a69d75b8e5b319329a384d784de74dcb8"><div class="ttname"><a href="interface_barotrauma_1_1_i_spatial_entity.html#a69d75b8e5b319329a384d784de74dcb8">Barotrauma.ISpatialEntity.Submarine</a></div><div class="ttdeci">Submarine Submarine</div><div class="ttdef"><b>Definition:</b> <a href="_i_spatial_entity_8cs_source.html#l00010">ISpatialEntity.cs:10</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_extensions_html"><div class="ttname"><a href="namespace_barotrauma_1_1_extensions.html">Barotrauma.Extensions</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_enumerable_extensions_8cs_source.html#l00008">IEnumerableExtensions.cs:9</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_items_1_1_components_html"><div class="ttname"><a href="namespace_barotrauma_1_1_items_1_1_components.html">Barotrauma.Items.Components</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_docking_port_8cs_source.html#l00014">BarotraumaShared/SharedSource/Items/Components/DockingPort.cs:15</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_items_html"><div class="ttname"><a href="namespace_barotrauma_1_1_items.html">Barotrauma.Items</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_components_2_docking_port_8cs_source.html#l00014">BarotraumaShared/SharedSource/Items/Components/DockingPort.cs:15</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_networking_html"><div class="ttname"><a href="namespace_barotrauma_1_1_networking.html">Barotrauma.Networking</a></div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_lua_cs_2_lua_2_lua_barotrauma_additions_8cs_source.html#l00008">BarotraumaShared/SharedSource/LuaCs/Lua/LuaBarotraumaAdditions.cs:9</a></div></div>
<div class="ttc" id="anamespace_barotrauma_1_1_networking_html_add3372db2e3cffdc066c7a035266a7b2"><div class="ttname"><a href="namespace_barotrauma_1_1_networking.html#add3372db2e3cffdc066c7a035266a7b2">Barotrauma.Networking.ChatMessageType</a></div><div class="ttdeci">ChatMessageType</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_networking_2_chat_message_8cs_source.html#l00009">BarotraumaShared/SharedSource/Networking/ChatMessage.cs:10</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html"><div class="ttname"><a href="namespace_barotrauma.html">Barotrauma</a></div><div class="ttdef"><b>Definition:</b> <a href="_achievement_manager_8cs_source.html#l00011">AchievementManager.cs:12</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_a0e200852d75ece36161f3bb6b84b46df"><div class="ttname"><a href="namespace_barotrauma.html#a0e200852d75ece36161f3bb6b84b46df">Barotrauma.LimbType</a></div><div class="ttdeci">LimbType</div><div class="ttdef"><b>Definition:</b> <a href="_limb_8cs_source.html#l00018">Limb.cs:19</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_a1535396b8a6ea16210c86c93214bd2b3"><div class="ttname"><a href="namespace_barotrauma.html#a1535396b8a6ea16210c86c93214bd2b3">Barotrauma.Direction</a></div><div class="ttdeci">Direction</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_map_2_submarine_8cs_source.html#l00019">BarotraumaShared/SharedSource/Map/Submarine.cs:20</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_a280bd0510ca4cc29072e5379b37ae82dac41a31890959544c6523af684561abe5"><div class="ttname"><a href="namespace_barotrauma.html#a280bd0510ca4cc29072e5379b37ae82dac41a31890959544c6523af684561abe5">Barotrauma.WallTargetingMethod.Target</a></div><div class="ttdeci">@ Target</div></div>
<div class="ttc" id="anamespace_barotrauma_html_a2e5767ecf95f96c05f8ce00aac50dd53"><div class="ttname"><a href="namespace_barotrauma.html#a2e5767ecf95f96c05f8ce00aac50dd53">Barotrauma.FormatCapitals</a></div><div class="ttdeci">FormatCapitals</div><div class="ttdef"><b>Definition:</b> <a href="_text_manager_8cs_source.html#l00016">TextManager.cs:17</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_a4ae31bb5c40e588eec5d81af9e1d1025"><div class="ttname"><a href="namespace_barotrauma.html#a4ae31bb5c40e588eec5d81af9e1d1025">Barotrauma.InvSlotType</a></div><div class="ttdeci">InvSlotType</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_items_2_character_inventory_8cs_source.html#l00011">BarotraumaShared/SharedSource/Items/CharacterInventory.cs:12</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_a8545771a73613f0c4b69529cd91c5ac9"><div class="ttname"><a href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9">Barotrauma.SpawnType</a></div><div class="ttdeci">SpawnType</div><div class="ttdef"><b>Definition:</b> <a href="_way_point_8cs_source.html#l00014">WayPoint.cs:14</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_a8545771a73613f0c4b69529cd91c5ac9a0d234e5bcf75c768eb0db6bf96e3c22d"><div class="ttname"><a href="namespace_barotrauma.html#a8545771a73613f0c4b69529cd91c5ac9a0d234e5bcf75c768eb0db6bf96e3c22d">Barotrauma.SpawnType.Submarine</a></div><div class="ttdeci">@ Submarine</div></div>
<div class="ttc" id="anamespace_barotrauma_html_ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4"><div class="ttname"><a href="namespace_barotrauma.html#ace0a154441ef8d85d2f2c0f636a001c4a76a40e4f974fd895a0a2598c1cee28b4">Barotrauma.AttackTarget.Character</a></div><div class="ttdeci">@ Character</div><div class="ttdoc">Characters only</div></div>
<div class="ttc" id="anamespace_barotrauma_html_acfb9793313a250b94330268f4815cf50"><div class="ttname"><a href="namespace_barotrauma.html#acfb9793313a250b94330268f4815cf50">Barotrauma.CharacterTeamType</a></div><div class="ttdeci">CharacterTeamType</div><div class="ttdef"><b>Definition:</b> <a href="_barotrauma_shared_2_shared_source_2_characters_2_character_8cs_source.html#l00021">BarotraumaShared/SharedSource/Characters/Character.cs:22</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_aef3e8dd1c7f82d86897cdd111f258f87"><div class="ttname"><a href="namespace_barotrauma.html#aef3e8dd1c7f82d86897cdd111f258f87">Barotrauma.InputType</a></div><div class="ttdeci">InputType</div><div class="ttdef"><b>Definition:</b> <a href="_input_type_8cs_source.html#l00003">InputType.cs:4</a></div></div>
<div class="ttc" id="anamespace_barotrauma_html_aef76a325b5e9f39651c25ed7eff8f372a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespace_barotrauma.html#aef76a325b5e9f39651c25ed7eff8f372a6adf97f83acf6453d4a6a4b1070f3754">Barotrauma.EnemyTargetingRestrictions.None</a></div><div class="ttdeci">@ None</div></div>
<div class="ttc" id="anamespace_barotrauma_html_af9e8b4c488b5c9a2ed4b9e967afd748f"><div class="ttname"><a href="namespace_barotrauma.html#af9e8b4c488b5c9a2ed4b9e967afd748f">Barotrauma.SubmarineTag</a></div><div class="ttdeci">SubmarineTag</div><div class="ttdef"><b>Definition:</b> <a href="_submarine_info_8cs_source.html#l00019">SubmarineInfo.cs:20</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_attack_result_html"><div class="ttname"><a href="struct_barotrauma_1_1_attack_result.html">Barotrauma.AttackResult</a></div><div class="ttdef"><b>Definition:</b> <a href="_attack_8cs_source.html#l00061">Attack.cs:62</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_attack_result_html_a16f39a4eedae3d43050801e4d3c0e277"><div class="ttname"><a href="struct_barotrauma_1_1_attack_result.html#a16f39a4eedae3d43050801e4d3c0e277">Barotrauma.AttackResult.Damage</a></div><div class="ttdeci">float Damage</div><div class="ttdef"><b>Definition:</b> <a href="_attack_8cs_source.html#l00063">Attack.cs:64</a></div></div>
<div class="ttc" id="astruct_barotrauma_1_1_attack_result_html_a9b01fdce673c1026fa3a6e1102031bdb"><div class="ttname"><a href="struct_barotrauma_1_1_attack_result.html#a9b01fdce673c1026fa3a6e1102031bdb">Barotrauma.AttackResult.Afflictions</a></div><div class="ttdeci">readonly List&lt; Affliction &gt; Afflictions</div><div class="ttdef"><b>Definition:</b> <a href="_attack_8cs_source.html#l00068">Attack.cs:68</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8575ad821fc3b469d94fde51c8787ee3.html">Barotrauma</a></li><li class="navelem"><a class="el" href="dir_8b99819d2ee30d5e48f0b0f8b94f385a.html">BarotraumaShared</a></li><li class="navelem"><a class="el" href="dir_37517cc6f95be7cb877361d257ae4695.html">SharedSource</a></li><li class="navelem"><a class="el" href="dir_0cb0b4ad0a43cceb4569739c1ecce560.html">Characters</a></li><li class="navelem"><a class="el" href="dir_e4c7860fb00fd66daa00af0f8eefc83b.html">AI</a></li><li class="navelem"><b>HumanAIController.cs</b></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
